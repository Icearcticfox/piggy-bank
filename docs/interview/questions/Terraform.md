
### Terraform State

**–ß—Ç–æ —Ç–∞–∫–æ–µ Terraform state?**

‚Ä¢ State-—Ñ–∞–π–ª (terraform.tfstate) —Ö—Ä–∞–Ω–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ HCL —Ä–µ—Å—É—Ä—Å—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ –æ–±–ª–∞–∫–µ.

‚Ä¢ –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Terraform –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, –∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ –≤–Ω–µ—Å—Ç–∏ –ø—Ä–∏ terraform apply.

**–ì–¥–µ –µ–≥–æ —Ö—Ä–∞–Ω—è—Ç?**

‚Ä¢ **–õ–æ–∫–∞–ª—å–Ω–æ** (terraform.tfstate –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) ‚Üí –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

‚Ä¢ **–£–¥–∞–ª–µ–Ω–Ω–æ** (S3, GCS, Azure Blob, Terraform Cloud) ‚Üí –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π.

**–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å?**

‚Ä¢ **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ** ‚Üí —Ä–µ—à–∞–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ (dynamodb –¥–ª—è S3 backend).

‚Ä¢ **–ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** ‚Üí —Ä–µ—à–∞–µ—Ç—Å—è —Å terraform state encrypt, terraform_remote_state, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ vault.

‚Ä¢ **–ü–æ—Ç–µ—Ä—è state-—Ñ–∞–π–ª–∞** ‚Üí –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω –±–µ–∑ –±—ç–∫–∞–ø–∞, —Ç–µ—Ä—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ—Å—É—Ä—Å–∞–º–∏ Terraform.
	‚Ä¢ –ï—Å–ª–∏ state **—É–¥–∞–ª–µ–Ω**, –Ω–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –µ—â–µ –µ—Å—Ç—å ‚Üí **terraform import** –ø–æ–º–æ–∂–µ—Ç.
	‚Ä¢ –ï—Å–ª–∏ state —É–¥–∞–ª–µ–Ω **–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–µ—Ç** ‚Üí **–ø–æ—Ç–µ—Ä—è–Ω–æ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ**.
	‚Ä¢ **–í—ã–≤–æ–¥:** **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π –±—ç–∫–∞–ø—ã state-—Ñ–∞–π–ª–æ–≤!** (S3 + DynamoDB, GCS, Azure Blob).

---

### Terraform Workspaces

**–ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã?**  

**Terraform Workspaces** ‚Äì —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è **—Ä–∞–∑–Ω—ã–º–∏ —Å—Ä–µ–¥–∞–º–∏ (environments)** –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º –∫–æ–¥–µ, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö Terraform –ø—Ä–æ–µ–∫—Ç–æ–≤.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

‚Ä¢ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É Terraform –µ—Å—Ç—å **–æ–¥–∏–Ω workspace** ‚Üí default.

‚Ä¢ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ workspace** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π:

```
terraform workspace new dev
terraform workspace new prod
```

  

‚Ä¢ –ö–∞–∂–¥–æ–º—É workspace —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç **—Å–≤–æ–π state-—Ñ–∞–π–ª**, –Ω–∞–ø—Ä–∏–º–µ—Ä:

‚Ä¢ terraform.tfstate.d/dev/terraform.tfstate

‚Ä¢ terraform.tfstate.d/prod/terraform.tfstate

‚Ä¢ –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ workspace Terraform **—Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–Ω—ã–º state**, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç–æ—Ç –∂–µ 
HCL-–∫–æ–¥**.

---

**2Ô∏è‚É£ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Terraform Workspaces?**

‚úÖ **–ö–æ–≥–¥–∞ –Ω–∞–¥–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–∑–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏ (dev, staging, prod) –∏–∑ –æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.**

‚úÖ **–ö–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤).**

‚úÖ **–ö–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –ø—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª—è—Ç—å state –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤.**

üö® **–ö–æ–≥–¥–∞ –ù–ï —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å workspaces?**

‚Ä¢ Workspaces **–Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç** –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏, —Ç.–∫. state-—Ñ–∞–π–ª –≤—Å–µ —Ä–∞–≤–Ω–æ –æ–±—â–∏–π –¥–ª—è –≤—Å–µ—Ö workspace.

‚Ä¢ –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—ã–µ backend-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (terraform.backend).

---

**3Ô∏è‚É£ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**

```
terraform workspace new staging  # –°–æ–∑–¥–∞–µ–º workspace
terraform workspace list         # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö workspaces
terraform workspace select dev   # –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ dev
terraform workspace show         # –¢–µ–∫—É—â–∏–π workspace
```

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å workspace –≤ –∫–æ–¥–µ Terraform?**

```
resource "aws_instance" "example" {
  count = terraform.workspace == "prod" ? 3 : 1  # –í prod —Å–æ–∑–¥–∞–µ–º 3 VM, –≤ dev ‚Äî 1
  ami   = "ami-123456"
}
```

  

---

**4Ô∏è‚É£ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã Workspaces**

‚Ä¢ **–†–∞–∑–Ω—ã–µ Terraform backend (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–¥–µ–ª—å–Ω—ã–µ S3-–±–∞–∫–µ—Ç—ã) –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π.**

‚Ä¢ **–ú–æ–¥—É–ª–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ workspace.**

‚Ä¢ **Terraform Cloud + separate workspaces –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π.**


üí° **–í—ã–≤–æ–¥**:

Terraform Workspaces ‚Äì —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏, –Ω–æ –≤ **—ç–Ω—Ç–µ—Ä–ø—Ä–∞–π–∑-–ø—Ä–æ–µ–∫—Ç–∞—Ö** –ª—É—á—à–µ **—Ä–∞–∑–Ω–æ—Å–∏—Ç—å state –ø–æ —Ä–∞–∑–Ω—ã–º backend‚Äô–∞–º**.



---
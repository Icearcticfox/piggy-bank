
**–∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã —É—Å–∫–æ—Ä–µ–Ω–∏—è CI/CD** ‚Äì **–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —Ä–∞–Ω–Ω–µ—Ä–æ–≤, —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**.
  

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è GitLab Runners

üöÄ **–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ –∏–∑-–∑–∞ —Ä–∞–Ω–Ω–µ—Ä–æ–≤?**

‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ** —Ä–∞–Ω–Ω–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚Üí **—É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é –∑–∞ —Ä–µ—Å—É—Ä—Å—ã**.

‚Ä¢ –ü–æ–¥–Ω–∏–º–∞—Ç—å **–∞–≤—Ç–æ-—Å–∫–µ–π–ª–∏–Ω–≥ GitLab Runners** –≤ Kubernetes / AWS Auto Scaling.

‚Ä¢ –ï—Å–ª–∏ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –º–Ω–æ–≥–æ CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **GPU-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–Ω–Ω–µ—Ä—ã**.

---

**2Ô∏è‚É£ –†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ —à–∞–≥–æ–≤**

üöÄ **–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø–∞–π–ø–ª–∞–π–Ω –¥–æ–ª–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è?**

‚Ä¢ **–†–∞–∑–±–∏—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ –≥—Ä—É–ø–ø—ã** –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:

```
test:
  stage: test
  parallel: 5
  script:
    - run_tests --shard $CI_NODE_INDEX/$CI_NODE_TOTAL
```

üìå –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å **5 —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∂–æ–±–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**.

‚Ä¢ –ó–∞–ø—É—Å–∫–∞—Ç—å **—Ä–∞–∑–Ω—ã–µ —Å—Ç–∞–¥–∏–∏ –≤ –æ–¥–Ω–æ–º –ø–∞–π–ø–ª–∞–π–Ω–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**, –µ—Å–ª–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```
stages:
  - build
  - test
  - deploy

build-job:
  stage: build
  script: make build

test-job:
  stage: test
  needs: ["build-job"]
  script: pytest
```

üìå **needs** —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ job **test-job** —Å—Ç–∞—Ä—Ç—É–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ **build-job**, **–Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –±–∏–ª–¥–æ–≤**.

---

**3Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (cache & artifacts)**

üöÄ **–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –ø–∞–π–ø–ª–∞–π–Ω–µ?**

‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**:

```
cache:
  key: $CI_COMMIT_REF_SLUG
  paths:
    - .venv/
    - node_modules/
```

üìå –≠—Ç–æ **—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –¥–∂–æ–±–∞–º–∏**, —Å–æ–∫—Ä–∞—â–∞—è –∏—Ö –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –º–µ–∂–¥—É —Å—Ç–∞–¥–∏—è–º–∏:

```
build-job:
  stage: build
  script:
    - make build
  artifacts:
    paths:
      - build/output
```

üìå –≠—Ç–æ **—É–º–µ–Ω—å—à–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**, —Ç.–∫. –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –±–∏–ª–¥—ã.

---

**4Ô∏è‚É£ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ —É—Å–ª–æ–≤–∏–π –∑–∞–ø—É—Å–∫–∞**

üöÄ **–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø–∞–π–ø–ª–∞–π–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ?**

‚Ä¢ **–ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –¥–∂–æ–±—ã**, –µ—Å–ª–∏ –∫–æ–¥ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è:

```
only:
  changes:
    - src/*
```

üìå –î–∂–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Ñ–∞–π–ª—ã –≤ src/**.

‚Ä¢ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å merge trains (–ê–≤—Ç–æ-–º–µ—Ä–∂–∏ –≤ –º–∞—Å—Ç–µ—Ä)** ‚Üí —Å–æ–∫—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤.

---

**5Ô∏è‚É£ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤ Docker**

üöÄ **–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –±–∏–ª–¥—ã –∏ –¥–µ–ø–ª–æ–∏ –∑–∞–Ω–∏–º–∞—é—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏?**

‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã**, –∞ –Ω–µ —Ç—è–Ω—É—Ç—å –≤—Å—ë —Å –Ω—É–ª—è:

```
image: python:3.10
```

üìå GitLab –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–≥–æ—Ç–æ–≤—ã–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑**, –∞ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –µ–≥–æ –∑–∞–Ω–æ–≤–æ.

‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—É—é —Å–±–æ—Ä–∫—É (multi-stage builds)** –≤ Docker:

```
FROM node:16 AS builder
WORKDIR /app
COPY . .
RUN npm install && npm run build

FROM nginx:latest
COPY --from=builder /app/build /usr/share/nginx/html
```

üìå –≠—Ç–æ **—É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –∏ —É—Å–∫–æ—Ä—è–µ—Ç –¥–µ–ø–ª–æ–π.

---

**üéØ –ò—Ç–æ–≥**

  

‚úÖ **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ä–∞–Ω–Ω–µ—Ä–∞—Ö** ‚Üí **–∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ —Ä–∞–Ω–Ω–µ—Ä—ã, –∞–≤—Ç–æ-—Å–∫–µ–π–ª–∏–Ω–≥**.

‚úÖ **–ï—Å–ª–∏ –¥–æ–ª–≥–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∂–æ–±—ã** ‚Üí **—Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–µ–º —Ç–µ—Å—Ç—ã, –±–∏–ª–¥—ã, –¥–µ–ø–ª–æ–∏**.

‚úÖ **–ï—Å–ª–∏ –º–Ω–æ–≥–æ –ª–∏—à–Ω–∏—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤** ‚Üí **–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤ .gitlab-ci.yml**.

‚úÖ **–ï—Å–ª–∏ –¥–æ–ª–≥–æ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚Üí **–∏—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**.

‚úÖ **–ï—Å–ª–∏ –¥–æ–ª–≥–æ –±–∏–ª–¥–∏—Ç—Å—è Docker** ‚Üí **–º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Å–±–æ—Ä–∫–∞, –±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã**.

  

üí° **–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –≤—ã–¥–µ–ª–∏—Ç—å—Å—è, –º–æ–∂–µ—à—å —É–ø–æ–º—è–Ω—É—Ç—å GitOps –∏ ArgoCD –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–µ–ø–ª–æ—è –≤ Kubernetes.**

---


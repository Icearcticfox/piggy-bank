**üöÄ –ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å CI/CD –ø–∞–π–ø–ª–∞–π–Ω? Best Practices –¥–ª—è DevOps**

CI/CD –ø–∞–π–ø–ª–∞–π–Ω ‚Äì –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —É—è–∑–≤–∏–º—ã—Ö —á–∞—Å—Ç–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ **–æ–Ω –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**. –ï—Å–ª–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä—É–µ—Ç CI/CD, –æ–Ω —Å–º–æ–∂–µ—Ç **–≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–¥ –≤ –ø—Ä–æ–¥–µ, –∫—Ä–∞—Å—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑—ã**.

–†–∞–∑–±–µ—Ä–µ–º –∫–ª—é—á–µ–≤—ã–µ **best practices**, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å CI/CD.

---

**1Ô∏è‚É£ –ó–∞—â–∏—Ç–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ CI/CD**

  

**–ü—Ä–æ–±–ª–µ–º–∞**: **–°–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ ‚Üí —É—Ç–µ—á–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø–∞—Ä–æ–ª–µ–π**.

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ–º **–∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤**, –∞ –Ω–µ .gitlab-ci.yml.

  

‚úÖ **–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?**

‚Ä¢ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HashiCorp Vault / AWS Secrets Manager** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è API-–∫–ª—é—á–µ–π.

‚Ä¢ **GitLab CI/CD ‚Üí CI/CD Variables (masked, protected)**.

‚Ä¢ **–ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥ (--password=secret)**.

  

üìå **–ü—Ä–∏–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitLab CI:**

```
deploy:
  script:
    - export DB_PASSWORD=$CI_DB_PASSWORD  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–∑ GitLab CI/CD
    - ./deploy.sh
  variables:
    CI_DB_PASSWORD: "MASKED"  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ CI
```

üö® **–û–ø–∞—Å–Ω–æ:**

‚ùå **–•—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ –∫–æ–¥–µ (.gitlab-ci.yml)**.

‚ùå **–ó–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –ª–æ–≥–∏ CI/CD (echo $DB_PASSWORD)**.

---

**2Ô∏è‚É£ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –≤ CI/CD**

  

**–ü—Ä–æ–±–ª–µ–º–∞**: **GitLab Runner —Ä–∞–±–æ—Ç–∞–µ—Ç —Å root-–¥–æ—Å—Ç—É–ø–æ–º ‚Üí –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–æ–¥**.

**–†–µ—à–µ–Ω–∏–µ**: **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –∏ –¥–æ—Å—Ç—É–ø –∫ Runner‚Äô–∞–º**.

  

‚úÖ **–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?**

‚Ä¢ **–ó–∞–ø—É—Å–∫–∞—Ç—å GitLab Runner –≤ Kubernetes (gitlab-runner helm chart)**.

‚Ä¢ **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø—Ä–∞–≤–∞ Runner‚Äô–∞ (rootless CI/CD)**.

‚Ä¢ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–∞–Ω–Ω–µ—Ä—ã –¥–ª—è production (protected runners)**.

  

üìå **–ö–∞–∫ –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–∞–Ω–Ω–µ—Ä —Ç–æ–ª—å–∫–æ –¥–ª—è protected branch?**

```
gitlab-runner register --locked --access-level=ref_protected
```

üö® **–û–ø–∞—Å–Ω–æ:**

‚ùå **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–π runner –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤** ‚Üí –ª—é–±–æ–π –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–¥.

‚ùå **–ó–∞–ø—É—Å–∫–∞—Ç—å docker-in-docker (dind) –±–µ–∑ --privileged=false** ‚Üí –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ.

---

**3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º (SAST, DAST, IaC Security)**

  

**–ü—Ä–æ–±–ª–µ–º–∞**: **–£—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –∫–æ–¥–µ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ ‚Üí —ç–∫—Å–ø–ª–æ–π—Ç—ã, SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏, RCE**.

**–†–µ—à–µ–Ω–∏–µ**: **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º**.

  

‚úÖ **–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?**

‚Ä¢ **SAST (Static Analysis Security Testing)** ‚Üí SonarQube, GitLab SAST.

‚Ä¢ **DAST (Dynamic Analysis Security Testing)** ‚Üí OWASP ZAP, Nikto.

‚Ä¢ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (IaC Security)** ‚Üí Checkov, tfsec, kube-score.

  

üìå **–ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ SAST –≤ GitLab CI:**

```
sast:
  stage: test
  script:
    - gitlab-sast-check
```

üìå **–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ Terraform-–∫–æ–¥–∞ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏:**

```
iac-security:
  stage: test
  script:
    - pip install checkov
    - checkov -d .
```

üö® **–û–ø–∞—Å–Ω–æ:**

‚ùå **–ù–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–¥ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º** ‚Üí —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ø—Ä–æ–¥.

‚ùå **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (tfsec, checkov)** ‚Üí Terraform –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥—ã—Ä–∫—É –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

**4Ô∏è‚É£ –ü–æ–¥–ø–∏—Å—å –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**

  

**–ü—Ä–æ–±–ª–µ–º–∞**: **–ó–∞–ø—É—Å–∫ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö Docker-–æ–±—Ä–∞–∑–æ–≤ ‚Üí supply chain –∞—Ç–∞–∫–∏**.

**–†–µ—à–µ–Ω–∏–µ**: **–ü–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –æ–±—Ä–∞–∑—ã –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Ö –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º**.

  

‚úÖ **–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?**

‚Ä¢ **–ò—Å–ø–æ–ª—å–∑—É–µ–º Sigstore Cosign / Notary –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**.

‚Ä¢ **–°–∫–∞–Ω–∏—Ä—É–µ–º –æ–±—Ä–∞–∑—ã –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (Trivy, Clair, Anchore)**.

‚Ä¢ **–ó–∞–ø—Ä–µ—â–∞–µ–º –∑–∞–ø—É—Å–∫ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –≤ Kubernetes (OPA/Gatekeeper)**.

  

üìå **–ü—Ä–∏–º–µ—Ä –ø–æ–¥–ø–∏—Å–∏ –æ–±—Ä–∞–∑–∞ —Å Cosign:**

```
cosign sign --key cosign.key myrepo/myapp:latest
cosign verify --key cosign.pub myrepo/myapp:latest
```

üìå **–ö–∞–∫ –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –Ω–µ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã –≤ Kubernetes (OPA/Gatekeeper)?**

```
apiVersion: constraints.gatekeeper.sh/v1beta1
kind: K8sPSPContainerAllowedImages
metadata:
  name: enforce-signed-images
spec:
  match:
    kinds:
      - apiGroups: [""]
        kinds: ["Pod"]
  parameters:
    allowedImages:
      - "myrepo.com/*"
```

üö® **–û–ø–∞—Å–Ω–æ:**

‚ùå **–ó–∞–ø—É—Å–∫–∞—Ç—å latest –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä—Å–∏–∏**.

‚ùå **–ù–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –æ–±—Ä–∞–∑–∞—Ö (docker scan)**.

---

**5Ô∏è‚É£ –ó–∞—â–∏—Ç–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ –∫–µ—à–∞ –≤ CI/CD**

  

**–ü—Ä–æ–±–ª–µ–º–∞**: **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –±–∏–ª–¥–æ–≤ –∏ –∫–µ—à–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**.

**–†–µ—à–µ–Ω–∏–µ**: **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º –∏ —à–∏—Ñ—Ä—É–µ–º –∏—Ö**.

  

‚úÖ **–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?**

‚Ä¢ **–û—á–∏—â–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø–æ—Å–ª–µ –±–∏–ª–¥–∞ (expire_in)**.

‚Ä¢ **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–µ—à—É (cache: policy: pull-only)**.

  

üìå **–ü—Ä–∏–º–µ—Ä –æ—á–∏—Å—Ç–∫–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ 1 –¥–µ–Ω—å:**

```
artifacts:
  expire_in: 1 day
```

üìå **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–µ—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–µ—à–∞ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**

```
cache:
  policy: pull-only
```

üö® **–û–ø–∞—Å–Ω–æ:**

‚ùå **–•—Ä–∞–Ω–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, .env —Ñ–∞–π–ª—ã)**.

---

**6Ô∏è‚É£ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ CI/CD (Branch Protection & MR Rules)**

  

**–ü—Ä–æ–±–ª–µ–º–∞**: **–õ—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å –∫–æ–¥ –≤ –ø—Ä–æ–¥**.

**–†–µ—à–µ–Ω–∏–µ**: **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞—â–∏—Ç—É –≤–µ—Ç–æ–∫ –∏ –º–µ—Ä–∂-—Ä–µ–∫–≤–µ—Å—Ç–æ–≤**.

  

‚úÖ **–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ?**

‚Ä¢ **–í–∫–ª—é—á–∞–µ–º –∑–∞—â–∏—Ç—É main / master (branch protection)**.

‚Ä¢ **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º, –∫—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å merge (Code Owners)**.

‚Ä¢ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π CI/CD pipeline –ø–µ—Ä–µ–¥ –º–µ—Ä–¥–∂–µ–º (merge checks)**.

  

üìå **–ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å –∑–∞—â–∏—Ç—É –≤–µ—Ç–∫–∏ –≤ GitLab?**

```
gitlab project settings ‚Üí Protected Branches ‚Üí Protect "main"
```

üìå **–ö–∞–∫ –∑–∞–ø—Ä–µ—Ç–∏—Ç—å merge –±–µ–∑ CI/CD –ø—Ä–æ–≤–µ—Ä–∫–∏?**

```
only:
  - main
  - staging
```

üö® **–û–ø–∞—Å–Ω–æ:**

‚ùå **–î–∞–≤–∞—Ç—å –≤—Å–µ–º –¥–æ—Å—Ç—É–ø –∫ merge –≤ main**.

‚ùå **–†–∞–∑—Ä–µ—à–∞—Ç—å –¥–µ–ø–ª–æ–π –±–µ–∑ CI/CD-–ø—Ä–æ–≤–µ—Ä–∫–∏**.

---

**üéØ –ò—Ç–æ–≥: –ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å CI/CD?**

|**–ö–∞—Ç–µ–≥–æ—Ä–∏—è**|**Best Practice**|
|---|---|
|**–°–µ–∫—Ä–µ—Ç—ã**|–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vault, GitLab CI/CD Variables, Masked Variables|
|**–î–æ—Å—Ç—É–ø**|–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å runner‚Äô—ã, –∑–∞–ø—Ä–µ—Ç–∏—Ç—å root-–ø—Ä–∞–≤–∞|
|**–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**|–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SAST, DAST, Checkov, Trivy|
|**–û–±—Ä–∞–∑—ã**|–ü–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å (cosign), —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å, –ø—Ä–æ–≤–µ—Ä—è—Ç—å OPA|
|**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**|–û—á–∏—â–∞—Ç—å (expire_in), –∑–∞–ø—Ä–µ—â–∞—Ç—å pull –∏–∑ –∫—ç—à–∞|
|**Branch Protection**|–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å merge, –ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ—Ä–µ–∑ MR|

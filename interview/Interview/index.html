
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../devops/clouds/Basic%20questions/">
      
      
        <link rel="next" href="../Troubleshooting%20Guide/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Interview - Piggy bank</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Piggy bank" class="md-header__button md-logo" aria-label="Piggy bank" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Piggy bank
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Interview
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Piggy bank" class="md-nav__button md-logo" aria-label="Piggy bank" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Piggy bank
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to Piggy bank
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Devops
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Devops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/Ansible/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ansible
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gitlab
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Gitlab
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/Gitlab/Artifacts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Artifacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/Gitlab/Runners/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runners
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/Gitlab/Security%20In%20CI-CD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security In CI CD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/Kubernetes/Autoscailing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autoscailing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/Kubernetes/Security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Terraform
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Terraform
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/Terraform/Terraform%20state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terraform state
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/Terraform/Workspace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workspace
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Clouds
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Clouds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devops/clouds/Basic%20questions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic questions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Interview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Interview
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Interview
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      –û–±—â–µ–µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–û–±—â–µ–µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      –£ –≤–∞—Å –µ—Å—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä. –í—ã –Ω–∞–∂–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤–∫–ª—é—á–µ–Ω–∏—è. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –û–°.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-curl-wwwtinkoffru-" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Ç–∫—Ä—ã–ª–∏ linux –∫–æ–Ω—Å–æ–ª—å, –≤–≤–µ–ª–∏ curl www.tinkoff.ru - –Ω–∞–∂–∞–ª–∏ —ç–Ω—Ç–µ—Ä. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      –ó–∞—á–µ–º –º–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadaverage" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ LoadAverage?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      –ö—Ç–æ –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≥—Ä—É–ø–ø—É —É —Ñ–∞–π–ª–∞?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ö—Ç–æ –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≥—Ä—É–ø–ø—É —É —Ñ–∞–π–ª–∞?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–∏–º–µ—Ä:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ #1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ #2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ #2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inodes" class="md-nav__link">
    <span class="md-ellipsis">
      –ü–æ—è—Å–Ω–µ–Ω–∏–µ: —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –∏ inodes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      –ì–∏–ø–µ—Ä–≤–∏–∑–æ—Ä
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux_1" class="md-nav__link">
    <span class="md-ellipsis">
      Linux
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      –í–∏–¥—ã –ø–∞–º—è—Ç–∏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–í–∏–¥—ã –ø–∞–º—è—Ç–∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaces-and-cgroups" class="md-nav__link">
    <span class="md-ellipsis">
      Namespaces and Cgroups
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Namespaces and Cgroups">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-namespaces" class="md-nav__link">
    <span class="md-ellipsis">
      üß± –ß—Ç–æ —Ç–∞–∫–æ–µ Linux namespaces?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß± –ß—Ç–æ —Ç–∞–∫–æ–µ Linux namespaces?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespace" class="md-nav__link">
    <span class="md-ellipsis">
      üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã namespace
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-cgroups" class="md-nav__link">
    <span class="md-ellipsis">
      üîí –ß—Ç–æ —Ç–∞–∫–æ–µ Linux cgroups?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      üì¶ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üì¶ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      üê≥ –ü—Ä–∏–º–µ—Ä: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bash-0-1" class="md-nav__link">
    <span class="md-ellipsis">
      Bash –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $?, $0, $1, $@, $\$
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bash –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $?, $0, $1, $@, $\$">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      $\$
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-variables-short" class="md-nav__link">
    <span class="md-ellipsis">
      Special variables short
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zombie" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ zombie –ø—Ä–æ—Ü–µ—Å—Å –∏ —á–µ–º —ç—Ç–æ –ø–ª–æ—Ö–æ, –∫–∞–∫ –µ–≥–æ —É–±–∏—Ç—å?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      –ß–µ–º –æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git" class="md-nav__link">
    <span class="md-ellipsis">
      GIT
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GIT">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–±—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-revert-git-reset" class="md-nav__link">
    <span class="md-ellipsis">
      –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è git revert –æ—Ç git reset?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      –°–µ—Ç—å
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–°–µ—Ç—å">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osi" class="md-nav__link">
    <span class="md-ellipsis">
      OSI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l4l7-lb" class="md-nav__link">
    <span class="md-ellipsis">
      L4/L7 LB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="L4/L7 LB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#l4-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ L4-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l7-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ L7-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l3-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ L3-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (—Å–µ—Ç–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l2-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ L2-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–∫–∞–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      üß™ –í Kubernetes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß™ –í Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      üß≠ –ö—Ä–∞—Ç–∫–æ: –∫–∞–∫ —Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      üß™ –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Ñ–∏–∫–∞:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-mesh-istio" class="md-nav__link">
    <span class="md-ellipsis">
      ü§ì –ê –µ—Å–ª–∏ Service Mesh (–Ω–∞–ø—Ä–∏–º–µ—Ä, Istio)?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –†–µ–∑—é–º–µ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-vs-udp" class="md-nav__link">
    <span class="md-ellipsis">
      TCP vs UDP. –†–∞–∑–Ω–∏—Ü–∞
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-handshake" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç TCP-handshake?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã? –ö–∞–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ? (https —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssl-" class="md-nav__link">
    <span class="md-ellipsis">
      –û–ø–∏—à–∏ –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã ssl-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      –°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–∏–º–µ—Ä—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      –ü–ª—é—Å—ã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      –ú–∏–Ω—É—Å—ã
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      –ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–∏–º–µ—Ä—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      –ü–ª—é—Å—ã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      –ú–∏–Ω—É—Å—ã
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      –í—ã–≤–æ–¥
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iptables-snat-dnat" class="md-nav__link">
    <span class="md-ellipsis">
      IPTables: SNAT, DNAT, –ú–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPTables: SNAT, DNAT, –ú–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-filter-table" class="md-nav__link">
    <span class="md-ellipsis">
      1. Filter Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-nat-table" class="md-nav__link">
    <span class="md-ellipsis">
      2. NAT Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-mangle-table" class="md-nav__link">
    <span class="md-ellipsis">
      3. Mangle Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-raw-table" class="md-nav__link">
    <span class="md-ellipsis">
      4. Raw Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iptables" class="md-nav__link">
    <span class="md-ellipsis">
      –¶–µ–ø–æ—á–∫–∏ IPTables:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1012153522" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–ø–∏—Å—å 10.12.15.35/22?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    <span class="md-ellipsis">
      DNS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∏ –Ω–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      –°–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–°–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ –∏ —Å–æ–∫–µ—Ç–æ–≤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcat-nc" class="md-nav__link">
    <span class="md-ellipsis">
      NetCat (nc)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmap" class="md-nav__link">
    <span class="md-ellipsis">
      Nmap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcpdump" class="md-nav__link">
    <span class="md-ellipsis">
      Tcpdump
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_1" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-docker" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –≤–Ω—É—Ç—Ä–∏ Docker –ø–æ–Ω—è—Ç—å —á—Ç–æ —Ç—ã –≤ Docker?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ö–∞–∫ –≤–Ω—É—Ç—Ä–∏ Docker –ø–æ–Ω—è—Ç—å —á—Ç–æ —Ç—ã –≤ Docker?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-dockerenv" class="md-nav__link">
    <span class="md-ellipsis">
      1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ /.dockerenv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-cgroup" class="md-nav__link">
    <span class="md-ellipsis">
      2. –ß—Ç–µ–Ω–∏–µ cgroup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-hostname" class="md-nav__link">
    <span class="md-ellipsis">
      3. –ü—Ä–æ–≤–µ—Ä–∫–∞ hostname
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-cgroups" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ö†Ô∏è 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π cgroups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ö–∞–∫–æ–π —Å–ø–æ—Å–æ–± –ª—É—á—à–µ?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmd-entrypoint" class="md-nav__link">
    <span class="md-ellipsis">
      –í —á–µ–º –æ—Ç–ª–∏—á–∏–µ CMD –∏ ENTRYPOINT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_2" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ Docker? –ö–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω? –ù–∞ –∫–∞–∫–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_3" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Docker:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-vmware" class="md-nav__link">
    <span class="md-ellipsis">
      –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Docker –∏ VMware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_4" class="md-nav__link">
    <span class="md-ellipsis">
      –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Docker? –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–µ—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã Dockerfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Dockerfile –∏ docker-compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-image-registry" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ docker image —Å –æ–¥–Ω–æ–π –º–∞—à–∏–Ω—ã –Ω–∞ –¥—Ä—É–≥—É—é –±–µ–∑ registry?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      Best practices –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é Dockerfile –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_5" class="md-nav__link">
    <span class="md-ellipsis">
      –°–µ—Ç–µ–≤—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã Docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arg-env" class="md-nav__link">
    <span class="md-ellipsis">
      –í —á–µ–º –æ—Ç–ª–∏—á–∏–µ ARG –æ—Ç ENV?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_6" class="md-nav__link">
    <span class="md-ellipsis">
      üß± –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–ª–æ–∏ –≤ Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß± –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–ª–æ–∏ –≤ Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bash" class="md-nav__link">
    <span class="md-ellipsis">
      Bash
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-csv-timestamp-status-url-user-agent" class="md-nav__link">
    <span class="md-ellipsis">
      –û–±—Ä–∞–±–æ—Ç–∫–∞ access –ª–æ–≥–æ–≤ (CSV): timestamp, status, url, user-agent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–û–±—Ä–∞–±–æ—Ç–∫–∞ access –ª–æ–≥–æ–≤ (CSV): timestamp, status, url, user-agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö URL:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_1" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π URL:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#400-404-url" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ 400-404 –ø–æ –∫–∞–∂–¥–æ–º—É URL:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-eu-o-pipefail" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ –¥–µ–ª–∞–µ—Ç set -eu -o pipefail?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#50" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É –Ω–∞ 50 —Å–µ—Ä–≤–µ—Ä–∞—Ö?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      –ó–∞—á–µ–º –Ω—É–∂–Ω—ã?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      –û—à–∏–±–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞–º
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP-–º–µ—Ç–æ–¥—ã, –∏–∑–º–µ–Ω—è—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-c10k" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ Nginx —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É C10K?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      –í–∞–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è location?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location_1" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –¥–µ–±–∞–∂–∏—Ç—å location?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-apache" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Nginx –ø–µ—Ä–µ–¥ Apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      –ú–æ–≥—É—Ç –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxy" class="md-nav__link">
    <span class="md-ellipsis">
      HAProxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#envoy" class="md-nav__link">
    <span class="md-ellipsis">
      Envoy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-cloud-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      Google Cloud Load Balancer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-load-balancers" class="md-nav__link">
    <span class="md-ellipsis">
      AWS Load Balancers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AWS Load Balancers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#classic-load-balancer-clb" class="md-nav__link">
    <span class="md-ellipsis">
      Classic Load Balancer (CLB)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-load-balancer-alb" class="md-nav__link">
    <span class="md-ellipsis">
      Application Load Balancer (ALB)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-load-balancer-nlb" class="md-nav__link">
    <span class="md-ellipsis">
      Network Load Balancer (NLB)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vs-" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ–∫—Å–∏ vs –†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ü—Ä–æ–∫—Å–∏ vs –†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#forward-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–∫—Å–∏ (forward proxy)?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ (reverse proxy)?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubectl-apply" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ kubectl apply
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qos-pod-quality-of-service-classes" class="md-nav__link">
    <span class="md-ellipsis">
      QOS (Pod Quality of Service Classes)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QOS (Pod Quality of Service Classes)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-guaranteed" class="md-nav__link">
    <span class="md-ellipsis">
      1. Guaranteed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-burstable" class="md-nav__link">
    <span class="md-ellipsis">
      2. Burstable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-besteffort" class="md-nav__link">
    <span class="md-ellipsis">
      3. BestEffort
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetes-tolerations-affinity-labels-pod" class="md-nav__link">
    <span class="md-ellipsis">
      –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–µ–¥—É–ª–∏–Ω–≥–æ–º –≤ Kubernetes: Tolerations, Affinity, Labels –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ Pod'–æ–≤ –Ω–∞ –Ω–æ–¥—ã
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–µ–¥—É–ª–∏–Ω–≥–æ–º –≤ Kubernetes: Tolerations, Affinity, Labels –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ Pod&#39;–æ–≤ –Ω–∞ –Ω–æ–¥—ã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-labels" class="md-nav__link">
    <span class="md-ellipsis">
      1. Labels (–ª–µ–π–±–ª—ã)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-taints-tolerations" class="md-nav__link">
    <span class="md-ellipsis">
      2. Taints –∏ Tolerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-node-affinity" class="md-nav__link">
    <span class="md-ellipsis">
      3. Node Affinity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-pod-affinity-anti-affinity" class="md-nav__link">
    <span class="md-ellipsis">
      4. Pod Affinity / Anti-Affinity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Pod Affinity / Anti-Affinity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod-affinity" class="md-nav__link">
    <span class="md-ellipsis">
      Pod Affinity (—Å–æ—Å–µ–¥—Å—Ç–≤–æ):
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod-anti-affinity" class="md-nav__link">
    <span class="md-ellipsis">
      Pod Anti-Affinity (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ):
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Pod Lifecycle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pod Lifecycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod-" class="md-nav__link">
    <span class="md-ellipsis">
      üö¶ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Pod-–∞
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üö¶ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Pod-–∞">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#podphase" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (PodPhase):
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#containerstate" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (ContainerState)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart-policy" class="md-nav__link">
    <span class="md-ellipsis">
      üîÅ Restart Policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#termination-grace-period" class="md-nav__link">
    <span class="md-ellipsis">
      ‚è± Termination Grace Period
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prestop-finalizer" class="md-nav__link">
    <span class="md-ellipsis">
      preStop &amp;&amp; finalizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="preStop &amp;&amp; finalizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      üîç –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probes" class="md-nav__link">
    <span class="md-ellipsis">
      ü©∫ Probes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ü©∫ Probes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-livenessprobe" class="md-nav__link">
    <span class="md-ellipsis">
      üîç 1. livenessProbe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-readinessprobe" class="md-nav__link">
    <span class="md-ellipsis">
      üïí 2. readinessProbe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-startupprobe" class="md-nav__link">
    <span class="md-ellipsis">
      üê¢ 3. startupProbe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initcontainers" class="md-nav__link">
    <span class="md-ellipsis">
      InitContainers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-mesh" class="md-nav__link">
    <span class="md-ellipsis">
      Service Mesh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service Mesh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-mesh_1" class="md-nav__link">
    <span class="md-ellipsis">
      üõ† –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö Service Mesh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üõ† –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö Service Mesh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#istio-" class="md-nav__link">
    <span class="md-ellipsis">
      Istio (–¥–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç, –º–æ—â–Ω—ã–π, –Ω–æ —Ç—è–∂–µ–ª–æ–≤–∞—Ç)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mtls" class="md-nav__link">
    <span class="md-ellipsis">
      üîê MTLS ‚Äî –≤—Å—ë —à–∏—Ñ—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#observability" class="md-nav__link">
    <span class="md-ellipsis">
      üìä Observability –∏–∑ –∫–æ—Ä–æ–±–∫–∏
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    <span class="md-ellipsis">
      üîß Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîß Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clusterip" class="md-nav__link">
    <span class="md-ellipsis">
      üß± ClusterIP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodeport" class="md-nav__link">
    <span class="md-ellipsis">
      üåê NodePort
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadbalancer" class="md-nav__link">
    <span class="md-ellipsis">
      üåé LoadBalancer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#externalname" class="md-nav__link">
    <span class="md-ellipsis">
      üîó ExternalName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headless-service" class="md-nav__link">
    <span class="md-ellipsis">
      üß™ Headless Service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-virtualservice" class="md-nav__link">
    <span class="md-ellipsis">
      üïπ Istio VirtualService
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress" class="md-nav__link">
    <span class="md-ellipsis">
      Ingress
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ingress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress-controller" class="md-nav__link">
    <span class="md-ellipsis">
      üéÆ Ingress Controller ‚Äî —á—Ç–æ —ç—Ç–æ?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress_1" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Ingress:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-controller_1" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Ingress Controller:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ö—Ä–∞—Ç–∫–æ:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replicaset" class="md-nav__link">
    <span class="md-ellipsis">
      ReplicaSet (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-stateless" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment (—Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è stateless –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daemonset" class="md-nav__link">
    <span class="md-ellipsis">
      DaemonSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset" class="md-nav__link">
    <span class="md-ellipsis">
      StatefulSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job" class="md-nav__link">
    <span class="md-ellipsis">
      Job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cronjob" class="md-nav__link">
    <span class="md-ellipsis">
      CronJob
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod-controllers-comparation" class="md-nav__link">
    <span class="md-ellipsis">
      Pod controllers comparation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvc" class="md-nav__link">
    <span class="md-ellipsis">
      PVC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitops-vs-helm" class="md-nav__link">
    <span class="md-ellipsis">
      GitOps vs Helm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbac" class="md-nav__link">
    <span class="md-ellipsis">
      RBAC
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RBAC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      üß± –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß± –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-role-rolebinding" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π Role –∏ RoleBinding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-clusterrole-clusterrolebinding" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –ü—Ä–∏–º–µ—Ä 2: ClusterRole + ClusterRoleBinding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ß—Ç–æ –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤ rules?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbac-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ö†Ô∏è RBAC –∏ —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç—ã
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ –ß–∞—Å—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üéØ –ß–∞—Å—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-view-edit-admin" class="md-nav__link">
    <span class="md-ellipsis">
      üîê 1. –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏: view, edit, admin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-least-privilege" class="md-nav__link">
    <span class="md-ellipsis">
      üßÉ 2. Least Privilege (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-serviceaccount-rolebinding-pod" class="md-nav__link">
    <span class="md-ellipsis">
      üß¨ 3. ServiceAccount + RoleBinding: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ Pod‚Äô–∞–º
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-aggregated-clusterroles" class="md-nav__link">
    <span class="md-ellipsis">
      üß© 4. Aggregated ClusterRoles ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-dynamic-access-gitops" class="md-nav__link">
    <span class="md-ellipsis">
      üß™ 5. Dynamic access (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ GitOps)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-namespace-rbac" class="md-nav__link">
    <span class="md-ellipsis">
      üìÅ 6. –ú—É–ª—å—Ç–∏-Namespace RBAC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terraform" class="md-nav__link">
    <span class="md-ellipsis">
      Terraform
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Terraform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ansible-terraform" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Ç–ª–∏—á–∏–µ ansible –∏ terraform
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–û—Ç–ª–∏—á–∏–µ ansible –∏ terraform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#terraform-state" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ Terraform state?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terraform_1" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ terraform
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terraform_2" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ—Å—É—Ä—Å –≤ terraform
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ansible">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ansible_1" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã Ansible
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã Ansible">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inventory" class="md-nav__link">
    <span class="md-ellipsis">
      –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (Inventory)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task" class="md-nav__link">
    <span class="md-ellipsis">
      –ó–∞–¥–∞–Ω–∏–µ (Task)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#play-playbook" class="md-nav__link">
    <span class="md-ellipsis">
      –°—Ü–µ–Ω–∞—Ä–∏–π (Play –∏–ª–∏ –ü–ª–µ–π–±—É–∫ (Playbook)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role" class="md-nav__link">
    <span class="md-ellipsis">
      –†–æ–ª—å (Role)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#facts" class="md-nav__link">
    <span class="md-ellipsis">
      –§–∞–∫—Ç—ã (Facts)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ansible_2" class="md-nav__link">
    <span class="md-ellipsis">
      –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Ansible
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Ansible">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      üìä –ü–æ—Ä—è–¥–æ–∫ –æ—Ç –Ω–∏–∑—à–µ–≥–æ –∫ –≤—ã—Å—à–µ–º—É:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      üß© –ü—Ä–∏–º–µ—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—è–º
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß© –ü—Ä–∏–º–µ—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—è–º">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-defaults" class="md-nav__link">
    <span class="md-ellipsis">
      1. defaults –≤ —Ä–æ–ª—è—Ö (—Å–∞–º—ã–π –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-group_vars-host_vars" class="md-nav__link">
    <span class="md-ellipsis">
      3. group_vars/ –∏ host_vars/
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-ansible_facts-set_fact" class="md-nav__link">
    <span class="md-ellipsis">
      4. ansible_facts (–≤ —Ç–æ–º —á–∏—Å–ª–µ set_fact)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-vars-playbook" class="md-nav__link">
    <span class="md-ellipsis">
      5. vars –≤ playbook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-vars-task" class="md-nav__link">
    <span class="md-ellipsis">
      6. vars –≤ task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-register" class="md-nav__link">
    <span class="md-ellipsis">
      7. register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-extra-vars" class="md-nav__link">
    <span class="md-ellipsis">
      8. --extra-vars (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlers" class="md-nav__link">
    <span class="md-ellipsis">
      –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã —Ö–µ–Ω–¥–ª–µ—Ä—ã, handlers?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iac-and" class="md-nav__link">
    <span class="md-ellipsis">
      IAC and –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ad-hoc-ansible" class="md-nav__link">
    <span class="md-ellipsis">
      –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω ad hoc –≤ ansible?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Troubleshooting%20Guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Questions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Questions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../questions/Terraform/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Terraform
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../questions/clouds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clouds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../questions/gitlab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gitlab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../questions/kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../questions/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../questions/network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Programming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/Common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    üß† –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Topics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ACID%20and%20BASE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACID and BASE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Ansible%20vs%20Terraform/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ansible vs Terraform
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/CAP%20and%20PACELC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CAP and PACELC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Configuring%20a%20Kubernetes%20Cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring a Kubernetes Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Deploying%20VictoriaMetrics%20in%20Cluster%20Mode%20%28by%20Components%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploying VictoriaMetrics in Cluster Mode (by Components)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Docker%20layots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker layots
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Git%20merge%20kinds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git merge kinds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/HTTPv3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTPv3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Hard%20Links%20vs%20Symbolic%20Links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hard Links vs Symbolic Links
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/ICMP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ICMP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Inode%20and%20Descriptors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inode and Descriptors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Kube%20cluster%20architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kube cluster architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Linux%20Namespaces%20and%20Cgroups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux Namespaces and Cgroups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/OIDC%20vs%20OAuth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OIDC vs OAuth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Redis%20vs%20RabbitMQ%20vs%20Kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redis vs RabbitMQ vs Kafka
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Sticky%20bit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sticky bit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Symmetrical%20and%20assimetrical%20decrypt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Symmetrical and assimetrical decrypt
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/Thanos%20vs%20VictoriaMetrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thanos vs VictoriaMetrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/du%20how%20it%20work%3F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Du how it work?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topics/envoy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Envoy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Utilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/CheatSheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CheatSheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/Disk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/Git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/Iptables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Iptables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/Memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/Network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/Text%20files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Text files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/crontab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Crontab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/pre-commit-hook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pre commit hook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/psql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Psql
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/rediscli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rediscli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/shell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_13" >
        
          
          <label class="md-nav__link" for="__nav_6_13" id="__nav_6_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Virtualization
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_13">
            <span class="md-nav__icon md-icon"></span>
            Virtualization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/Virtualization/Docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/Virtualization/VirtualBox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VirtualBox
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_14" >
        
          
          <label class="md-nav__link" for="__nav_6_14" id="__nav_6_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Consul
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_14">
            <span class="md-nav__icon md-icon"></span>
            Consul
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/consul/KV/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KV
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_15" >
        
          
          <label class="md-nav__link" for="__nav_6_15" id="__nav_6_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    K8s
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_15">
            <span class="md-nav__icon md-icon"></span>
            K8s
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/k8s/helm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Helm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/k8s/kubectl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubectl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/k8s/operator-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operator sdk
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_16" >
        
          
          <label class="md-nav__link" for="__nav_6_16" id="__nav_6_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Processes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_16">
            <span class="md-nav__icon md-icon"></span>
            Processes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/processes/lsof/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lsof
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/processes/ps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/processes/sar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/processes/ss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ss
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/processes/strace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strace
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_17" >
        
          
          <label class="md-nav__link" for="__nav_6_17" id="__nav_6_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_17">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/services/System%20management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/services/Systemd%20service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Systemd service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/services/supervisord/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing Processes and Services
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      –û–±—â–µ–µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–û–±—â–µ–µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      –£ –≤–∞—Å –µ—Å—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä. –í—ã –Ω–∞–∂–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤–∫–ª—é—á–µ–Ω–∏—è. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –û–°.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-curl-wwwtinkoffru-" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Ç–∫—Ä—ã–ª–∏ linux –∫–æ–Ω—Å–æ–ª—å, –≤–≤–µ–ª–∏ curl www.tinkoff.ru - –Ω–∞–∂–∞–ª–∏ —ç–Ω—Ç–µ—Ä. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      –ó–∞—á–µ–º –º–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadaverage" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ LoadAverage?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      –ö—Ç–æ –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≥—Ä—É–ø–ø—É —É —Ñ–∞–π–ª–∞?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ö—Ç–æ –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≥—Ä—É–ø–ø—É —É —Ñ–∞–π–ª–∞?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–∏–º–µ—Ä:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ #1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ #2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ #2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inodes" class="md-nav__link">
    <span class="md-ellipsis">
      –ü–æ—è—Å–Ω–µ–Ω–∏–µ: —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –∏ inodes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      –ì–∏–ø–µ—Ä–≤–∏–∑–æ—Ä
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linux_1" class="md-nav__link">
    <span class="md-ellipsis">
      Linux
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linux">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      –í–∏–¥—ã –ø–∞–º—è—Ç–∏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–í–∏–¥—ã –ø–∞–º—è—Ç–∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespaces-and-cgroups" class="md-nav__link">
    <span class="md-ellipsis">
      Namespaces and Cgroups
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Namespaces and Cgroups">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-namespaces" class="md-nav__link">
    <span class="md-ellipsis">
      üß± –ß—Ç–æ —Ç–∞–∫–æ–µ Linux namespaces?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß± –ß—Ç–æ —Ç–∞–∫–æ–µ Linux namespaces?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespace" class="md-nav__link">
    <span class="md-ellipsis">
      üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã namespace
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-cgroups" class="md-nav__link">
    <span class="md-ellipsis">
      üîí –ß—Ç–æ —Ç–∞–∫–æ–µ Linux cgroups?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      üì¶ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üì¶ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      üê≥ –ü—Ä–∏–º–µ—Ä: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bash-0-1" class="md-nav__link">
    <span class="md-ellipsis">
      Bash –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $?, $0, $1, $@, $\$
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bash –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $?, $0, $1, $@, $\$">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      $\$
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-variables-short" class="md-nav__link">
    <span class="md-ellipsis">
      Special variables short
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zombie" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ zombie –ø—Ä–æ—Ü–µ—Å—Å –∏ —á–µ–º —ç—Ç–æ –ø–ª–æ—Ö–æ, –∫–∞–∫ –µ–≥–æ —É–±–∏—Ç—å?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      –ß–µ–º –æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git" class="md-nav__link">
    <span class="md-ellipsis">
      GIT
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GIT">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–±—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-revert-git-reset" class="md-nav__link">
    <span class="md-ellipsis">
      –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è git revert –æ—Ç git reset?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      –°–µ—Ç—å
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–°–µ—Ç—å">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osi" class="md-nav__link">
    <span class="md-ellipsis">
      OSI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l4l7-lb" class="md-nav__link">
    <span class="md-ellipsis">
      L4/L7 LB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="L4/L7 LB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#l4-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ L4-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l7-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ L7-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l3-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ L3-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (—Å–µ—Ç–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#l2-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚úÖ L2-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–∫–∞–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      üß™ –í Kubernetes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß™ –í Kubernetes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      üß≠ –ö—Ä–∞—Ç–∫–æ: –∫–∞–∫ —Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      üß™ –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Ñ–∏–∫–∞:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-mesh-istio" class="md-nav__link">
    <span class="md-ellipsis">
      ü§ì –ê –µ—Å–ª–∏ Service Mesh (–Ω–∞–ø—Ä–∏–º–µ—Ä, Istio)?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –†–µ–∑—é–º–µ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-vs-udp" class="md-nav__link">
    <span class="md-ellipsis">
      TCP vs UDP. –†–∞–∑–Ω–∏—Ü–∞
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp-handshake" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç TCP-handshake?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã? –ö–∞–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ? (https —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssl-" class="md-nav__link">
    <span class="md-ellipsis">
      –û–ø–∏—à–∏ –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã ssl-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      –°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–∏–º–µ—Ä—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      –ü–ª—é—Å—ã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      –ú–∏–Ω—É—Å—ã
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      –ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–∏–º–µ—Ä—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      –ü–ª—é—Å—ã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      –ú–∏–Ω—É—Å—ã
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      –í—ã–≤–æ–¥
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iptables-snat-dnat" class="md-nav__link">
    <span class="md-ellipsis">
      IPTables: SNAT, DNAT, –ú–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPTables: SNAT, DNAT, –ú–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-filter-table" class="md-nav__link">
    <span class="md-ellipsis">
      1. Filter Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-nat-table" class="md-nav__link">
    <span class="md-ellipsis">
      2. NAT Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-mangle-table" class="md-nav__link">
    <span class="md-ellipsis">
      3. Mangle Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-raw-table" class="md-nav__link">
    <span class="md-ellipsis">
      4. Raw Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iptables" class="md-nav__link">
    <span class="md-ellipsis">
      –¶–µ–ø–æ—á–∫–∏ IPTables:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1012153522" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–ø–∏—Å—å 10.12.15.35/22?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    <span class="md-ellipsis">
      DNS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∏ –Ω–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      –°–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–°–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ –∏ —Å–æ–∫–µ—Ç–æ–≤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcat-nc" class="md-nav__link">
    <span class="md-ellipsis">
      NetCat (nc)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmap" class="md-nav__link">
    <span class="md-ellipsis">
      Nmap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcpdump" class="md-nav__link">
    <span class="md-ellipsis">
      Tcpdump
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker_1" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-docker" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –≤–Ω—É—Ç—Ä–∏ Docker –ø–æ–Ω—è—Ç—å —á—Ç–æ —Ç—ã –≤ Docker?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ö–∞–∫ –≤–Ω—É—Ç—Ä–∏ Docker –ø–æ–Ω—è—Ç—å —á—Ç–æ —Ç—ã –≤ Docker?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-dockerenv" class="md-nav__link">
    <span class="md-ellipsis">
      1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ /.dockerenv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-cgroup" class="md-nav__link">
    <span class="md-ellipsis">
      2. –ß—Ç–µ–Ω–∏–µ cgroup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-hostname" class="md-nav__link">
    <span class="md-ellipsis">
      3. –ü—Ä–æ–≤–µ—Ä–∫–∞ hostname
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-cgroups" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ö†Ô∏è 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π cgroups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ö–∞–∫–æ–π —Å–ø–æ—Å–æ–± –ª—É—á—à–µ?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmd-entrypoint" class="md-nav__link">
    <span class="md-ellipsis">
      –í —á–µ–º –æ—Ç–ª–∏—á–∏–µ CMD –∏ ENTRYPOINT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_2" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ Docker? –ö–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω? –ù–∞ –∫–∞–∫–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_3" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Docker:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-vmware" class="md-nav__link">
    <span class="md-ellipsis">
      –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Docker –∏ VMware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_4" class="md-nav__link">
    <span class="md-ellipsis">
      –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Docker? –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–µ—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã Dockerfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerfile-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Dockerfile –∏ docker-compose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-image-registry" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ docker image —Å –æ–¥–Ω–æ–π –º–∞—à–∏–Ω—ã –Ω–∞ –¥—Ä—É–≥—É—é –±–µ–∑ registry?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      Best practices –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é Dockerfile –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_5" class="md-nav__link">
    <span class="md-ellipsis">
      –°–µ—Ç–µ–≤—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã Docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arg-env" class="md-nav__link">
    <span class="md-ellipsis">
      –í —á–µ–º –æ—Ç–ª–∏—á–∏–µ ARG –æ—Ç ENV?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker_6" class="md-nav__link">
    <span class="md-ellipsis">
      üß± –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–ª–æ–∏ –≤ Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß± –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–ª–æ–∏ –≤ Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bash" class="md-nav__link">
    <span class="md-ellipsis">
      Bash
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-csv-timestamp-status-url-user-agent" class="md-nav__link">
    <span class="md-ellipsis">
      –û–±—Ä–∞–±–æ—Ç–∫–∞ access –ª–æ–≥–æ–≤ (CSV): timestamp, status, url, user-agent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–û–±—Ä–∞–±–æ—Ç–∫–∞ access –ª–æ–≥–æ–≤ (CSV): timestamp, status, url, user-agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö URL:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_1" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π URL:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#400-404-url" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ 400-404 –ø–æ –∫–∞–∂–¥–æ–º—É URL:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-eu-o-pipefail" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ –¥–µ–ª–∞–µ—Ç set -eu -o pipefail?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#50" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É –Ω–∞ 50 —Å–µ—Ä–≤–µ—Ä–∞—Ö?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      –ó–∞—á–µ–º –Ω—É–∂–Ω—ã?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      –û—à–∏–±–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞–º
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP-–º–µ—Ç–æ–¥—ã, –∏–∑–º–µ–Ω—è—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-c10k" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ Nginx —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É C10K?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      –í–∞–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è location?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location_1" class="md-nav__link">
    <span class="md-ellipsis">
      –ö–∞–∫ –¥–µ–±–∞–∂–∏—Ç—å location?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-apache" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Nginx –ø–µ—Ä–µ–¥ Apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      –ú–æ–≥—É—Ç –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxy" class="md-nav__link">
    <span class="md-ellipsis">
      HAProxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#envoy" class="md-nav__link">
    <span class="md-ellipsis">
      Envoy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-cloud-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      Google Cloud Load Balancer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-load-balancers" class="md-nav__link">
    <span class="md-ellipsis">
      AWS Load Balancers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AWS Load Balancers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#classic-load-balancer-clb" class="md-nav__link">
    <span class="md-ellipsis">
      Classic Load Balancer (CLB)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-load-balancer-alb" class="md-nav__link">
    <span class="md-ellipsis">
      Application Load Balancer (ALB)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-load-balancer-nlb" class="md-nav__link">
    <span class="md-ellipsis">
      Network Load Balancer (NLB)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vs-" class="md-nav__link">
    <span class="md-ellipsis">
      –ü—Ä–æ–∫—Å–∏ vs –†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ü—Ä–æ–∫—Å–∏ vs –†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#forward-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–∫—Å–∏ (forward proxy)?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ (reverse proxy)?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubectl-apply" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ kubectl apply
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qos-pod-quality-of-service-classes" class="md-nav__link">
    <span class="md-ellipsis">
      QOS (Pod Quality of Service Classes)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QOS (Pod Quality of Service Classes)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-guaranteed" class="md-nav__link">
    <span class="md-ellipsis">
      1. Guaranteed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-burstable" class="md-nav__link">
    <span class="md-ellipsis">
      2. Burstable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-besteffort" class="md-nav__link">
    <span class="md-ellipsis">
      3. BestEffort
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetes-tolerations-affinity-labels-pod" class="md-nav__link">
    <span class="md-ellipsis">
      –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–µ–¥—É–ª–∏–Ω–≥–æ–º –≤ Kubernetes: Tolerations, Affinity, Labels –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ Pod'–æ–≤ –Ω–∞ –Ω–æ–¥—ã
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–µ–¥—É–ª–∏–Ω–≥–æ–º –≤ Kubernetes: Tolerations, Affinity, Labels –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ Pod&#39;–æ–≤ –Ω–∞ –Ω–æ–¥—ã">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-labels" class="md-nav__link">
    <span class="md-ellipsis">
      1. Labels (–ª–µ–π–±–ª—ã)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-taints-tolerations" class="md-nav__link">
    <span class="md-ellipsis">
      2. Taints –∏ Tolerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-node-affinity" class="md-nav__link">
    <span class="md-ellipsis">
      3. Node Affinity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-pod-affinity-anti-affinity" class="md-nav__link">
    <span class="md-ellipsis">
      4. Pod Affinity / Anti-Affinity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Pod Affinity / Anti-Affinity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod-affinity" class="md-nav__link">
    <span class="md-ellipsis">
      Pod Affinity (—Å–æ—Å–µ–¥—Å—Ç–≤–æ):
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod-anti-affinity" class="md-nav__link">
    <span class="md-ellipsis">
      Pod Anti-Affinity (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ):
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Pod Lifecycle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pod Lifecycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod-" class="md-nav__link">
    <span class="md-ellipsis">
      üö¶ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Pod-–∞
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üö¶ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Pod-–∞">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#podphase" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (PodPhase):
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#containerstate" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (ContainerState)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart-policy" class="md-nav__link">
    <span class="md-ellipsis">
      üîÅ Restart Policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#termination-grace-period" class="md-nav__link">
    <span class="md-ellipsis">
      ‚è± Termination Grace Period
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prestop-finalizer" class="md-nav__link">
    <span class="md-ellipsis">
      preStop &amp;&amp; finalizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="preStop &amp;&amp; finalizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      üîç –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probes" class="md-nav__link">
    <span class="md-ellipsis">
      ü©∫ Probes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ü©∫ Probes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-livenessprobe" class="md-nav__link">
    <span class="md-ellipsis">
      üîç 1. livenessProbe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-readinessprobe" class="md-nav__link">
    <span class="md-ellipsis">
      üïí 2. readinessProbe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-startupprobe" class="md-nav__link">
    <span class="md-ellipsis">
      üê¢ 3. startupProbe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initcontainers" class="md-nav__link">
    <span class="md-ellipsis">
      InitContainers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-mesh" class="md-nav__link">
    <span class="md-ellipsis">
      Service Mesh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Service Mesh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-mesh_1" class="md-nav__link">
    <span class="md-ellipsis">
      üõ† –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö Service Mesh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üõ† –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö Service Mesh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#istio-" class="md-nav__link">
    <span class="md-ellipsis">
      Istio (–¥–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç, –º–æ—â–Ω—ã–π, –Ω–æ —Ç—è–∂–µ–ª–æ–≤–∞—Ç)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mtls" class="md-nav__link">
    <span class="md-ellipsis">
      üîê MTLS ‚Äî –≤—Å—ë —à–∏—Ñ—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#observability" class="md-nav__link">
    <span class="md-ellipsis">
      üìä Observability –∏–∑ –∫–æ—Ä–æ–±–∫–∏
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    <span class="md-ellipsis">
      üîß Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîß Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clusterip" class="md-nav__link">
    <span class="md-ellipsis">
      üß± ClusterIP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodeport" class="md-nav__link">
    <span class="md-ellipsis">
      üåê NodePort
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadbalancer" class="md-nav__link">
    <span class="md-ellipsis">
      üåé LoadBalancer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#externalname" class="md-nav__link">
    <span class="md-ellipsis">
      üîó ExternalName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#headless-service" class="md-nav__link">
    <span class="md-ellipsis">
      üß™ Headless Service
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-virtualservice" class="md-nav__link">
    <span class="md-ellipsis">
      üïπ Istio VirtualService
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress" class="md-nav__link">
    <span class="md-ellipsis">
      Ingress
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ingress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ingress-controller" class="md-nav__link">
    <span class="md-ellipsis">
      üéÆ Ingress Controller ‚Äî —á—Ç–æ —ç—Ç–æ?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress_1" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Ingress:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ingress-controller_1" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Ingress Controller:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ö—Ä–∞—Ç–∫–æ:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replicaset" class="md-nav__link">
    <span class="md-ellipsis">
      ReplicaSet (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-stateless" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment (—Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è stateless –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daemonset" class="md-nav__link">
    <span class="md-ellipsis">
      DaemonSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset" class="md-nav__link">
    <span class="md-ellipsis">
      StatefulSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job" class="md-nav__link">
    <span class="md-ellipsis">
      Job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cronjob" class="md-nav__link">
    <span class="md-ellipsis">
      CronJob
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pod-controllers-comparation" class="md-nav__link">
    <span class="md-ellipsis">
      Pod controllers comparation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pvc" class="md-nav__link">
    <span class="md-ellipsis">
      PVC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitops-vs-helm" class="md-nav__link">
    <span class="md-ellipsis">
      GitOps vs Helm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbac" class="md-nav__link">
    <span class="md-ellipsis">
      RBAC
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RBAC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      üß± –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß± –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-role-rolebinding" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π Role –∏ RoleBinding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-clusterrole-clusterrolebinding" class="md-nav__link">
    <span class="md-ellipsis">
      üìå –ü—Ä–∏–º–µ—Ä 2: ClusterRole + ClusterRoleBinding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ß—Ç–æ –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤ rules?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbac-" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ö†Ô∏è RBAC –∏ —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç—ã
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      üéØ –ß–∞—Å—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üéØ –ß–∞—Å—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-view-edit-admin" class="md-nav__link">
    <span class="md-ellipsis">
      üîê 1. –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏: view, edit, admin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-least-privilege" class="md-nav__link">
    <span class="md-ellipsis">
      üßÉ 2. Least Privilege (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-serviceaccount-rolebinding-pod" class="md-nav__link">
    <span class="md-ellipsis">
      üß¨ 3. ServiceAccount + RoleBinding: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ Pod‚Äô–∞–º
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-aggregated-clusterroles" class="md-nav__link">
    <span class="md-ellipsis">
      üß© 4. Aggregated ClusterRoles ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-dynamic-access-gitops" class="md-nav__link">
    <span class="md-ellipsis">
      üß™ 5. Dynamic access (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ GitOps)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-namespace-rbac" class="md-nav__link">
    <span class="md-ellipsis">
      üìÅ 6. –ú—É–ª—å—Ç–∏-Namespace RBAC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terraform" class="md-nav__link">
    <span class="md-ellipsis">
      Terraform
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Terraform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ansible-terraform" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Ç–ª–∏—á–∏–µ ansible –∏ terraform
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–û—Ç–ª–∏—á–∏–µ ansible –∏ terraform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#terraform-state" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ Terraform state?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terraform_1" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ terraform
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terraform_2" class="md-nav__link">
    <span class="md-ellipsis">
      –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ—Å—É—Ä—Å –≤ terraform
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ansible">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ansible_1" class="md-nav__link">
    <span class="md-ellipsis">
      –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã Ansible
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã Ansible">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inventory" class="md-nav__link">
    <span class="md-ellipsis">
      –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (Inventory)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task" class="md-nav__link">
    <span class="md-ellipsis">
      –ó–∞–¥–∞–Ω–∏–µ (Task)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#play-playbook" class="md-nav__link">
    <span class="md-ellipsis">
      –°—Ü–µ–Ω–∞—Ä–∏–π (Play –∏–ª–∏ –ü–ª–µ–π–±—É–∫ (Playbook)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#role" class="md-nav__link">
    <span class="md-ellipsis">
      –†–æ–ª—å (Role)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#facts" class="md-nav__link">
    <span class="md-ellipsis">
      –§–∞–∫—Ç—ã (Facts)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ansible_2" class="md-nav__link">
    <span class="md-ellipsis">
      –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Ansible
    </span>
  </a>
  
    <nav class="md-nav" aria-label="–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Ansible">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      üìä –ü–æ—Ä—è–¥–æ–∫ –æ—Ç –Ω–∏–∑—à–µ–≥–æ –∫ –≤—ã—Å—à–µ–º—É:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      üß© –ü—Ä–∏–º–µ—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—è–º
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß© –ü—Ä–∏–º–µ—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—è–º">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-defaults" class="md-nav__link">
    <span class="md-ellipsis">
      1. defaults –≤ —Ä–æ–ª—è—Ö (—Å–∞–º—ã–π –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-group_vars-host_vars" class="md-nav__link">
    <span class="md-ellipsis">
      3. group_vars/ –∏ host_vars/
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-ansible_facts-set_fact" class="md-nav__link">
    <span class="md-ellipsis">
      4. ansible_facts (–≤ —Ç–æ–º —á–∏—Å–ª–µ set_fact)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-vars-playbook" class="md-nav__link">
    <span class="md-ellipsis">
      5. vars –≤ playbook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-vars-task" class="md-nav__link">
    <span class="md-ellipsis">
      6. vars –≤ task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-register" class="md-nav__link">
    <span class="md-ellipsis">
      7. register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-extra-vars" class="md-nav__link">
    <span class="md-ellipsis">
      8. --extra-vars (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      üß† –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlers" class="md-nav__link">
    <span class="md-ellipsis">
      –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã —Ö–µ–Ω–¥–ª–µ—Ä—ã, handlers?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iac-and" class="md-nav__link">
    <span class="md-ellipsis">
      IAC and –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ad-hoc-ansible" class="md-nav__link">
    <span class="md-ellipsis">
      –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω ad hoc –≤ ansible?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Interview</h1>

<p>Preparing to Interview</p>
<p>Resources:
1. https://github.com/Swfuse/devops-interview?tab=readme-ov-file
2. https://github.com/rmntrvn/adm_linux_ops_questions</p>
<hr />
<h2 id="_1">–û–±—â–µ–µ</h2>
<h3 id="_2">–£ –≤–∞—Å –µ—Å—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä. –í—ã –Ω–∞–∂–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤–∫–ª—é—á–µ–Ω–∏—è. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –û–°.</h3>
<p>–ü–æ–¥–∞–µ—Ç—Å—è —Å–∏–≥–Ω–∞–ª –æ –ø–æ–¥–∞—á–µ –ø–∏—Ç–∞–Ω–∏—è, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è BIOS/UEFI (–ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –∑–∞–≥—Ä—É–∑–∫–µ –û–°). –ó–∞–≥—Ä—É–∑—á–∏–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–≤–æ–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ BIOS –∏—â–µ—Ç –∑–∞–≥—Ä—É–∑—á–∏–∫ –û–°:</p>
<ul>
<li>–∏—â–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Å–µ–∫—Ç–æ—Ä (MBR)</li>
<li>—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–¥ –∏–∑ —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –µ–º—É,</li>
<li>—ç—Ç–æ—Ç –∫–æ–¥ –∏—â–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–¥–µ–ª ("system partition"), –≤ –ø–µ—Ä–≤–æ–º —Ä–∞–∑–¥–µ–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π –∫–æ–¥ GRUB,</li>
<li>GRUB –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±—Ä–∞–∑—ã —è–¥—Ä–∞ –∏ initrd,</li>
<li>–ø–µ—Ä–µ–¥–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è–¥—Ä—É,</li>
<li>—è–¥—Ä–æ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å init,</li>
<li>init –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã —É—Ä–æ–≤–Ω–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (runlevel) –∏–∑¬†<code>/etc/rc.d/rc*.d/</code>.</li>
</ul>
<p>–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º:</p>
<ul>
<li><code>S12syslog</code>¬†‚Äî –∑–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω–∞ syslog,</li>
<li><code>S80sendmail</code>¬†‚Äî –∑–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω–∞ sendmail.</li>
</ul>
<p>–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, syslog –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –ø–µ—Ä–µ–¥ sendmail.</p>
<p>–ò—Å—Ç–æ—á–Ω–∏–∫:¬†https://habr.com/ru/post/518972/</p>
<h3 id="linux-curl-wwwtinkoffru-">–û—Ç–∫—Ä—ã–ª–∏ linux –∫–æ–Ω—Å–æ–ª—å, –≤–≤–µ–ª–∏ curl¬†www.tinkoff.ru¬†- –Ω–∞–∂–∞–ª–∏ —ç–Ω—Ç–µ—Ä. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ.</h3>
<p>curl ‚Äî —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ö–æ—Å—Ç–∞–º–∏ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º: FTP, FTPS, HTTP, HTTPS, TFTP, SCP, SFTP, Telnet, DICT, LDAP, POP3, IMAP –∏ SMTP.</p>
<p>–ë–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ curl –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –º–µ—Ç–æ–¥–æ–º GET –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É HTTP (—É—Ä–æ–≤–µ–Ω—å L7). –ü–µ—Ä–µ–¥ —ç—Ç–∏–º:</p>
<ol>
<li>–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ DNS –∏–º–µ–Ω–∏ –≤ IP-–∞–¥—Ä–µ—Å –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É DNS,<ul>
<li>–ü—Ä–æ—Ç–æ–∫–æ–ª: DNS</li>
<li>–£—Ä–æ–≤–Ω–∏ OSI:<ul>
<li>–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π (7) ‚Äî DNS</li>
<li>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (4) ‚Äî UDP (–∏–ª–∏ TCP)</li>
<li>–°–µ—Ç–µ–≤–æ–π (3) ‚Äî IP</li>
</ul>
</li>
</ul>
</li>
<li>–∑–∞–ø—Ä–æ—Å —É—Ö–æ–¥–∏—Ç –Ω–∞ DNS-—Å–µ—Ä–≤–µ—Ä, –¥–∞–ª–µ–µ –ø–æ —Ü–µ–ø–æ—á–∫–µ ‚Äî –∫ –∫–æ—Ä–Ω–µ–≤—ã–º DNS –∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º,<ul>
<li>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã: DNS ‚Üí —á–µ—Ä–µ–∑ UDP –∏–ª–∏ TCP (53 –ø–æ—Ä—Ç)</li>
<li>–£—Ä–æ–≤–Ω–∏ OSI:<ul>
<li>–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π (7) ‚Äî DNS</li>
<li>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (4) ‚Äî UDP/TCP</li>
<li>–°–µ—Ç–µ–≤–æ–π (3) ‚Äî IP</li>
<li>–ö–∞–Ω–∞–ª—å–Ω—ã–π (2) ‚Äî Ethernet/Wi-Fi</li>
<li>–§–∏–∑–∏—á–µ—Å–∫–∏–π (1)</li>
</ul>
</li>
</ul>
</li>
<li>–ø–æ–ª—É—á–∏–≤ IP, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ TCP (—Ç—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ),<ul>
<li>TCP (3-way handshake: SYN, SYN-ACK, ACK)</li>
<li>–£—Ä–æ–≤–Ω–∏ OSI:<ul>
<li>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (4) ‚Äî TCP</li>
<li>–°–µ—Ç–µ–≤–æ–π (3) ‚Äî IP</li>
<li>–ö–∞–Ω–∞–ª—å–Ω—ã–π (2), –§–∏–∑–∏—á–µ—Å–∫–∏–π (1)</li>
</ul>
</li>
</ul>
</li>
<li>–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–µ–∫ TCP/IP –∏ —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏,<ul>
<li>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã: IP (routing), TCP (session)</li>
<li>–£—Ä–æ–≤–Ω–∏ OSI:<ul>
<li>–°–µ—Ç–µ–≤–æ–π (3) ‚Äî IP</li>
<li>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (4) ‚Äî TCP</li>
<li>–ö–∞–Ω–∞–ª—å–Ω—ã–π (2), –§–∏–∑–∏—á–µ—Å–∫–∏–π (1)</li>
</ul>
</li>
</ul>
</li>
<li>–¥–∞–ª–µ–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è HTTP-–∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ—Ä—Ç 80,<ul>
<li>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã: HTTP</li>
<li>–£—Ä–æ–≤–Ω–∏ OSI:<ul>
<li>–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π (7) ‚Äî HTTP</li>
<li>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (4) ‚Äî TCP</li>
<li>–°–µ—Ç–µ–≤–æ–π (3) ‚Äî IP</li>
</ul>
</li>
</ul>
</li>
<li>–ø–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.<ul>
<li>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã: HTTP (–æ—Ç–≤–µ—Ç), TCP (–¥–æ—Å—Ç–∞–≤–∫–∞)</li>
<li>–£—Ä–æ–≤–Ω–∏ OSI:<ul>
<li>–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π (7) ‚Äî HTTP</li>
<li>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (4) ‚Äî TCP</li>
<li>–°–µ—Ç–µ–≤–æ–π (3) ‚Äî IP</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="_3">–ó–∞—á–µ–º –º–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ</h3>
<p>–ú–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏ –Ω—É–∂–Ω–∞, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –±—É–¥–µ—Ç –ª–∏ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ –∫–∞–Ω–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ (L2) –Ω–∞–ø—Ä—è–º—É—é, –∏–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –Ω–∞ —Å–µ—Ç–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ (L3).</p>
<hr />
<p><strong>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong></p>
<ol>
<li>
<p><strong>–ö–æ–º–ø—å—é—Ç–µ—Ä —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å–≤–æ–π IP –∏ IP –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –º–∞—Å–∫—É –ø–æ–¥—Å–µ—Ç–∏ (–±–∏—Ç–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è AND).</strong></p>
</li>
<li>
<p><strong>–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π (–æ–¥–Ω–∞ —Å–µ—Ç—å):</strong></p>
<ul>
<li>
<p>–£–∑–µ–ª —Å—á–∏—Ç–∞–µ—Ç—Å—è ‚Äú–ª–æ–∫–∞–ª—å–Ω—ã–º‚Äù</p>
</li>
<li>
<p>–ü–µ—Ä–µ–¥–∞—á–∞ –∏–¥—ë—Ç –Ω–∞ <strong>—É—Ä–æ–≤–Ω–µ L2 (Ethernet, ARP)</strong></p>
</li>
<li>
<p>–ü–∞–∫–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è <strong>–Ω–∞–ø—Ä—è–º—É—é –∞–¥—Ä–µ—Å–∞—Ç—É</strong>, –±–µ–∑ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∏—Ä–æ–∫–æ–≤–µ—â–∞–Ω–∏–µ (broadcast) –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ —Å–µ—Ç–∏</p>
</li>
</ul>
</li>
<li>
<p><strong>–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–∑–Ω—ã–π (–¥—Ä—É–≥–∞—è —Å–µ—Ç—å):</strong></p>
<ul>
<li>
<p>–£–∑–µ–ª —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º</p>
</li>
<li>
<p>–ü–µ—Ä–µ–¥–∞—á–∞ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ <strong>–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä (gateway)</strong> –Ω–∞ <strong>—É—Ä–æ–≤–Ω–µ L3</strong></p>
</li>
<li>
<p>–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è IP-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, NAT –∏ —Ç.–¥.</p>
</li>
</ul>
</li>
</ol>
<hr />
<blockquote>
<p>–ú–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏. –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—ë, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫ –∫–∞–∫–æ–º—É —É—Ä–æ–≤–Ω—é –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–∞:</p>
</blockquote>
<ul>
<li>
<blockquote>
<p>–µ—Å–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –≤–Ω—É—Ç—Ä–∏ —Ç–æ–π –∂–µ –ø–æ–¥—Å–µ—Ç–∏ ‚Üí L2-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ ARP –∏ –ø—Ä—è–º—É—é –æ—Ç–ø—Ä–∞–≤–∫—É;</p>
</blockquote>
</li>
<li>
<blockquote>
<p>–µ—Å–ª–∏ –≤ –¥—Ä—É–≥–æ–π –ø–æ–¥—Å–µ—Ç–∏ ‚Üí –ø–∞–∫–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä (gateway), –∏ –¥–∞–ª–µ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ L3 –∏ –≤—ã—à–µ.</p>
</blockquote>
</li>
</ul>
<hr />
<blockquote>
<p>–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å ARP-–∑–∞–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞.</p>
</blockquote>
<h3 id="loadaverage">–ß—Ç–æ —Ç–∞–∫–æ–µ LoadAverage?</h3>
<p>LoadAverage ‚Äî —Å—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU –∑–∞ 1, 5 –∏ 15 –º–∏–Ω—É—Ç.</p>
<ul>
<li><strong>–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç?</strong>¬†–ü—Ä–æ—Ü–µ–Ω—Ç —É—Ç–∏–ª–∏–∑–∏—Ä—É–µ–º–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Å—Ç–æ—è.</li>
<li><strong>–í —á–µ–º –∏–∑–º–µ—Ä—è–µ—Ç—Å—è?</strong>¬†–ò–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ —Ç–∏–∫–∞—Ö (–µ–¥–∏–Ω–∏—Ü—ã –≤—Ä–µ–º–µ–Ω–∏ CPU), —Å–∫–æ–ª—å–∫–æ —Ç–∏–∫–æ–≤ –æ—Ç–¥–∞–Ω–æ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –ï—Å–ª–∏ &gt; 100%, –∑–Ω–∞—á–∏—Ç –µ—Å—Ç—å –æ—á–µ—Ä–µ–¥—å –∏–∑ –æ–∂–∏–¥–∞—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.</li>
<li><strong>–ö–∞–∫–æ–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ?</strong>¬†–î–æ 1 –Ω–∞ 1 CPU (1.0 –Ω–∞ –æ–¥–Ω–æ —è–¥—Ä–æ).</li>
<li><strong>–ï—Å–ª–∏ LA = 1000 ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ?</strong>¬†–ù–µ—Ç, —ç—Ç–æ –ø–ª–æ—Ö–æ, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–µ 1000 —è–¥–µ—Ä –≤ —Å–∏—Å—Ç–µ–º–µ.</li>
<li><strong>–ß—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ LA?</strong>¬†–ù–∞–ø—Ä–∏–º–µ—Ä, iowait.</li>
</ul>
<p>–í—ã—Å–æ–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è wa (wait I/O) –∏ LA —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –æ D-state (–æ–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞), –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å –¥–∏—Å–∫–∞–º–∏, —Å–µ—Ç—å—é, USB, —Å–æ–∫–µ—Ç–∞–º–∏ –∏ –¥—Ä.</p>
<h3 id="linux">–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ Linux</h3>
<ul>
<li><strong>D</strong>¬†‚Äî –æ–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞</li>
<li><strong>R</strong>¬†‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è</li>
<li><strong>S</strong>¬†‚Äî —Å–ø—è—â–∏–π, –∂–¥–µ—Ç —Å–æ–±—ã—Ç–∏—è</li>
<li><strong>T</strong>¬†‚Äî –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</li>
<li><strong>Z</strong>¬†‚Äî –∑–æ–º–±–∏</li>
</ul>
<p>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã:¬†<code>ps aux</code></p>
<p>–ï—Å–ª–∏ wa (wait I/O) &gt; 10-30%, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É.</p>
<p>–ò—Å—Ç–æ—á–Ω–∏–∫:¬†https://firstvds.ru/technology/nagruzka-na-server-opredelenie-prichin</p>
<h3 id="_4">–ö—Ç–æ –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≥—Ä—É–ø–ø—É —É —Ñ–∞–π–ª–∞?</h3>
<p>–ö–æ–º–∞–Ω–¥–∞:¬†<code>chown</code></p>
<ul>
<li><strong>–¢—Ä–µ–±—É–µ—Ç—Å—è:</strong>¬†–ª–∏–±–æ –±—ã—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —Ñ–∞–π–ª–∞, –ª–∏–±–æ –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ root.</li>
</ul>
<h4 id="_5">–ü—Ä–∏–º–µ—Ä:</h4>
<pre><code>-rw------- 1 user1 user1 147746 –º–∞—Ä 27 12:19 somefile
</code></pre>
<ul>
<li>
<p><code>chown user1:user2 somefile</code></p>
</li>
<li>
<p><code>chown user1:www-data somefile</code></p>
</li>
<li>
<p><strong>–ï—Å–ª–∏ –Ω–µ root:</strong>¬†—Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ user1 —Å–æ—Å—Ç–æ–∏—Ç –≤ —ç—Ç–∏—Ö –≥—Ä—É–ø–ø–∞—Ö.</p>
</li>
<li>
<p><strong>–ï—Å–ª–∏ root:</strong>¬†—Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ –≥—Ä—É–ø–ø—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.</p>
</li>
</ul>
<h3 id="1">–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ #1</h3>
<p><strong>df</strong> <strong>(disk free)</strong>
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç <strong>–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ —Ü–µ–ª–æ–º</strong>, –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–ª–æ—á–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
- –°–º–æ—Ç—Ä–∏—Ç –Ω–∞ <strong>—Ç–∞–±–ª–∏—Ü—É inodes –∏ –±–ª–æ–∫–æ–≤</strong>, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∑–∞–Ω—è—Ç–æ.
- –£—á–∏—Ç—ã–≤–∞–µ—Ç <strong>–≤—Å–µ –¥–∞–Ω–Ω—ã–µ</strong>, –≤–∫–ª—é—á–∞—è:
    - —É–¥–∞–ª—ë–Ω–Ω—ã–µ, –Ω–æ –≤—Å—ë –µ—â—ë –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã;
    - –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–∫–µ—Ç–∞—Ö, pipes, tmpfs –∏ —Ç.–ø.
üî∏ <strong>–¢–∏–ø–∏—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã ‚Äî —è–¥—Ä–æ, —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã statfs().</strong></p>
<p><strong>du</strong>¬†<strong>(disk usage)</strong>
- –°—á–∏—Ç–∞–µ—Ç <strong>—Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏</strong>, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ <strong>—Ç–µ–∫—É—â–µ–º namespace</strong>.
- –û–±—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∏ —Å—É–º–º–∏—Ä—É–µ—Ç <strong>—Ä–∞–∑–º–µ—Ä—ã —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö (–≤–∏–¥–∏–º—ã—Ö) —Ñ–∞–π–ª–æ–≤</strong>.
- –ù–µ —Å—á–∏—Ç–∞–µ—Ç:
    - —É–¥–∞–ª—ë–Ω–Ω—ã–µ, –Ω–æ –µ—â—ë –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã;
    - tmpfs, —Å–æ–∫–µ—Ç—ã, pipes –∏ –¥—Ä—É–≥–∏–µ –Ω–µ–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã.
üî∏ <strong>–¢–∏–ø–∏—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.</strong></p>
<p><strong>lsof</strong> <strong>(List Open Files)</strong> ‚Äî —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –≤ Linux/Unix, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç <strong>–≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –∏ —Å–æ–∫–µ—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–µ</strong>. –í Linux <strong>–≤—Å—ë ‚Äî —ç—Ç–æ —Ñ–∞–π–ª</strong>, –≤–∫–ª—é—á–∞—è:</p>
<ul>
<li>–æ–±—ã—á–Ω—ã–µ —Ñ–∞–π–ª—ã (/var/log/...)</li>
<li>–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏</li>
<li>—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (/dev/sda)</li>
<li>—Å–æ–∫–µ—Ç—ã (/tmp/.X11-unix)</li>
<li>–∫–∞–Ω–∞–ª—ã (pipes)</li>
<li>—Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (TCP, UDP)</li>
</ul>
<hr />
<p><code>df -Th</code>¬†–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º–µ—Å—Ç–æ –µ—Å—Ç—å. –ù–æ¬†<code>touch file</code>¬†‚Äî –æ—à–∏–±–∫–∞ "No space left on device".</p>
<p>–ü—Ä–∏—á–∏–Ω—ã:</p>
<ul>
<li>
<p>–§–∞–π–ª—ã –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã, –Ω–æ –∑–∞–Ω—è—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.</p>
</li>
<li>
<p>–ü—Ä–æ–≤–µ—Ä–∫–∞:¬†<code>sudo lsof / | grep deleted</code></p>
</li>
<li>
<p>–ò—Å—á–µ—Ä–ø–∞–Ω—ã¬†<strong>inodes</strong>¬†‚Äî¬†<code>df -i</code></p>
</li>
<li>
<p>–ü–ª–æ—Ö–∏–µ –±–ª–æ–∫–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬†<code>fsck -vcck /dev/sdX</code></p>
</li>
<li>
<p>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, FAT ‚Äî –º–∞–∫—Å. —Ñ–∞–π–ª 4GB)</p>
</li>
</ul>
<p>–ò—Å—Ç–æ—á–Ω–∏–∫:¬†https://rtfm.co.ua/unix-df-i-du-raznye-znacheniya/¬†https://zalinux.ru/?p=3001</p>
<h3 id="2">–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ #2</h3>
<p>–ö–æ—Ä–µ–Ω—å 100–ì–ë,¬†<code>df</code>¬†–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–Ω—è—Ç–æ –≤—Å—ë, –∞¬†<code>du -sh /*</code>¬†‚Äî —Ç–æ–ª—å–∫–æ 10–ì–ë.</p>
<p>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</p>
<ul>
<li>–§–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã, –Ω–æ –∑–∞–Ω—è—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.</li>
<li>–ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã:¬†<code>lsof | grep deleted</code></li>
</ul>
<h4 id="inodes">–ü–æ—è—Å–Ω–µ–Ω–∏–µ: —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –∏ inodes</h4>
<ul>
<li>
<p><strong>inode</strong>¬†‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ñ–∞–π–ª–∞, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.</p>
</li>
<li>
<p><strong>fd (file descriptor)</strong>¬†‚Äî "–±–∏–ª–µ—Ç" –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.</p>
</li>
<li>
<p>–û–¥–∏–Ω —Ñ–∞–π–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç –º–Ω–æ–≥–∏–º–∏ fd.</p>
</li>
<li>
<p>–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è fd –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª—É —Ç–µ—Ä—è–µ—Ç—Å—è (–µ—Å–ª–∏ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö).</p>
</li>
</ul>
<h3 id="_6">–ì–∏–ø–µ—Ä–≤–∏–∑–æ—Ä</h3>
<p>–ì–∏–ø–µ—Ä–≤–∏–∑–æ—Ä ‚Äî —ç—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ–±–æ–ª–æ—á–∫–∞ (–ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏–ª–∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —Å—Ö–µ–º–∞), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –û–° –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç-–∫–æ–º–ø—å—é—Ç–µ—Ä–µ.</p>
<p>–§—É–Ω–∫—Ü–∏–∏:
- –∏–∑–æ–ª—è—Ü–∏—è –û–°,
- –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞,
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤,
- –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è,
- –≤–∫–ª—é—á–µ–Ω–∏–µ/–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –í–ú,
- –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –û–° (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Å–µ—Ç–∏).</p>
<p>–ì–∏–ø–µ—Ä–≤–∏–∑–æ—Ä –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –º–∏–∫—Ä–æ—è–¥—Ä–æ–º ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –û–°, —É–ø—Ä–∞–≤–ª—è—é—â–µ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏.</p>
<h3 id="_7">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏?</h3>
<p><strong>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:</strong> –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–±—â–µ–≥–æ —è–¥—Ä–∞ –û–° (—á–µ—Ä–µ–∑ <code>namespaces</code>, <code>cgroups</code>). –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è –û–°.</p>
<p><strong>–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è:</strong> –∑–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –û–° –ø–æ–≤–µ—Ä—Ö –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä–∞. –ö–∞–∂–¥–∞—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —è–¥—Ä–æ –∏ —Ä–µ—Å—É—Ä—Å—ã.</p>
<p><strong>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ª–µ–≥—á–µ, –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤.</strong></p>
<hr />
<h2 id="linux_1">Linux</h2>
<h3 id="_8">–í–∏–¥—ã –ø–∞–º—è—Ç–∏</h3>
<h4 id="_9">–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã</h4>
<table>
<thead>
<tr>
<th><strong>–í–∏–¥ –ø–∞–º—è—Ç–∏</strong></th>
<th><strong>–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ</strong></th>
<th><strong>–ì–¥–µ —Å–º–æ—Ç—Ä–∏–º</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>VSS (VSZ)</strong> ‚Äì Virtual Set Size</td>
<td>–í—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ (–≤–∫–ª. –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, mmap, –∫—ç—à, –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—É—é).</td>
<td>ps, top, smem</td>
</tr>
<tr>
<td><strong>RSS</strong> ‚Äì Resident Set Size</td>
<td>–†–µ–∞–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–∞—è –≤ RAM –ø–∞–º—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ (–±–µ–∑ —Å–≤–æ–ø–∞).</td>
<td>ps, top, smem, /proc/[pid]/statm</td>
</tr>
<tr>
<td><strong>PSS</strong> ‚Äì Proportional Set Size</td>
<td>RSS, –Ω–æ shared-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–µ–ª—è—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.</td>
<td>smem, /proc/[pid]/smaps</td>
</tr>
<tr>
<td><strong>USS</strong> ‚Äì Unique Set Size</td>
<td>–¢–æ–ª—å–∫–æ —Ç–∞ –ø–∞–º—è—Ç—å, –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç <strong>—Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–π</strong> –ø—Ä–æ—Ü–µ—Å—Å.</td>
<td>smem, /proc/[pid]/smaps</td>
</tr>
<tr>
<td><strong>Shared memory</strong></td>
<td>–û–±—â–∞—è –ø–∞–º—è—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏).</td>
<td>smem, pmap, /proc/[pid]/maps</td>
</tr>
<tr>
<td><strong>Swap</strong></td>
<td>–°—Ç—Ä–∞–Ω–∏—Ü—ã, –≤—ã–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫ (–≤ swap).</td>
<td>free, vmstat, top, smem</td>
</tr>
<tr>
<td><strong>Page Cache</strong></td>
<td>–ö—ç—à —Ñ–∞–π–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å –¥–∏—Å–∫–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —è–¥—Ä–æ–º.</td>
<td>free, vmstat, /proc/meminfo</td>
</tr>
<tr>
<td><strong>Buffers</strong></td>
<td>–ö—ç—à –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –±–ª–æ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.</td>
<td>free, vmstat, /proc/meminfo</td>
</tr>
<tr>
<td><strong>Slab</strong></td>
<td>–ö—ç—à —Å—Ç—Ä—É–∫—Ç—É—Ä —è–¥—Ä–∞ (inode, dentry, —Ñ–∞–π–ª–æ–≤—ã–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –∏ –ø—Ä.).</td>
<td>/proc/meminfo, slabtop</td>
</tr>
<tr>
<td><strong>PageTables</strong></td>
<td>–ü–∞–º—è—Ç—å, –∑–∞–Ω–∏–º–∞–µ–º–∞—è —Ç–∞–±–ª–∏—Ü–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.</td>
<td>/proc/meminfo, smem, top</td>
</tr>
<tr>
<td><strong>KernelStack</strong></td>
<td>–°—Ç–µ–∫ —è–¥—Ä–∞, –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞.</td>
<td>/proc/meminfo, smem</td>
</tr>
<tr>
<td>#### –û–±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>–û–±–ª–∞—Å—Ç—å</strong></th>
<th><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Text (code)</strong></td>
<td>–ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π –∫–æ–¥</td>
</tr>
<tr>
<td><strong>Data</strong></td>
<td>–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</td>
</tr>
<tr>
<td><strong>Heap</strong></td>
<td>–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å (malloc, new)</td>
</tr>
<tr>
<td><strong>Stack</strong></td>
<td>–õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π</td>
</tr>
<tr>
<td><strong>mmap</strong></td>
<td>–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤, shared libraries, –∞–Ω–æ–Ω–∏–º–Ω–∞—è –ø–∞–º—è—Ç—å</td>
</tr>
<tr>
<td>–ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å –ø–æ–º–æ—â—å—é:</td>
<td></td>
</tr>
</tbody>
</table>
<pre><code>cat /proc/&lt;pid&gt;/maps
</code></pre>
<p><strong>üìä –ü—Ä–∏–º–µ—Ä smem</strong></p>
<pre><code>sudo smem -r
</code></pre>
<table>
<thead>
<tr>
<th><strong>PID</strong></th>
<th><strong>User</strong></th>
<th><strong>USS</strong></th>
<th><strong>PSS</strong></th>
<th><strong>RSS</strong></th>
<th><strong>Command</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>123</td>
<td>root</td>
<td>10M</td>
<td>12M</td>
<td>14M</td>
<td>nginx</td>
</tr>
</tbody>
</table>
<h4 id="_10">üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:</h4>
<p>‚Ä¢ <strong>–í—ã—Å–æ–∫–∏–π VSS</strong> ‚Äî –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–±–ª–µ–º–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ mmap‚Äô–æ–≤, –Ω–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).
‚Ä¢ <strong>–í—ã—Å–æ–∫–∏–π RSS</strong> ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM.
‚Ä¢ <strong>PSS</strong> ‚Äî —Ö–æ—Ä–æ—à –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, —Å–∫–æ–ª—å–∫–æ ‚Äú–≤ —Å—Ä–µ–¥–Ω–µ–º‚Äù –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–∞–ª—å–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç.
‚Ä¢ <strong>USS</strong> ‚Äî –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ç–æ–≥–æ, —á—Ç–æ –º–æ–∂–Ω–æ –≤—ã–≥—Ä—É–∑–∏—Ç—å –±–µ–∑ —É—â–µ—Ä–±–∞ –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º.
‚Ä¢ <strong>Swap &gt; 0</strong> ‚Äî –º–æ–∂–µ—Ç —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ –Ω–µ—Ö–≤–∞—Ç–∫–µ RAM.</p>
<h3 id="namespaces-and-cgroups">Namespaces and Cgroups</h3>
<p><strong>namespaces –∏ cgroups</strong> ‚Äî —ç—Ç–æ –¥–≤–∞ —Å—Ç–æ–ª–ø–∞ –∏–∑–æ–ª—è—Ü–∏–∏ –≤ Linux. –û–Ω–∏ –ª–µ–∂–∞—Ç –≤ –æ—Å–Ω–æ–≤–µ <strong>–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Docker, Kubernetes)</strong> –∏ –≤–æ–æ–±—â–µ –ª—é–±–æ–π –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–°.</p>
<p>–î–∞–≤–∞–π —Ä–∞–∑–ª–æ–∂–∏–º –Ω–∞ –ø–æ–Ω—è—Ç–Ω–æ–º —É—Ä–æ–≤–Ω–µ:</p>
<hr />
<h4 id="linux-namespaces">üß± –ß—Ç–æ —Ç–∞–∫–æ–µ Linux namespaces?</h4>
<p><strong>Namespaces</strong> –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å <strong>—Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã</strong> –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.</p>
<p>–¢–æ –µ—Å—Ç—å –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å ‚Äú–≤–∏–¥–∏—Ç‚Äù —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –µ–≥–æ namespace‚Äô—É.</p>
<h5 id="namespace">üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã namespace</h5>
<table>
<thead>
<tr>
<th><strong>Namespace</strong></th>
<th><strong>–ò–∑–æ–ª–∏—Ä—É–µ—Ç</strong></th>
<th><strong>–ü—Ä–∏–º–µ—Ä</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>mnt</td>
<td>—Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É</td>
<td>–æ—Ç–¥–µ–ª—å–Ω—ã–π /, /proc</td>
</tr>
<tr>
<td>pid</td>
<td>–ø—Ä–æ—Ü–µ—Å—Å—ã –∏ PID‚Äô—ã</td>
<td>ps –ø–æ–∫–∞–∂–µ—Ç ‚Äú—Å–≤–æ–∏‚Äù PID</td>
</tr>
<tr>
<td>net</td>
<td>—Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, IP</td>
<td>–æ—Ç–¥–µ–ª—å–Ω—ã–π eth0</td>
</tr>
<tr>
<td>uts</td>
<td>–∏–º—è —Ö–æ—Å—Ç–∞ (hostname)</td>
<td>hostname –±—É–¥–µ—Ç —Ä–∞–∑–Ω—ã–º</td>
</tr>
<tr>
<td>ipc</td>
<td>–æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, semaphors</td>
<td>ipcs</td>
</tr>
<tr>
<td>user</td>
<td>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ UID/GID</td>
<td>root –≤–Ω—É—Ç—Ä–∏, –Ω–æ –Ω–µ —Å–Ω–∞—Ä—É–∂–∏</td>
</tr>
<tr>
<td>cgroup</td>
<td>–∏–µ—Ä–∞—Ä—Ö–∏—é cgroups</td>
<td>–æ—Ç–¥–µ–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤</td>
</tr>
</tbody>
</table>
<p>üìå –ö–∞–∂–¥—ã–π namespace –∏–∑–æ–ª–∏—Ä—É–µ—Ç —Å–≤–æ—é –ø–æ–¥—Å–∏—Å—Ç–µ–º—É.</p>
<p><strong>üîß –ü—Ä–∏–º–µ—Ä –∏–∑–æ–ª—è—Ü–∏–∏ —Å unshare:</strong></p>
<pre><code>sudo unshare --pid --fork --mount-proc bash
</code></pre>
<p>–¢–µ–ø–µ—Ä—å —Ç—ã –≤ –Ω–æ–≤–æ–º PID namespace ‚Üí ps –ø–æ–∫–∞–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å.</p>
<hr />
<h4 id="linux-cgroups">üîí –ß—Ç–æ —Ç–∞–∫–æ–µ Linux cgroups?</h4>
<p><strong>Cgroups (Control Groups)</strong> ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± <strong>–æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã</strong>, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å.</p>
<p><strong>üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ cgroups:</strong></p>
<p>‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ <strong>CPU, RAM, disk IO, pids</strong>
‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—á–µ—Ä–µ–∑ weight)
‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
‚Ä¢ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –∏–µ—Ä–∞—Ä—Ö–∏—é</p>
<p><strong>–ü—Ä–∏–º–µ—Ä—ã —Ä–µ—Å—É—Ä—Å–æ–≤:</strong></p>
<table>
<thead>
<tr>
<th><strong>–¢–∏–ø</strong></th>
<th><strong>–ß—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cpu</td>
<td>–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU</td>
</tr>
<tr>
<td>memory</td>
<td>–æ–±—ä—ë–º RAM</td>
</tr>
<tr>
<td>pids</td>
<td>—á–∏—Å–ª–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</td>
</tr>
<tr>
<td>blkio</td>
<td>–¥–æ—Å—Ç—É–ø –∫ –¥–∏—Å–∫—É</td>
</tr>
<tr>
<td>devices</td>
<td>–¥–æ—Å—Ç—É–ø –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º</td>
</tr>
<tr>
<td><strong>–ü—Ä–∏–º–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞–º—è—Ç–∏:</strong></td>
<td></td>
</tr>
</tbody>
</table>
<pre><code>mkdir /sys/fs/cgroup/memory/mygroup
echo 100000000 &gt; /sys/fs/cgroup/memory/mygroup/memory.limit_in_bytes
echo $$ &gt; /sys/fs/cgroup/memory/mygroup/tasks
</code></pre>
<p>üìå –¢–µ–ø–µ—Ä—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ 100–ú–± RAM.</p>
<hr />
<h4 id="_11">üì¶ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ</h4>
<p>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, docker run) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:</p>
<p>‚Ä¢ <strong>Namespaces</strong> ‚Üí —á—Ç–æ–±—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ñ–∞–π–ª–æ–≤, —Å–µ—Ç–∏)
‚Ä¢ <strong>Cgroups</strong> ‚Üí —á—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å, —Å–∫–æ–ª—å–∫–æ –æ–Ω –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤</p>
<hr />
<h5 id="docker">üê≥ –ü—Ä–∏–º–µ—Ä: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º</h5>
<ol>
<li>–°–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π PID, NET, UTS, MNT, USER namespace ‚Üí —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äú—Å–≤–æ—è‚Äù –û–°</li>
<li>–°–æ–∑–¥–∞—é—Ç—Å—è cgroups –¥–ª—è CPU, memory –∏ pids</li>
<li>–ú–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è overlayfs ‚Üí —Å–≤–æ—è –∫–æ—Ä–Ω–µ–≤–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞</li>
<li>–í–Ω—É—Ç—Ä–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–≤–æ–π ENTRYPOINT –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ</li>
</ol>
<hr />
<h5 id="_12">‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ:</h5>
<table>
<thead>
<tr>
<th></th>
<th><strong>Namespaces</strong></th>
<th><strong>Cgroups</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>–ß—Ç–æ –¥–µ–ª–∞—é—Ç?</td>
<td>–ò–∑–æ–ª–∏—Ä—É—é—Ç</td>
<td>–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç</td>
</tr>
<tr>
<td>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</td>
<td>–í–∏–¥–∏–º–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤</td>
<td>–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤</td>
</tr>
<tr>
<td>–ü—Ä–∏–º–µ—Ä</td>
<td>—Å–≤–æ–π hostname</td>
<td>–º–∞–∫—Å–∏–º—É–º 512Mi –ø–∞–º—è—Ç–∏</td>
</tr>
</tbody>
</table>
<h3 id="bash-0-1">Bash –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $?, $0, $1, $@, $\$</h3>
<h4 id="_13">$\$</h4>
<pre><code>echo $$
</code></pre>
<p>–≠—Ç–æ –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç <strong>PID (Process ID)</strong> —Ç–µ–∫—É—â–µ–≥–æ shell-–ø—Ä–æ—Ü–µ—Å—Å–∞.</p>
<hr />
<p><strong>üîç –ü–æ–¥—Ä–æ–±–Ω–æ:</strong></p>
<p>‚Ä¢ $ ‚Äî —ç—Ç–æ –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è <strong>–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è</strong> –≤ bash.</p>
<p>‚Ä¢ $\$ ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ bash, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç <strong>PID —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞</strong>, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞.</p>
<hr />
<p><strong>üì¶ –ü—Ä–∏–º–µ—Ä:</strong></p>
<pre><code>$ echo $$
12345
</code></pre>
<p>–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–±–æ–ª–æ—á–∫–∞ (shell), –≤ –∫–æ—Ç–æ—Ä–æ–π —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å ‚Äî –∏–º–µ–µ—Ç PID 12345.</p>
<hr />
<p><strong>üß† –ö–æ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ?</strong></p>
<ol>
<li>–ß—Ç–æ–±—ã:</li>
</ol>
<p>‚Ä¢ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –≤ cgroup:</p>
<pre><code>echo $$ &gt; /sys/fs/cgroup/memory/mygroup/tasks
</code></pre>
<ol>
<li>–û—Ç–ª–∞–∂–∏–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã:</li>
</ol>
<pre><code>echo &quot;This script is running with PID $$&quot;
</code></pre>
<ol>
<li>–°–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ shell:</li>
</ol>
<pre><code>ps -fp $$
</code></pre>
<h4 id="special-variables-short">Special variables short</h4>
<p>–ò–Ω–æ–≥–¥–∞ –∏—Ö —Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞—é—Ç:</p>
<p>‚Ä¢ <strong>–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è shell‚Äô–∞</strong>
‚Ä¢ <strong>–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</strong> ($0, $1, $2, ‚Ä¶, $@, $<em>)
‚Ä¢ </em><em>–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ shell (builtin shell variables)</em>*</p>
<hr />
<p><strong>üìò –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö:</strong></p>
<table>
<thead>
<tr>
<th><strong>–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è</strong></th>
<th><strong>–ó–Ω–∞—á–µ–Ω–∏–µ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>$$</td>
<td>PID —Ç–µ–∫—É—â–µ–≥–æ shell-–ø—Ä–æ—Ü–µ—Å—Å–∞</td>
</tr>
<tr>
<td>$?</td>
<td>–ö–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã (0 = —É—Å–ø–µ—Ö, ‚â†0 = –æ—à–∏–±–∫–∞)</td>
</tr>
<tr>
<td>$0</td>
<td>–ò–º—è —Å–∫—Ä–∏–ø—Ç–∞ (–∏–ª–∏ –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ shell)</td>
</tr>
<tr>
<td>$1, $2, ‚Ä¶</td>
<td>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—É –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏</td>
</tr>
<tr>
<td>$@</td>
<td>–í—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–∞–∫ —Å–ø–∏—Å–æ–∫ ("$1", "$2"‚Ä¶)</td>
</tr>
<tr>
<td>$*</td>
<td>–í—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–∞–∫ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ ("$1 $2 ...")</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>üîç –ü—Ä–∏–º–µ—Ä—ã:</strong></p>
<pre><code>#!/bin/bash
echo &quot;Script name: $0&quot;
echo &quot;First arg: $1&quot;
echo &quot;Exit code of last cmd: $?&quot;
echo &quot;All args (\$@): $@&quot;
echo &quot;All args (\$*): $*&quot;
</code></pre>
<p>–ï—Å–ª–∏ —Ç—ã –≤—ã–∑–æ–≤–µ—à—å:</p>
<pre><code>./myscript.sh hello world
</code></pre>
<p>–¢–æ –ø–æ–ª—É—á–∏—à—å:</p>
<pre><code>Script name: ./myscript.sh
First arg: hello
Exit code of last cmd: 0
All args ($@): hello world
All args ($*): hello world
</code></pre>
<hr />
<p><strong>üß† –†–µ–∑—é–º–µ</strong></p>
<table>
<thead>
<tr>
<th><strong>–ò–º—è</strong></th>
<th><strong>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç</strong></th>
<th><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>$$</td>
<td>PID —Ç–µ–∫—É—â–µ–≥–æ shell</td>
<td>—Å–ø–µ—Ü. –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è</td>
</tr>
<tr>
<td>$?</td>
<td>–ö–æ–¥ –≤—ã—Ö–æ–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã</td>
<td>—Å–ø–µ—Ü. –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è</td>
</tr>
<tr>
<td>$0</td>
<td>–ò–º—è —Å–∫—Ä–∏–ø—Ç–∞ –∏–ª–∏ shell</td>
<td>–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä</td>
</tr>
<tr>
<td>$1, $2</td>
<td>–ê—Ä–≥—É–º–µ–Ω—Ç—ã</td>
<td>–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</td>
</tr>
<tr>
<td>$@, $*</td>
<td>–í—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã</td>
<td>–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</td>
</tr>
</tbody>
</table>
<h3 id="zombie">–ß—Ç–æ —Ç–∞–∫–æ–µ zombie –ø—Ä–æ—Ü–µ—Å—Å –∏ —á–µ–º —ç—Ç–æ –ø–ª–æ—Ö–æ, –∫–∞–∫ –µ–≥–æ —É–±–∏—Ç—å?</h3>
<p><strong>Zombie (–∑–æ–º–±–∏)</strong> ‚Äî –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–π—Å—è –ø—Ä–æ—Ü–µ—Å—Å, —á—å—è –∑–∞–ø–∏—Å—å –µ—â—ë —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ (–æ–∂–∏–¥–∞–µ—Ç, –ø–æ–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—å –≤—ã–∑–æ–≤–µ—Ç <code>wait()</code> –¥–ª—è —á—Ç–µ–Ω–∏—è exit-–∫–æ–¥–∞).</p>
<ul>
<li>–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CPU/RAM, –Ω–æ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç <strong>PID</strong>.</li>
<li>–ü—Ä–∏ –±–æ–ª—å—à–æ–º —á–∏—Å–ª–µ –∑–æ–º–±–∏ ‚Äî –º–æ–∂–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è –ø—É–ª PID.</li>
</ul>
<p><strong>–£–±–∏—Ç—å:</strong> –Ω–µ–ª—å–∑—è –Ω–∞–ø—Ä—è–º—É—é, –Ω—É–∂–Ω–æ —É–±–∏—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—è:</p>
<pre><code class="language-bash">ps -ef | grep defunct
# –Ω–∞–π—Ç–∏ —Ä–æ–¥–∏—Ç–µ–ª—è, –∑–∞—Ç–µ–º:
sudo kill -9 &lt;PID&gt;
</code></pre>
<h3 id="_14">–ß–µ–º –æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ?</h3>
<ul>
<li><strong>–ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è inodes</strong> ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ–∞–π–ª–æ–≤.</li>
<li>–ú–µ–¥–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–æ–∏—Å–∫, open/read).</li>
<li>–ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.</li>
</ul>
<p><strong>–ß—Ç–æ –¥–µ–ª–∞—Ç—å:</strong>
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, SQLite, PostgreSQL).
- –†–∞–∑–±–∏–≤–∞—Ç—å –ø–æ –ø–æ–¥–ø–∞–ø–∫–∞–º (sharding –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É ID).
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3, GCS).</p>
<hr />
<h2 id="git">GIT</h2>
<h3 id="_15">–ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç?</h3>
<p>–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É¬†<code>git commit</code>¬†—Å —Ñ–ª–∞–≥–æ–º¬†<code>--amend</code>.</p>
<h3 id="_16">–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–±—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç?</h3>
<p>–ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –≤ –∫–æ–º–º–∏—Ç —á–∞—Å—Ç—å —Ñ–∞–π–ª–æ–≤, –º–æ–∂–Ω–æ:</p>
<pre><code>git add dir1
git commit

# –∑–∞–±—ã–ª–∏ dir2:
git add dir2
git commit --amend --no-edit
</code></pre>
<p>–§–ª–∞–≥¬†<code>--no-edit</code>¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–∂–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞.</p>
<h3 id="git-revert-git-reset">–ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è git revert –æ—Ç git reset?</h3>
<ul>
<li><code>git revert</code>¬†–æ—Ç–º–µ–Ω—è–µ—Ç¬†<strong>–æ–¥–∏–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–º–∏—Ç</strong>, —Å–æ–∑–¥–∞–≤ –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏.</li>
<li><code>git reset</code>¬†–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç –∫ –ø—Ä–æ—à–ª–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é,¬†<strong>—É–¥–∞–ª—è—è</strong>¬†–≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–º–∏—Ç—ã (–µ—Å–ª–∏ hard).</li>
</ul>
<hr />
<h2 id="_17">–°–µ—Ç—å</h2>
<h3 id="osi">OSI</h3>
<p>Open Systems Interconnection</p>
<p><strong>üì∂ –ú–æ–¥–µ–ª—å OSI ‚Äî 7 —É—Ä–æ–≤–Ω–µ–π —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è</strong></p>
<table>
<thead>
<tr>
<th><strong>‚Ññ</strong></th>
<th><strong>–£—Ä–æ–≤–µ–Ω—å</strong></th>
<th><strong>–û–ø–∏—Å–∞–Ω–∏–µ</strong></th>
<th><strong>–ü—Ä–∏–º–µ—Ä—ã</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>7</td>
<td><strong>–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π (Application)</strong></td>
<td>–¢–æ, —á—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</td>
<td>HTTP, FTP, DNS, SSH</td>
</tr>
<tr>
<td>6</td>
<td><strong>–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Presentation)</strong></td>
<td>–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –∫–æ–¥–∏—Ä–æ–≤–∫–∞, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</td>
<td>TLS/SSL, JPEG, MP3</td>
</tr>
<tr>
<td>5</td>
<td><strong>–°–µ–∞–Ω—Å–æ–≤—ã–π (Session)</strong></td>
<td>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏</td>
<td>SSH-—Å–µ—Å—Å–∏—è, RPC, NetBIOS</td>
</tr>
<tr>
<td>4</td>
<td><strong>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (Transport)</strong></td>
<td>–î–æ—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å</td>
<td>TCP, UDP</td>
</tr>
<tr>
<td>3</td>
<td><strong>–°–µ—Ç–µ–≤–æ–π (Network)</strong></td>
<td>–ê–¥—Ä–µ—Å–∞—Ü–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è</td>
<td>IP, ICMP</td>
</tr>
<tr>
<td>2</td>
<td><strong>–ö–∞–Ω–∞–ª—å–Ω—ã–π (Data Link)</strong></td>
<td>–î–æ—Å—Ç–∞–≤–∫–∞ –∫–∞–¥—Ä–æ–≤ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏</td>
<td>Ethernet, Wi-Fi, PPP</td>
</tr>
<tr>
<td>1</td>
<td><strong>–§–∏–∑–∏—á–µ—Å–∫–∏–π (Physical)</strong></td>
<td>–ë–∏—Ç—ã, –∫–∞–±–µ–ª–∏, —Å–∏–≥–Ω–∞–ª—ã</td>
<td>RJ-45, –æ–ø—Ç–æ–≤–æ–ª–æ–∫–Ω–æ, Wi-Fi</td>
</tr>
<tr>
<td>–ú–Ω–µ–º–æ–Ω–∏–∫–∞:</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>üîΩ <strong>–°–Ω–∏–∑—É –≤–≤–µ—Ä—Ö</strong>:</p>
<blockquote>
<p><strong>P</strong>lease <strong>D</strong>o <strong>N</strong>ot <strong>T</strong>hrow <strong>S</strong>ausage <strong>P</strong>izza <strong>A</strong>way</p>
</blockquote>
<p>(Physical, Data Link, Network, Transport, Session, Presentation, Application)</p>
<hr />
<p><strong>üîç –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–¥–∞—á–∏ HTTP-–∑–∞–ø—Ä–æ—Å–∞:</strong></p>
<ol>
<li><strong>HTTP-–∑–∞–ø—Ä–æ—Å</strong> (Application)</li>
<li>–®–∏—Ñ—Ä—É–µ—Ç—Å—è –≤ <strong>TLS</strong> (Presentation)</li>
<li>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ <strong>—Å–µ–∞–Ω—Å–æ–º TLS</strong> (Session)</li>
<li>–î–µ–ª–∏—Ç—Å—è –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç—ã TCP (Transport)</li>
<li>–î–æ—Å—Ç–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ IP-–∞–¥—Ä–µ—Å (Network)</li>
<li>–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ Ethernet/Wi-Fi (Data Link)</li>
<li>–ß–µ—Ä–µ–∑ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∫–∞–±–µ–ª—å –∏–ª–∏ —Å–∏–≥–Ω–∞–ª (Physical)</li>
</ol>
<h3 id="l4l7-lb">L4/L7 LB</h3>
<p>–†–∞–∑–±–µ—Ä—ë–º <strong>L4, L7 –∏ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–≤</strong>, –∏ –≤ —á—ë–º –∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏.</p>
<p><strong>üåê –£—Ä–æ–≤–Ω–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ (–ø–æ OSI-–º–æ–¥–µ–ª–∏)</strong></p>
<h4 id="l4-">‚úÖ L4-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)</h4>
<p>üìå –û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞: <strong>IP-–∞–¥—Ä–µ—Å–∞—Ö + TCP/UDP-–ø–æ—Ä—Ç–∞—Ö</strong></p>
<p><strong>üõ† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong></p>
<p>‚Ä¢ –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫, <strong>–Ω–µ –∑–∞–≥–ª—è–¥—ã–≤–∞—è –≤–Ω—É—Ç—Ä—å –ø–∞–∫–µ—Ç–∞</strong>.</p>
<p>‚Ä¢ –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ 5-tuple: src IP, src port, dst IP, dst port, protocol.</p>
<p><strong>üîß –ü—Ä–∏–º–µ—Ä—ã:</strong></p>
<p>‚Ä¢ iptables / ipvs
‚Ä¢ Linux LVS
‚Ä¢ HAProxy (L4 —Ä–µ–∂–∏–º)
‚Ä¢ AWS Network Load Balancer (NLB)
‚Ä¢ MetalLB –≤ Kubernetes</p>
<p><strong>‚ûï –ü–ª—é—Å—ã:</strong></p>
<p>‚Ä¢ –ë—ã—Å—Ç—Ä–æ
‚Ä¢ –ù–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
‚Ä¢ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è TCP/UDP</p>
<p><strong>‚ûñ –ú–∏–Ω—É—Å—ã:</strong></p>
<p>‚Ä¢ –ù–µ –≤–∏–¥–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, URL, cookie)
‚Ä¢ –ù–µ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É –∑–∞–ø—Ä–æ—Å–∞</p>
<hr />
<h4 id="l7-">‚úÖ L7-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å)</h4>
<p>üìå –û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞: <strong>—Å–æ–¥–µ—Ä–∂–∏–º–æ–º HTTP/HTTPS, gRPC, WebSocket –∏ —Ç.–¥.</strong></p>
<p><strong>üõ† –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong></p>
<p>‚Ä¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç <strong>–∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é</strong>: –ø—É—Ç—å, –∑–∞–≥–æ–ª–æ–≤–∫–∏, –∫—É–∫–∏, —Ç–µ–ª–æ –∏ —Ç.–ø.
‚Ä¢ –ú–æ–∂–µ—Ç <strong>–¥–µ–ª–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –ø–æ URL, —Ö–æ—Å—Ç—É, –º–µ—Ç–æ–¥—É</strong>, –∏ –¥–∞–∂–µ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É.</p>
<p><strong>üîß –ü—Ä–∏–º–µ—Ä—ã:</strong></p>
<p>‚Ä¢ NGINX, Envoy, Traefik, HAProxy (L7)
‚Ä¢ Kubernetes Ingress Controllers
‚Ä¢ AWS Application Load Balancer (ALB)
‚Ä¢ Istio / Linkerd (–≤ —Å–µ—Ä–≤–∏—Å–Ω–æ–π mesh‚Äô–µ)</p>
<p><strong>‚ûï –ü–ª—é—Å—ã:</strong></p>
<p>‚Ä¢ –ì–∏–±–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–Ω–∞—Ä–µ–µ–∫, A/B, blue/green
‚Ä¢ –ú–æ–∂–µ—à—å –¥–µ–ª–∞—Ç—å rate limiting, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ</p>
<p><strong>‚ûñ –ú–∏–Ω—É—Å—ã:</strong></p>
<p>‚Ä¢ –í—ã—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞
‚Ä¢ –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º L4
‚Ä¢ –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è ‚Äú—Å—ã—Ä–æ–≥–æ‚Äù TCP/UDP</p>
<hr />
<p><strong>üì¶ –ï—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ —É—Ä–æ–≤–Ω–∏?</strong></p>
<h4 id="l3-">‚úÖ L3-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (—Å–µ—Ç–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å)</h4>
<p>üìå –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ IP –±–µ–∑ –ø–æ—Ä—Ç–æ–≤</p>
<p>‚Ä¢ –û—á–µ–Ω—å –±–∞–∑–æ–≤–∞—è, –ø–æ—á—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –Ω–∞–ø—Ä—è–º—É—é
‚Ä¢ –ü—Ä–∏–º–µ—Ä: BGP + ECMP (Equal-cost multi-path routing), IP-routing</p>
<h4 id="l2-">‚úÖ L2-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–∫–∞–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)</h4>
<p>üìå –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ MAC-–∞–¥—Ä–µ—Å–∞ –∏ ARP</p>
<p>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∂–µ–ª–µ–∑–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö
‚Ä¢ –ü—Ä–∏–º–µ—Ä: –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ L2-–º–æ—Å—Ç—ã, ARP spoofing/rewriting (—Ä–µ–¥–∫–æ—Å—Ç—å)</p>
<h4 id="_18">üß† –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ</h4>
<table>
<thead>
<tr>
<th><strong>–£—Ä–æ–≤–µ–Ω—å</strong></th>
<th><strong>–ß—Ç–æ –≤–∏–¥–∏—Ç?</strong></th>
<th><strong>–ü—Ä–∏–º–µ—Ä—ã</strong></th>
<th><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>L7</strong></td>
<td>HTTP, gRPC, Headers</td>
<td>ALB, Ingress, NGINX</td>
<td>–£–º–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è</td>
</tr>
<tr>
<td><strong>L4</strong></td>
<td>TCP/UDP</td>
<td>NLB, LVS, iptables</td>
<td>–ë—ã—Å—Ç—Ä–æ, –Ω–µ —á–∏—Ç–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã</td>
</tr>
<tr>
<td><strong>L3</strong></td>
<td>IP-–∞–¥—Ä–µ—Å–∞</td>
<td>BGP, ECMP</td>
<td>–û—á–µ–Ω—å –Ω–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å, routing</td>
</tr>
<tr>
<td><strong>L2</strong></td>
<td>MAC-–∞–¥—Ä–µ—Å–∞</td>
<td>ARP proxy, –º–æ—Å—Ç—ã</td>
<td>–ü–æ—á—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–ª–∞—É–¥–µ</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="kubernetes">üß™ –í Kubernetes</h4>
<p>‚Ä¢ <strong>Service type: LoadBalancer</strong> ‚Äî –æ–±—ã—á–Ω–æ L4 (NLB –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
‚Ä¢ <strong>Ingress Controller</strong> ‚Äî L7 (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å HTTP)
‚Ä¢ <strong>Service Mesh (Istio, Linkerd)</strong> ‚Äî L7 –ø—Ä–æ–∫—Å–∏ —Å deep inspection</p>
<p>–í <strong>Kubernetes</strong> —É—Ä–æ–≤–Ω–∏ <strong>L4 –∏ L7</strong> <strong>—á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ</strong>, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —Ä–µ—à–∞—é—Ç <strong>—Ä–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏</strong> –Ω–∞ –ø—É—Ç–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º <strong>–ø–æ—à–∞–≥–æ–≤–æ –∏ –Ω–∞–≥–ª—è–¥–Ω–æ</strong>, –∫–∞–∫ –æ–Ω–∏ —Å–æ—á–µ—Ç–∞—é—Ç—Å—è.</p>
<h6 id="_19">üß≠ –ö—Ä–∞—Ç–∫–æ: –∫–∞–∫ —Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é</h6>
<pre><code>Client ‚Üí L4 LoadBalancer ‚Üí NodePort / ClusterIP (L4) ‚Üí Ingress Controller (L7) ‚Üí App
</code></pre>
<hr />
<p><strong>üî∑ 1. L4 –≤ Kubernetes</strong></p>
<p>L4 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ <strong>IP + TCP/UDP –ø–æ—Ä—Ç–∞—Ö</strong>. –í Kubernetes —ç—Ç–æ:</p>
<p><strong>‚úÖ –ü—Ä–∏–º–µ—Ä—ã L4-–æ–±—ä–µ–∫—Ç–æ–≤:</strong></p>
<table>
<thead>
<tr>
<th><strong>–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</strong></th>
<th><strong>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç</strong></th>
<th><strong>–£—Ä–æ–≤–µ–Ω—å</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Service: ClusterIP</td>
<td>L4 –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞</td>
<td>L4</td>
</tr>
<tr>
<td>Service: NodePort</td>
<td>–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –≤—Å–µ—Ö –Ω–æ–¥–∞—Ö</td>
<td>L4</td>
</tr>
<tr>
<td>Service: LoadBalancer</td>
<td>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º L4 –±–∞–ª–∞–Ω—Å–µ—Ä–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, NLB)</td>
<td>L4</td>
</tr>
</tbody>
</table>
<p>üìå –í–∞–∂–Ω–æ: LoadBalancer ‚Äî —ç—Ç–æ <strong>–≤–Ω–µ—à–Ω–∏–π L4-–±–∞–ª–∞–Ω—Å–µ—Ä</strong>, –Ω–∞–ø—Ä–∏–º–µ—Ä, AWS NLB –∏–ª–∏ GCP TCP balancer, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç ‚Äú—Ä–∞–∑–¥–∞–≤–∞—Ç—å‚Äù —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ NodePort —Å–µ—Ä–≤–∏—Å–∞.</p>
<hr />
<p><strong>üî∂ 2. L7 –≤ Kubernetes</strong></p>
<p><strong>‚úÖ –ö–∞–∫ —Ç–æ–ª—å–∫–æ L4-—Ç—Ä–∞—Ñ–∏–∫ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ Ingress Controller (–Ω–∞–ø—Ä–∏–º–µ—Ä, NGINX, Traefik, Envoy):</strong></p>
<p>‚Ä¢ –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è <strong>L7-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞</strong>:</p>
<p>–†–∞–∑–±–æ—Ä HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ:</p>
<p>‚Ä¢ host (–Ω–∞–ø—Ä–∏–º–µ—Ä, api.example.com)</p>
<p>‚Ä¢ path (–Ω–∞–ø—Ä–∏–º–µ—Ä, /v1/ ‚Üí –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å, /admin ‚Üí –¥—Ä—É–≥–æ–π)</p>
<p>‚Ä¢ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º, –º–µ—Ç–æ–¥–∞–º, –∏ —Ç.–ø.</p>
<p><strong>‚úÖ –ü—Ä–∏–º–µ—Ä—ã L7:</strong></p>
<p>‚Ä¢ Ingress —Ä–µ—Å—É—Ä—Å</p>
<p>‚Ä¢ IngressRoute (Traefik CRD)</p>
<p>‚Ä¢ VirtualService (–≤ Istio)</p>
<hr />
<h6 id="_20">üß™ –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Ñ–∏–∫–∞:</h6>
<p><strong>üëâ –¢—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å –±—Ä–∞—É–∑–µ—Ä:</strong></p>
<pre><code>https://app.example.com/login
</code></pre>
<p>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:</p>
<ol>
<li>
<p>üåç –ó–∞–ø—Ä–æ—Å —É—Ö–æ–¥–∏—Ç –Ω–∞ <strong>–≤–Ω–µ—à–Ω–∏–π IP LoadBalancer‚Äô–∞</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, AWS NLB) ‚Äî <strong>L4</strong></p>
</li>
<li>
<p>üö™ –û–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ NodePort –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (–≤—Å–µ –Ω–æ–¥—ã —Å–ª—É—à–∞—é—Ç –Ω—É–∂–Ω—ã–π –ø–æ—Ä—Ç) ‚Äî <strong>L4</strong></p>
</li>
<li>
<p>üì¶ –ü–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ pod —Å <strong>Ingress Controller‚Äô–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, NGINX)</strong> ‚Äî —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç—Å—è <strong>L7</strong></p>
</li>
<li>
<p>üß† NGINX —Å–º–æ—Ç—Ä–∏—Ç:</p>
</li>
</ol>
<p>‚Ä¢ Host: app.example.com</p>
<p>‚Ä¢ Path: /login</p>
<ol>
<li>üõ£ –ù–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –Ω—É–∂–Ω—ã–π backend-—Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, auth-service) ‚Äî —É–∂–µ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞</li>
</ol>
<hr />
<p><strong>üîÅ –°—Ö–µ–º–∞</strong></p>
<pre><code>    [ Client ]
        |
    [ L4 LoadBalancer ]  ‚Üê external (AWS NLB, GCP LB)
        |
    [ NodePort Service ] ‚Üê kube-proxy, iptables (L4)
        |
    [ Ingress Controller Pod ] ‚Üê nginx, envoy (L7)
        |
    [ Target App Service / Pod ]
</code></pre>
<hr />
<h6 id="service-mesh-istio">ü§ì –ê –µ—Å–ª–∏ Service Mesh (–Ω–∞–ø—Ä–∏–º–µ—Ä, Istio)?</h6>
<p>‚Ä¢ Istio <strong>–≤—Å—Ç–∞–≤–ª—è–µ—Ç L7-–ø—Ä–æ–∫—Å–∏ (Envoy)</strong> <em>–ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º pod‚Äô–æ–º</em></p>
<p>‚Ä¢ –¢—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç:</p>
<p>‚Ä¢ L4 ‚Üí Ingress Gateway (L7)</p>
<p>‚Ä¢ –ü–æ—Ç–æ–º –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏ —Ç–æ–∂–µ L7 ‚Üí –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞, –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–µ —Ä–µ–ª–∏–∑—ã –∏ —Ç.–ø.</p>
<hr />
<h6 id="_21">üß† –†–µ–∑—é–º–µ</h6>
<table>
<thead>
<tr>
<th><strong>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</strong></th>
<th><strong>–£—Ä–æ–≤–µ–Ω—å</strong></th>
<th><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>LoadBalancer Service</td>
<td>L4</td>
<td>–î–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞</td>
</tr>
<tr>
<td>NodePort / ClusterIP</td>
<td>L4</td>
<td>–†–æ—É—Ç–∏–Ω–≥ –Ω–∞ pod‚Äô—ã –≤–Ω—É—Ç—Ä–∏</td>
</tr>
<tr>
<td>Ingress Controller</td>
<td>L7</td>
<td>HTTP/HTTPS –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è</td>
</tr>
<tr>
<td>Service Mesh</td>
<td>L7</td>
<td>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="tcp-vs-udp">TCP vs UDP. –†–∞–∑–Ω–∏—Ü–∞</h3>
<ul>
<li><strong>TCP</strong> ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –ø–∞–∫–µ—Ç–æ–≤.</li>
<li><strong>UDP</strong> ‚Äî –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ, –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ, DNS –∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –≥–¥–µ –≤–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å.</li>
</ul>
<h3 id="tcp-handshake">–ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç TCP-handshake?</h3>
<p><strong>–ö—Ä–∞—Ç–∫–æ:</strong>
1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SYN —Å seq=A.
2. –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç SYN+ACK —Å seq=B –∏ ack=A+1.
3. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ACK —Å seq=A+1 –∏ ack=B+1.</p>
<p><strong>–ü–æ–¥—Ä–æ–±–Ω–æ:</strong>
1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ–≥–º–µ–Ω—Ç —Å SYN –∏ —Å–ª—É—á–∞–π–Ω—ã–º seq (A).
2. –°–µ—Ä–≤–µ—Ä –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç seq –∫–ª–∏–µ–Ω—Ç–∞, –≤—ã–¥–µ–ª—è–µ—Ç —Å–æ–∫–µ—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SYN+ACK (seq=B, ack=A+1) –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ SYN-RECEIVED. –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî RST.
3. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç SYN+ACK, –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç seq —Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ACK. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ ESTABLISHED. –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª RST ‚Äî –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø–æ–ø—ã—Ç–∫—É. –ü—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ ‚Äî –ø–æ–≤—Ç–æ—Ä.
4. –°–µ—Ä–≤–µ—Ä –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ ACK –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ ESTABLISHED. –ï—Å–ª–∏ –Ω–µ—Ç ACK ‚Äî –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.</p>
<h3 id="https">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã? –ö–∞–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ? (https —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)</h3>
<p>–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<ol>
<li>–ë—Ä–∞—É–∑–µ—Ä –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –≤–µ–±-—Å–∞–π—Ç—É (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É), –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Å –ø–æ–º–æ—â—å—é SSL.</li>
<li>–ë—Ä–∞—É–∑–µ—Ä –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —É –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞.</li>
<li>–í –æ—Ç–≤–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä—É –∫–æ–ø–∏—é —Å–≤–æ–µ–≥–æ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á.</li>
<li>–ë—Ä–∞—É–∑–µ—Ä –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ—Ç SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º. –£ –Ω–µ–≥–æ —É–∂–µ –∑–∞—à–∏—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —Å –ø–æ–º–æ—â—å—é —Ü–µ–Ω—Ç—Ä–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ï—Å–ª–∏ —ç—Ç–æ —Ç–∞–∫, –æ–Ω —Å–æ–æ–±—â–∞–µ—Ç –æ–± —ç—Ç–æ–º –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–µ–Ω–∞—Å–æ–≤—ã–π –∫–ª—é—á, —à–∏—Ñ—Ä—É–µ—Ç –ø–µ–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä.</li>
<li>–°–µ–µ—Ä–≤–µ—Ä —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ–∞–Ω—Å–æ–≤—ã–π –∫–ª—é—á. –ó–∞—Ç–µ–º –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–¥–ø–∏—Å—å—é –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–µ–∞–Ω—Å, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SSL.</li>
<li>–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ –±—Ä–∞—É–∑–µ—Ä–æ–º –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–º.</li>
</ol>
<h3 id="ssl-">–û–ø–∏—à–∏ –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã ssl-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</h3>
<p>–í –æ—Å–Ω–æ–≤–µ –ª—é–±–æ–≥–æ –º–µ—Ç–æ–¥–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ª–µ–∂–∏—Ç –∫–ª—é—á. –ö–ª—é—á ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ. –í —Ä–∞–±–æ—Ç–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —É—á–∞—Å—Ç–≤—É—é—Ç —Ç—Ä–∏ –∫–ª—é—á–∞: –ø—É–±–ª–∏—á–Ω—ã–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∏ —Å–µ–∞–Ω—Å–æ–≤—ã–π.</p>
<p><strong>–ü—É–±–ª–∏—á–Ω—ã–π</strong>¬†–∫–ª—é—á –∑–∞—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.</p>
<p>–ë—Ä–∞—É–∑–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—É. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –≤–≤–µ–ª–∏ –¥–∞–Ω–Ω—ã–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –∏ –Ω–∞–∂–∞–ª–∏ ¬´–û–ø–ª–∞—Ç–∏—Ç—å¬ª. –≠—Ç–æ—Ç –∫–ª—é—á –≤–∏–¥–µ–Ω –≤—Å–µ–º, –±—Ä–∞—É–∑–µ—Ä –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç –µ–≥–æ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é.</p>
<p><strong>–ü—Ä–∏–≤–∞—Ç–Ω—ã–π</strong>¬†–∫–ª—é—á —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.</p>
<p>–ï–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ä–≤–µ—Ä, –∫–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞. –≠—Ç–æ—Ç –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º.</p>
<p><strong>–°–µ–∞–Ω—Å–æ–≤—ã–π</strong>¬†–∫–ª—é—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.</p>
<p>–ë—Ä–∞—É–∑–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ–≥–æ –Ω–∞ –≤—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≤–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç–µ. –°—Ç–æ–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∑–∞–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫—É, —Å–µ–∞–Ω—Å –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –∏ –∫–ª—é—á –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.</p>
<p>–ü—É–±–ª–∏—á–Ω—ã–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≤—ã–ø—É—Å–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ. –ï—Å–ª–∏ –∫–ª—é—á –ø–æ–ø–∞–¥—ë—Ç –≤ —Ä—É–∫–∏ –¥—Ä—É–≥–æ–º—É —á–µ–ª–æ–≤–µ–∫—É, –æ–Ω —Å–º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ –≤–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.</p>
<p><strong>–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –Ω–∞–∑—ã–≤–∞—é—Ç –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º.</strong>¬†–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫–æ–π –º–µ—Ç–æ–¥ –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ. –ü–æ—ç—Ç–æ–º—É –±—Ä–∞—É–∑–µ—Ä –∏ —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑: —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Å–µ–∞–Ω—Å–æ–≤—ã–π –∫–ª—é—á.</p>
<p><strong>–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å –æ–¥–Ω–∏–º –∫–ª—é—á–æ–º –Ω–∞–∑—ã–≤–∞—é—Ç —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º.</strong>¬†–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —É–¥–æ–±–µ–Ω, –Ω–æ –Ω–µ —Ç–∞–∫ –±–µ–∑–æ–ø–∞—Å–µ–Ω. –ü–æ—ç—Ç–æ–º—É –±—Ä–∞—É–∑–µ—Ä –∏ –¥–µ–ª–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–∞–Ω—Å–∞ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.</p>
<p>–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ –∏ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.</p>
<h3 id="_22">–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</h3>
<p>üîë <strong>–û–¥–∏–Ω –∫–ª—é—á –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è</strong></p>
<p>–í —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <strong>–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª—é—á</strong> –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.</p>
<h4 id="_23">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h4>
<ol>
<li>–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å <strong>–æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º</strong>.</li>
<li>–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å <strong>—à–∏—Ñ—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ</strong> —Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –∫–ª—é—á–∞.</li>
<li>–ü–æ–ª—É—á–∞—Ç–µ–ª—å <strong>—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ</strong>, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ—Ç –∂–µ –∫–ª—é—á.</li>
</ol>
<h4 id="_24">–ü—Ä–∏–º–µ—Ä—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:</h4>
<p>‚Ä¢ <strong>AES (Advanced Encryption Standard)</strong> ‚Äì —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.
‚Ä¢ <strong>DES (Data Encryption Standard)</strong> ‚Äì —É—Å—Ç–∞—Ä–µ–ª, –Ω–æ –±—ã–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –≤ –ø—Ä–æ—à–ª–æ–º.
‚Ä¢ <strong>3DES (Triple DES)</strong> ‚Äì —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è DES.
‚Ä¢ <strong>RC4</strong> ‚Äì –ø–æ—Ç–æ–∫–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º, —Å–µ–π—á–∞—Å —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º.</p>
<h4 id="_25">–ü–ª—é—Å—ã</h4>
<p>‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ.
‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.</p>
<h4 id="_26">–ú–∏–Ω—É—Å—ã</h4>
<p>‚ùå –ù–µ–æ–±—Ö–æ–¥–∏–º–æ <strong>–±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–ª—é—á</strong> –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º.
‚ùå –ï—Å–ª–∏ –∫–ª—é—á —É–∫—Ä–∞–¥—É—Ç, <strong>–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ —Å–º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</strong>.</p>
<h3 id="_27">–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</h3>
<p>üîë <strong>–î–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∫–ª—é—á–∞: –ø—É–±–ª–∏—á–Ω—ã–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π</strong></p>
<p>–í –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è <strong>–ø–∞—Ä–∞ –∫–ª—é—á–µ–π</strong>:</p>
<p>‚Ä¢ <strong>–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á</strong> ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.
‚Ä¢ <strong>–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á</strong> ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.</p>
<h4 id="_28">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h4>
<ol>
<li><strong>–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á</strong> –ø–æ–ª—É—á–∞—Ç–µ–ª—è.</li>
<li>–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å <strong>—à–∏—Ñ—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ</strong> —Å –ø–æ–º–æ—â—å—é <strong>–ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞</strong>.</li>
<li>–ü–æ–ª—É—á–∞—Ç–µ–ª—å <strong>–¥–µ—à–∏—Ñ—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ</strong> —Å –ø–æ–º–æ—â—å—é <strong>–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞</strong>.</li>
</ol>
<h4 id="_29">–ü—Ä–∏–º–µ—Ä—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:</h4>
<p>‚Ä¢ <strong>RSA (Rivest-Shamir-Adleman)</strong> ‚Äì –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤.
‚Ä¢ <strong>ECC (Elliptic Curve Cryptography)</strong> ‚Äì –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø—Ä–∏ –º–µ–Ω—å—à–∏—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö –∫–ª—é—á–µ–π.
‚Ä¢ <strong>DSA (Digital Signature Algorithm)</strong> ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π.</p>
<h4 id="_30">–ü–ª—é—Å—ã</h4>
<p>‚úÖ <strong>–ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á</strong>, —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–π.
‚úÖ <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ</strong>, —Ç–∞–∫ –∫–∞–∫ –≤–∑–ª–æ–º —Ç—Ä–µ–±—É–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª).</p>
<h4 id="_31">–ú–∏–Ω—É—Å—ã</h4>
<p>‚ùå <strong>–ú–µ–¥–ª–µ–Ω–Ω–µ–µ</strong>, —á–µ–º —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–∏–∑-–∑–∞ —Å–ª–æ–∂–Ω—ã—Ö –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π).
‚ùå <strong>–ú–µ–Ω–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ</strong> –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.</p>
<h3 id="_32">–û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è</h3>
<table>
<thead>
<tr>
<th></th>
<th><strong>–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</strong></th>
<th><strong>–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>üîë <strong>–ö–ª—é—á–∏</strong></td>
<td>–û–¥–∏–Ω –æ–±—â–∏–π –∫–ª—é—á</td>
<td>–ü–∞—Ä–∞ –∫–ª—é—á–µ–π (–ø—É–±–ª–∏—á–Ω—ã–π + –ø—Ä–∏–≤–∞—Ç–Ω—ã–π)</td>
</tr>
<tr>
<td>‚ö° <strong>–°–∫–æ—Ä–æ—Å—Ç—å</strong></td>
<td>–ë—ã—Å—Ç—Ä–µ–µ</td>
<td>–ú–µ–¥–ª–µ–Ω–Ω–µ–µ</td>
</tr>
<tr>
<td>üîê <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</strong></td>
<td>–£—è–∑–≤–∏–º–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –∫–ª—é—á–∞</td>
<td>–ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ</td>
</tr>
<tr>
<td>üîÅ <strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</strong></td>
<td>–•–æ—Ä–æ—à–æ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö</td>
<td>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–ª—é—á–µ–≤–æ–≥–æ –æ–±–º–µ–Ω–∞ –∏ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π</td>
</tr>
<tr>
<td>### –ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>üìå <strong>–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</strong> ‚Äì –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–π–ª–æ–≤, –¥–∏—Å–∫–æ–≤, VPN).</p>
<p>üìå <strong>–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</strong> ‚Äì –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –∫–ª—é—á–∞–º–∏, —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã (PGP), TLS/SSL –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.</p>
<p>üí° <strong>–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥</strong>: –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ HTTPS –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä —Å–Ω–∞—á–∞–ª–∞ <strong>–æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –∫–ª—é—á–∞–º–∏ —á–µ—Ä–µ–∑ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (RSA)</strong>, –∞ –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç <strong>—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (AES) –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö</strong>.</p>
<h3 id="_33">–í—ã–≤–æ–¥</h3>
<p>‚Ä¢ <strong>–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–µ–µ</strong>, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –∫–ª—é—á–∞–º–∏.
‚Ä¢ <strong>–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ</strong>, –Ω–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –ø–µ—Ä–µ–¥–∞—á–∏ –∫–ª—é—á–µ–π.
‚Ä¢ <strong>–í —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö</strong> –æ–Ω–∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ!</p>
<h3 id="_34">–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏?</h3>
<p>–≠—Ç–æ —Ç–∞–±–ª–∏—Ü–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –≤ —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Å–µ—Ç–∏ –∏ —Å–µ—Ç–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ö–æ–ø–∞ (gateway).</p>
<p><strong>–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ –¥–æ IP 1.2.3.4:</strong></p>
<pre><code class="language-bash">traceroute 1.2.3.4
ip route get 1.2.3.4
</code></pre>
<h3 id="iptables-snat-dnat">IPTables: SNAT, DNAT, –ú–∞—Å–∫–∞—Ä–∞–¥–∏–Ω–≥</h3>
<p><strong>–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:</strong></p>
<h4 id="1-filter-table">1. Filter Table</h4>
<ul>
<li>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.</li>
<li>–î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ (DROP, LOG, ACCEPT, REJECT).</li>
<li>–¶–µ–ø–æ—á–∫–∏:</li>
<li>INPUT (–ø–∞–∫–µ—Ç—ã –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞)</li>
<li>OUTPUT (–∏—Å—Ö–æ–¥—è—â–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ)</li>
<li>FORWARD (—Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã–µ)</li>
</ul>
<h4 id="2-nat-table">2. NAT Table</h4>
<ul>
<li>–î–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ç–µ–≤—ã—Ö –∞–¥—Ä–µ—Å–æ–≤.</li>
<li>–¢–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –ø–∞–∫–µ—Ç –ø–æ—Ç–æ–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —ç—Ç—É —Ç–∞–±–ª–∏—Ü—É.</li>
<li>–¶–µ–ø–æ—á–∫–∏:</li>
<li>PREROUTING ‚Äî DNAT</li>
<li>POSTROUTING ‚Äî SNAT</li>
<li>OUTPUT ‚Äî NAT –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö</li>
</ul>
<h4 id="3-mangle-table">3. Mangle Table</h4>
<ul>
<li>–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤: TOS, TTL, MARK –∏ –¥—Ä.</li>
<li>–¶–µ–ø–æ—á–∫–∏:</li>
<li>PREROUTING, INPUT, FORWARD, OUTPUT, POSTROUTING</li>
</ul>
<h4 id="4-raw-table">4. Raw Table</h4>
<ul>
<li>–î–æ connection tracking (state machine)</li>
<li>–¶–µ–ø–æ—á–∫–∏: PREROUTING, OUTPUT</li>
</ul>
<h4 id="iptables">–¶–µ–ø–æ—á–∫–∏ IPTables:</h4>
<ul>
<li>PREROUTING ‚Äî –¥–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏</li>
<li>INPUT ‚Äî –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞</li>
<li>FORWARD ‚Äî —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã–µ</li>
<li>OUTPUT ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏—Å—Ö–æ–¥—è—â–∏–µ</li>
<li>POSTROUTING ‚Äî –ø–æ—Å–ª–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏</li>
</ul>
<h3 id="1012153522">–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–ø–∏—Å—å 10.12.15.35/22?</h3>
<p>CIDR-–±–ª–æ–∫ <code>/22</code>:
- –ú–∞—Å–∫–∞: <code>255.255.252.0</code>
- –î–∏–∞–ø–∞–∑–æ–Ω: <code>10.12.12.0 ‚Äì 10.12.15.255</code>
- –ü—Ä–∏–º–µ—Ä —á–∞—Å—Ç–Ω–æ–π —Å–µ—Ç–∏ —Å 1024 –∞–¥—Ä–µ—Å–∞–º–∏, 64 –ø–æ–¥—Å–µ—Ç–∏.</p>
<h3 id="dns">DNS</h3>
<p><strong>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏ DNS (RR):</strong></p>
<ul>
<li>
<p>NAME ‚Äî –¥–æ–º–µ–Ω</p>
</li>
<li>
<p>TYPE ‚Äî —Ç–∏–ø –∑–∞–ø–∏—Å–∏ (A, AAAA, MX, CNAME...)</p>
</li>
<li>
<p>CLASS ‚Äî —Ç–∏–ø —Å–µ—Ç–∏ (–æ–±—ã—á–Ω–æ IN)</p>
</li>
<li>
<p>TTL ‚Äî —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ –≤ –∫—ç—à–µ</p>
</li>
<li>
<p>RDLEN ‚Äî –¥–ª–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö</p>
</li>
<li>
<p>RDATA ‚Äî —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</p>
</li>
</ul>
<p><strong>–¢–∏–ø—ã –∑–∞–ø–∏—Å–µ–π:</strong></p>
<ul>
<li>
<p>A ‚Äî IPv4 –∞–¥—Ä–µ—Å  </p>
</li>
<li>
<p>AAAA ‚Äî IPv6 –∞–¥—Ä–µ—Å</p>
</li>
<li>
<p>CNAME ‚Äî –ø—Å–µ–≤–¥–æ–Ω–∏–º (–∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–µ –∏–º—è)</p>
</li>
<li>
<p>MX ‚Äî –ø–æ—á—Ç–æ–≤—ã–π –æ–±–º–µ–Ω–Ω–∏–∫</p>
</li>
<li>
<p>NS ‚Äî DNS —Å–µ—Ä–≤–µ—Ä –∑–æ–Ω—ã</p>
</li>
<li>
<p>PTR ‚Äî –æ–±—Ä–∞—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å IP ‚Üí –∏–º—è</p>
</li>
<li>
<p>SOA ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –∑–æ–Ω—ã</p>
</li>
<li>
<p>SRV ‚Äî —Å–µ—Ä–≤–µ—Ä—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Jabber, Active Directory)</p>
</li>
</ul>
<h4 id="_35">–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∏ –Ω–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å</h4>
<p>–ü—Ä–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –í—ã –ø—Ä–æ—Å—Ç–æ –æ–±—Ä–∞—â–∞–µ—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É, –∞ –æ–Ω, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ—Ç —É —Å–µ–±—è –Ω—É–∂–Ω–æ–π –∑–∞–ø–∏—Å–∏, –∏–¥–µ—Ç –∫ –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–µ—Ä–∞–º –∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É –Ω–∏—Ö.</p>
<p>–ù–µ—Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π dns —Å–µ—Ä–≤–µ—Ä –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç - "—è –Ω–µ –∑–Ω–∞—é, –Ω–æ —Å–ø—Ä–æ—Å–∏ —É —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞". –ò –∫–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç —Å–ª–∞—Ç—å –µ—â—ë –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å. –ü–æ–Ω—è—Ç–Ω–æ–µ –¥–µ–ª–æ, —á—Ç–æ –ø—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ª—É—á—à–µ.</p>
<h3 id="_36">–°–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã</h3>
<h4 id="_37">–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ –∏ —Å–æ–∫–µ—Ç–æ–≤</h4>
<pre><code class="language-bash">ss -tlpn
</code></pre>
<h4 id="_38">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤</h4>
<pre><code class="language-bash">ip a
</code></pre>
<h4 id="_39">–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤</h4>
<pre><code class="language-bash">ip route
</code></pre>
<h3 id="netcat-nc">NetCat (nc)</h3>
<p><strong>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞:</strong></p>
<pre><code class="language-bash">nc -vn 192.168.1.100 12345
</code></pre>
<p><strong>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤:</strong></p>
<pre><code class="language-bash">nc -vnz 192.168.1.100 20-24
</code></pre>
<p>–ò—Å—Ç–æ—á–Ω–∏–∫: https://habr.com/ru/post/336596/</p>
<h3 id="nmap">Nmap</h3>
<p><strong>–ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Ö–æ—Å—Ç–æ–≤ –≤ –ø–æ–¥—Å–µ—Ç–∏:</strong></p>
<pre><code class="language-bash">nmap -sP 192.168.1.0/24
nmap -sn 192.168.1.0/24
</code></pre>
<h3 id="tcpdump">Tcpdump</h3>
<p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
<pre><code class="language-bash">tcpdump -i any -s0
</code></pre>
<ul>
<li><code>-i</code> ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</li>
<li><code>-s</code> ‚Äî —Ä–∞–∑–º–µ—Ä –∑–∞—Ö–≤–∞—Ç–∞ –ø–∞–∫–µ—Ç–∞ (0 ‚Äî –≤–µ—Å—å)</li>
</ul>
<hr />
<h2 id="docker_1">Docker</h2>
<h4 id="docker-docker">–ö–∞–∫ –≤–Ω—É—Ç—Ä–∏ Docker –ø–æ–Ω—è—Ç—å —á—Ç–æ —Ç—ã –≤ Docker?</h4>
<h5 id="1-dockerenv">1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ /.dockerenv</h5>
<pre><code>test -f /.dockerenv &amp;&amp; echo &quot;Inside Docker&quot;
</code></pre>
<p>‚Ä¢ <strong>–ü–ª—é—Å—ã</strong>: –ù–∞–¥—ë–∂–Ω–æ, —ç—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–∑–¥–∞—ë—Ç Docker –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
‚Ä¢ <strong>–ú–∏–Ω—É—Å—ã</strong>: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–µ–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Kubernetes) –º–æ–≥—É—Ç –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª.</p>
<p>–¢–∞–∫–∂–µ, –µ—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –¥—Ä—É–≥–æ–π runtime (containerd, Podman), —Ñ–∞–π–ª –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å.</p>
<hr />
<h5 id="2-cgroup">2. –ß—Ç–µ–Ω–∏–µ cgroup</h5>
<pre><code>cat /proc/1/cgroup
</code></pre>
<p>–ï—Å–ª–∏ —Ç—ã –≤–∏–¥–∏—à—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:</p>
<pre><code>0::/docker/abc123...
</code></pre>
<p>–∏–ª–∏</p>
<pre><code>1:name=systemd:/docker/abc123
</code></pre>
<p>‚Äî —Ç–æ —Ç—ã, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤ Docker.</p>
<p><strong>–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ bash:</strong></p>
<pre><code>grep -qE &quot;/docker/|/kubepods/&quot; /proc/1/cgroup &amp;&amp; echo &quot;Inside container&quot;
</code></pre>
<p>‚Ä¢ kubepods ‚Üí —Ç—ã –≤–Ω—É—Ç—Ä–∏ Kubernetes.</p>
<p>‚Ä¢ docker ‚Üí –≤ Docker –Ω–∞–ø—Ä—è–º—É—é.</p>
<hr />
<h5 id="3-hostname">3. –ü—Ä–æ–≤–µ—Ä–∫–∞ hostname</h5>
<p>–ò–Ω–æ–≥–¥–∞ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ hostname = –∫–æ—Ä–æ—Ç–∫–∏–π —Å–ª—É—á–∞–π–Ω—ã–π hash (Docker –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ–≥–æ –∫–∞–∫ container ID). –ü—Ä–∏–º–µ—Ä:</p>
<pre><code>hostname
</code></pre>
<p>–ú–æ–∂–µ—Ç –±—ã—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ 0a1b2c3d4e5f.</p>
<p>üìå –ù–µ –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–±, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ—Å–≤–µ–Ω–Ω—ã–º –ø—Ä–∏–∑–Ω–∞–∫–æ–º.</p>
<hr />
<h5 id="4-cgroups">‚ö†Ô∏è 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π cgroups</h5>
<p>–ï—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É —Ç–µ–±—è:</p>
<pre><code>cat /sys/fs/cgroup/memory/memory.limit_in_bytes
</code></pre>
<p>–ò –∑–Ω–∞—á–µ–Ω–∏–µ <strong>—Å–∏–ª—å–Ω–æ –º–µ–Ω—å—à–µ</strong>, —á–µ–º —É —Ç–≤–æ–µ–π –º–∞—à–∏–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 512MB –∏–ª–∏ 1GB), —Ç—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Ä–µ—Å—É—Ä—Å–æ–≤.</p>
<hr />
<h5 id="_40">üß† –ö–∞–∫–æ–π —Å–ø–æ—Å–æ–± –ª—É—á—à–µ?</h5>
<table>
<thead>
<tr>
<th><strong>–ú–µ—Ç–æ–¥</strong></th>
<th><strong>–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å</strong></th>
<th><strong>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>/.dockerenv</td>
<td>‚úÖ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è</td>
<td>–°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è Docker</td>
</tr>
<tr>
<td>/proc/1/cgroup</td>
<td>‚úÖ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è</td>
<td>–†–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ k8s</td>
</tr>
<tr>
<td>hostname</td>
<td>‚ö†Ô∏è –ù–∏–∑–∫–∞—è</td>
<td>–ö–æ—Å–≤–µ–Ω–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫</td>
</tr>
<tr>
<td>cgroup limits</td>
<td>‚úÖ</td>
<td>–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞, –Ω–æ –Ω–µ —Å—Ç—Ä–æ–≥–æ</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>üõ† –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç)</strong></p>
<pre><code>if [ -f /.dockerenv ] || grep -qa 'docker\|kubepods' /proc/1/cgroup; then
    echo &quot;Running inside a container&quot;
else
    echo &quot;Not in container&quot;
fi
</code></pre>
<h3 id="cmd-entrypoint">–í —á–µ–º –æ—Ç–ª–∏—á–∏–µ CMD –∏ ENTRYPOINT</h3>
<p>–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ Dockerfile –∑–∞–¥–∞—é—Ç –∫–æ–º–∞–Ω–¥—É, –∏—Å–ø–æ–ª–Ω—è–µ–º—É—é –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü—Ä–∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä:</p>
<ul>
<li>–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö, CMD –∏–ª–∏ ENTRYPOINT, –≤ Dockerfile.</li>
<li>–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª ‚Äî ENTRYPOINT –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞.</li>
<li>–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ ‚Äî CMD –±—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞.</li>
</ul>
<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è RUN –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –Ω–µ–≥–æ –ø–∞–∫–µ—Ç—ã. –û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª—é–±—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–≤–µ—Ä—Ö —Ç–µ–∫—É—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Å–ª–æ–π, —Ñ–∏–∫—Å–∏—Ä—É—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ß–∞—Å—Ç–æ –≤ Dockerfile –≤—ã –Ω–∞–π–¥–µ—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π RUN.</p>
<p>–•–æ—Ä–æ—à–µ–π –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–µ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ RUN –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π:</p>
<pre><code>RUN apt-get update &amp;&amp; apt-get install -y \
  bzr \
  cvs \
  git \
  mercurial \
  subversion
</code></pre>
<p>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ¬†<code>apt-get update</code>–∏¬†<code>apt-get install</code>–≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ RUN. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±—É–¥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–∞–º—ã–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–∞–∫–µ—Ç—ã. –ï—Å–ª–∏ –±—ã¬†<code>apt-get install</code>—ç—Ç–æ –±—ã–ª–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è RUN, —Ç–æ –æ–Ω–∞ –±—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Å–ª–æ–π, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π¬†<code>apt-get update</code>, –∫–æ—Ç–æ—Ä—ã–π –º–æ–≥ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –¥–∞–≤–Ω—ã–º-–¥–∞–≤–Ω–æ.</p>
<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è CMD –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –ø–æ¬†<em>—É–º–æ–ª—á–∞–Ω–∏—é</em>¬†, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Docker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –∫–æ–º–∞–Ω–¥–æ–π, –∫–æ–º–∞–Ω–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è. –ï—Å–ª–∏ Dockerfile —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª–µ–µ –æ–¥–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ CMD, –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ CMD, –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π, –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.</p>
<p>CMD –∏–º–µ–µ—Ç —Ç—Ä–∏ —Ñ–æ—Ä–º—ã:</p>
<ul>
<li>
<p><code>CMD ["executable","param1","param2"]</code></p>
<p>(–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞, –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ)</p>
</li>
<li>
<p><code>CMD ["param1","param2"]</code><em>exec</em></p>
<p>(—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è ENTRYPOINT –≤ —Ñ–æ—Ä–º–µ</p>
</li>
<li>
<p><code>CMD command param1 param2</code></p>
<p>(—Ñ–æ—Ä–º–∞ –æ–±–æ–ª–æ—á–∫–∏)</p>
<p><code>docker run -it &lt;image&gt; /bin/bash</code>¬†- —Ç—É—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ CMD –æ–Ω –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω, –∏ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –±–∞—à</p>
</li>
</ul>
<p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ENTRYPOINT –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª. –û–Ω –ø–æ—Ö–æ–∂ –Ω–∞ CMD, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –†–∞–∑–Ω–∏—Ü–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ ENTRYPOINT –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è, –∫–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Docker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. (–ï—Å—Ç—å —Å–ø–æ—Å–æ–± –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å ENTTRYPOINT, –Ω–æ –≤—Ä—è–¥ –ª–∏ –≤—ã —ç—Ç–æ —Å–¥–µ–ª–∞–µ—Ç–µ.)</p>
<p>–î–æ–∫–µ—Ä—Ñ–∞–π–ª</p>
<pre><code>ENTRYPOINT [&quot;/bin/echo&quot;, &quot;Hello&quot;]
CMD [&quot;world&quot;]
</code></pre>
<p>–∫–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –∫–∞–∫¬†<code>docker run -it &lt;image&gt;</code>–±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –≤—ã–≤–æ–¥</p>
<pre><code>Hello world

</code></pre>
<p>–Ω–æ –∫–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è,¬†<code>docker run -it &lt;image&gt; John</code>—ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫</p>
<pre><code>Hello John
</code></pre>
<ul>
<li>–ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç</li>
</ul>
<p>cmd –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ entrypoint –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –¢–µ–º —Å–∞–º—ã–º –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –Ω—É–∂–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.</p>
<p>–¢–æ –µ—Å—Ç—å –≤ entrypoint –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –±–∏–Ω–∞—Ä—å, –∞ –≤ cmd –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.</p>
<p>CMD –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ç–µ—Ä–µ—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ.</p>
<h3 id="docker_2">–ß—Ç–æ —Ç–∞–∫–æ–µ Docker? –ö–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω? –ù–∞ –∫–∞–∫–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è?</h3>
<p>Docker ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ).</p>
<p><strong>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:</strong>
- cgroups –∏ namespaces (–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω) –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
- union —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã (OverlayFS)
- –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π –¥–≤–∏–∂–æ–∫ containerd/runc</p>
<h3 id="docker_3">–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Docker:</h3>
<ul>
<li><strong>pid</strong> ‚Äî –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</li>
<li><strong>net</strong> ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã</li>
<li><strong>ipc</strong> ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ IPC-—Ä–µ—Å—É—Ä—Å–∞–º–∏ (–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)</li>
<li><strong>mnt</strong> ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∞–º–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
<li><strong>uts</strong> ‚Äî –∏–º—è —Ö–æ—Å—Ç–∞ –∏ –¥–æ–º–µ–Ω–∞ (hostname)</li>
</ul>
<h3 id="docker-vmware">–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Docker –∏ VMware</h3>
<ul>
<li>Docker ‚Äî —É—Ä–æ–≤–µ–Ω—å –û–° (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —è–¥—Ä–æ —Ö–æ—Å—Ç–∞, –±—ã—Å—Ç—Ä–∞—è –∏ –ª—ë–≥–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è)</li>
<li>VMware ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è (–∫–∞–∂–¥–∞—è –í–ú ‚Äî —Å–≤–æ—è –û–°, –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–æ)</li>
</ul>
<h3 id="docker_4">–ó–∞—á–µ–º –Ω—É–∂–µ–Ω Docker? –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–µ—Ç?</h3>
<ul>
<li>–†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É "—Ä–∞–±–æ—Ç–∞–µ—Ç —É –º–µ–Ω—è, –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —É —Ç–µ–±—è"</li>
<li>–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—É—é —Å—Ä–µ–¥—É</li>
<li>–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</li>
</ul>
<h3 id="dockerfile">–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã Dockerfile</h3>
<ul>
<li><code>FROM</code> ‚Äî –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑</li>
<li><code>RUN</code> ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ</li>
<li><code>COPY</code> / <code>ADD</code> ‚Äî –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤</li>
<li><code>CMD</code> / <code>ENTRYPOINT</code> ‚Äî –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞</li>
<li><code>EXPOSE</code> ‚Äî –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–æ–≤</li>
<li><code>ENV</code> ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</li>
<li><code>WORKDIR</code> ‚Äî —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è</li>
</ul>
<h3 id="dockerfile-docker-compose">–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Dockerfile –∏ docker-compose</h3>
<ul>
<li><strong>Dockerfile</strong> ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞</li>
<li><strong>docker-compose.yml</strong> ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞ –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã, —Å–µ—Ç–∏, —Ç–æ–º–∞)</li>
</ul>
<h3 id="docker-image-registry">–ö–∞–∫ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ docker image —Å –æ–¥–Ω–æ–π –º–∞—à–∏–Ω—ã –Ω–∞ –¥—Ä—É–≥—É—é –±–µ–∑ registry?</h3>
<pre><code class="language-bash">docker save myimage &gt; image.tar
scp image.tar user@remote:/tmp/
docker load &lt; image.tar
</code></pre>
<p>–ò–ª–∏:</p>
<pre><code class="language-bash">docker export &lt;container&gt; &gt; file.tar
# –∏ –¥–∞–ª–µ–µ docker import
</code></pre>
<h3 id="best-practices-dockerfile">Best practices –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é Dockerfile –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤</h3>
<ul>
<li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>alpine</code>)</li>
<li>–£–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤</li>
<li>–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å root –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</li>
<li>–ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—ë–≤</li>
<li>–£–¥–∞–ª—è—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤</li>
<li>–ù–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –æ–±—Ä–∞–∑–∞—Ö</li>
<li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>USER</code> –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</li>
<li>–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ö–æ—Å—Ç—É (AppArmor, seccomp, read-only FS)</li>
</ul>
<h3 id="docker_5">–°–µ—Ç–µ–≤—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã Docker</h3>
<ul>
<li><strong>bridge</strong> ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è —Å–µ—Ç—å, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–π –ø–æ–¥—Å–µ—Ç–∏, –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π bridge-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</li>
<li><strong>host</strong> ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —Ö–æ—Å—Ç–∞</li>
<li><strong>macvlan</strong> ‚Äî –∫–∞–∂–¥–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π MAC-–∞–¥—Ä–µ—Å, –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ç–∏</li>
<li><strong>overlay</strong> ‚Äî —Å–µ—Ç—å –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ö–æ—Å—Ç–∞–º–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Swarm)</li>
<li><strong>swarm</strong> ‚Äî –∫–ª–∞—Å—Ç–µ—Ä–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ Swarm-—Ä–µ–∂–∏–º–µ</li>
</ul>
<h3 id="arg-env">–í —á–µ–º –æ—Ç–ª–∏—á–∏–µ ARG –æ—Ç ENV?</h3>
<p><strong>ENV</strong>¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.</p>
<p><strong>ARG</strong>¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–∫–∏–Ω—É—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏. –ù–æ –æ–Ω–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –û–¥–Ω–∞–∫–æ —á–µ—Ä–µ–∑¬†<code>ARG</code>¬†–º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è¬†<code>ENV</code></p>
<h3 id="docker_6">üß± –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–ª–æ–∏ –≤ Docker</h3>
<p>Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç <strong>–º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É (Union FS)</strong> ‚Äî —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π RUN, COPY, ADD —Å–æ–∑–¥–∞—ë—Ç <strong>–æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π</strong>, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö.</p>
<p><strong>‚úîÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:</strong></p>
<p>‚Ä¢ –ö–∞–∂–¥—ã–π —Å–ª–æ–π <strong>–Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π (immutable)</strong>.
‚Ä¢ –ù–æ–≤—ã–π —Å–ª–æ–π <strong>—Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ</strong> –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–ª–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–∞–π–ª—ã.
‚Ä¢ –ò—Ç–æ–≥–æ–≤—ã–π –æ–±—Ä–∞–∑ ‚Äî —ç—Ç–æ <strong>stack —Å–ª–æ—ë–≤</strong>:</p>
<pre><code>FROM python:3.10      # –±–∞–∑–æ–≤—ã–π —Å–ª–æ–π
RUN apt install curl  # + –Ω–æ–≤—ã–π —Å–ª–æ–π —Å curl
COPY . /app           # + —Å–ª–æ–π —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
</code></pre>
<hr />
<p><strong>üîó –ì–¥–µ —Ç—É—Ç —Ö–∞—Ä–¥–ª–∏–Ω–∫–∏ –∏ —Å–∏–º–ª–∏–Ω–∫–∏?</strong></p>
<p><strong>‚öôÔ∏è –ü—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–∞:</strong></p>
<p>‚Ä¢ Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç <strong>copy-on-write</strong> –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å <strong>—Ö–∞—Ä–¥–ª–∏–Ω–∫–∏</strong> –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ö–æ—Å—Ç–æ–≤–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, OverlayFS).</p>
<p>‚Ä¢ –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç <strong>—ç–∫–æ–Ω–æ–º–∏—Ç—å –¥–∏—Å–∫</strong> ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã <strong>–Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è</strong>, –∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ inode.</p>
<hr />
<p><strong>üß∑ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Ö–∞—Ä–¥–ª–∏–Ω–∫–∞–º–∏ –∏ —Å–∏–º–ª–∏–Ω–∫–∞–º–∏:</strong></p>
<table>
<thead>
<tr>
<th><strong>–¢–∏–ø —Å—Å—ã–ª–∫–∏</strong></th>
<th><strong>–•–∞—Ä–¥–ª–∏–Ω–∫</strong></th>
<th><strong>–°–∏–º–ª–∏–Ω–∫</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>–ß—Ç–æ —Å—Å—ã–ª–∞–µ—Ç—Å—è</td>
<td>–ù–∞ inode (—Å–∞–º —Ñ–∞–π–ª)</td>
<td>–ù–∞ –ø—É—Ç—å (–∏–º—è —Ñ–∞–π–ª–∞)</td>
</tr>
<tr>
<td>–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª–∞</td>
<td>–§–∞–π–ª –æ—Å—Ç–∞—ë—Ç—Å—è</td>
<td>–°—Å—ã–ª–∫–∞ ‚Äú–±–∏—Ç–∞—è‚Äù</td>
</tr>
<tr>
<td>–í–∏–¥–Ω–∞ –≤ ls -li</td>
<td>–î–∞, –∏–º–µ–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π inode</td>
<td>–ù–µ—Ç, —Å–≤–æ–π inode</td>
</tr>
<tr>
<td>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Docker</td>
<td>–î–∞, –Ω–æ <strong>–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ</strong>, –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–ª–æ—ë–≤</td>
<td>–ò–Ω–æ–≥–¥–∞ –≤ COPY –∏–ª–∏ –≤—Ä—É—á–Ω—É—é</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>üìÅ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏–º–ª–∏–Ω–∫–æ–≤ –≤ Docker</strong></p>
<pre><code>RUN ln -s /usr/bin/python3 /usr/bin/python
</code></pre>
<p>‚Ä¢ –°–æ–∑–¥–∞—ë—Ç—Å—è —Å–∏–º–ª–∏–Ω–∫ –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–∑–∞.</p>
<p>‚Ä¢ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø—É—Ç—å, –Ω–æ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞.</p>
<hr />
<h4 id="_41">üß† –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏</h4>
<p>–¢—ã –º–æ–∂–µ—à—å —Å–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:</p>
<blockquote>
<p>Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–æ–∏—Å—Ç—É—é —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –≥–¥–µ –∫–∞–∂–¥—ã–π —Å–ª–æ–π —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ª–æ—ë–≤. –ù–∞ —É—Ä–æ–≤–Ω–µ —Å–∏—Å—Ç–µ–º—ã, Docker –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–∞—Ä–¥–ª–∏–Ω–∫–∏ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏, —á—Ç–æ–±—ã —ç–∫–æ–Ω–æ–º–∏—Ç—å –¥–∏—Å–∫ –∏ —É—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É. –°–∏–º–ª–∏–Ω–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–∑–æ–≤, –Ω–æ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –∫—ç—à —Å–ª–æ—ë–≤ –Ω–∞–ø—Ä—è–º—É—é.</p>
</blockquote>
<hr />
<p><strong>üí° –•–∏–Ω—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:</strong></p>
<p>–ß—Ç–æ–±—ã <strong>–∫—ç—à Docker —Ä–∞–±–æ—Ç–∞–ª —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ</strong>, –Ω—É–∂–Ω–æ:</p>
<p>‚Ä¢ –°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt) ‚Üí –ø–æ—Ç–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏.</p>
<p>‚Ä¢ –û–±—ä–µ–¥–∏–Ω—è—Ç—å RUN-–∫–æ–º–∞–Ω–¥—ã.</p>
<p>‚Ä¢ –£–¥–∞–ª—è—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Å–ª–æ—è.</p>
<p>–•–æ—á–µ—à—å, –ø–æ–∫–∞–∂—É –ø—Ä–∏–º–µ—Ä Dockerfile –¥–æ –∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å —É—á—ë—Ç–æ–º —Å–ª–æ—ë–≤ –∏ –∫—ç—à–∞?</p>
<hr />
<h2 id="bash">Bash</h2>
<h3 id="access-csv-timestamp-status-url-user-agent">–û–±—Ä–∞–±–æ—Ç–∫–∞ access –ª–æ–≥–æ–≤ (CSV): timestamp, status, url, user-agent</h3>
<h4 id="url">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö URL:</h4>
<pre><code class="language-bash">cut -d',' -f3 access.csv | sort | uniq | wc -l
</code></pre>
<h4 id="url_1">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π URL:</h4>
<pre><code class="language-bash">cut -d',' -f3 access.csv | sort | uniq -c | sort -nr
</code></pre>
<h4 id="400-404-url">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ 400-404 –ø–æ –∫–∞–∂–¥–æ–º—É URL:</h4>
<pre><code class="language-bash">awk -F',' '$2 ~ /^40[0-4]$/ {print $3}' access.csv | sort | uniq -c | sort -nr
</code></pre>
<h3 id="set-eu-o-pipefail">–ß—Ç–æ –¥–µ–ª–∞–µ—Ç <code>set -eu -o pipefail</code>?</h3>
<p>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ bash-—Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏:
- <code>set -e</code> ‚Äî –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç, –µ—Å–ª–∏ –ª—é–±–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π.
- <code>set -u</code> ‚Äî –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–æ–±—ä—è–≤–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è.
- <code>set -o pipefail</code> ‚Äî –µ—Å–ª–∏ –æ–¥–Ω–∞ –∏–∑ –∫–æ–º–∞–Ω–¥ –≤ –ø–∞–π–ø–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π, —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.
- <code>set -x</code> (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ) ‚Äî –≤—ã–≤–æ–¥–∏—Ç –∫–æ–º–∞–Ω–¥—ã –≤ stdout –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏).</p>
<h3 id="50">–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É –Ω–∞ 50 —Å–µ—Ä–≤–µ—Ä–∞—Ö?</h3>
<p><strong>–í–∞—Ä–∏–∞–Ω—Ç—ã:</strong>
- –° –ø–æ–º–æ—â—å—é <code>ssh</code> –≤ —Ü–∏–∫–ª–µ:</p>
<pre><code class="language-bash">for host in $(cat hosts.txt); do
  ssh user@$host '–∫–æ–º–∞–Ω–¥–∞' &amp;
done
wait
</code></pre>
<ul>
<li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>pssh</code> (parallel-ssh):</li>
</ul>
<pre><code class="language-bash">pssh -h hosts.txt -l user -i '–∫–æ–º–∞–Ω–¥–∞'
</code></pre>
<ul>
<li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Ansible:</li>
</ul>
<pre><code class="language-bash">ansible all -i hosts.ini -m shell -a '–∫–æ–º–∞–Ω–¥–∞'
</code></pre>
<ul>
<li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>tmux</code>, <code>dsh</code>, <code>fabric</code> –∏ –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–∞—Å—Å–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.</li>
</ul>
<h2 id="_42">–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏</h2>
<h3 id="_43">–ó–∞—á–µ–º –Ω—É–∂–Ω—ã?</h3>
<ul>
<li>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏</li>
<li>–í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å</li>
<li>–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</li>
</ul>
<h3 id="nginx">Nginx</h3>
<h4 id="-">–û—à–∏–±–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞–º</h4>
<ul>
<li><strong>5xx</strong> ‚Äî –æ—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 500)</li>
<li><strong>4xx</strong> ‚Äî –æ—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 400, 404, 413 ‚Äî –ø—Ä–µ–≤—ã—à–µ–Ω —Ä–∞–∑–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞)</li>
</ul>
<h4 id="http-">HTTP-–º–µ—Ç–æ–¥—ã, –∏–∑–º–µ–Ω—è—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</h4>
<ul>
<li><code>POST</code>, <code>PUT</code>, <code>DELETE</code></li>
</ul>
<h4 id="nginx-c10k">–ö–∞–∫ Nginx —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É C10K?</h4>
<p>–ó–∞ —Å—á—ë—Ç —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
- –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –º–æ–¥–µ–ª—å
- master + –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–∞—è –º–æ–¥–µ–ª—å workers
- –∫–∞–∂–¥—ã–π worker ‚Äî –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—ã—Å—è—á–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Apache)</p>
<h4 id="_44">–í–∞–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h4>
<pre><code class="language-nginx">worker_processes auto;
worker_connections 1024;
# max_clients = worker_processes * worker_connections
</code></pre>
<h4 id="location">–ö–∞–∫ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è location?</h4>
<p>–ü–æ—Ä—è–¥–æ–∫:
1. <code>=</code> ‚Äî —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
2. <code>^~</code> ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å
3. <code>~</code> / <code>~*</code> ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (—É—á–∏—Ç—ã–≤–∞–µ—Ç/–Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä)
4. –ë–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è</p>
<h4 id="location_1">–ö–∞–∫ –¥–µ–±–∞–∂–∏—Ç—å location?</h4>
<ul>
<li>–õ–æ–≥–∏: <code>access.log</code>, <code>error.log</code></li>
<li>–í—Ä–µ–º–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ <code>return</code>, <code>add_header</code></li>
<li>–ö–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞</li>
<li>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ URI –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ–º–æ–≥–æ –ø—É—Ç–∏</li>
</ul>
<h4 id="_45">–ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?</h4>
<p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ <code>localhost:3000</code>) —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π URL –∑–∞–ø—Ä–æ—Å–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ø—É—Ç—å (<code>X-Forwarded-For</code>, <code>X-Real-IP</code>, <code>Host</code>)</p>
<h4 id="nginx-apache">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Nginx –ø–µ—Ä–µ–¥ Apache</h4>
<ul>
<li>–õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ—Ç–¥–∞—á–µ —Å—Ç–∞—Ç–∏–∫–∏ (x2.5)</li>
<li>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (event loop –ø—Ä–æ—Ç–∏–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)</li>
<li>–ú–µ–Ω—å—à–µ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏</li>
<li>–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ frontend –ø—Ä–æ–∫—Å–∏ –∫ Apache/php-fpm –∏ –¥—Ä.</li>
</ul>
<h4 id="_46">–ú–æ–≥—É—Ç –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ?</h4>
<p>–î–∞. –ü—Ä–∏–º–µ—Ä —Å–≤—è–∑–∫–∏:
- Nginx ‚Äî —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, –æ—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É, –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç
- Apache ‚Äî –±—ç–∫–µ–Ω–¥, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É</p>
<h3 id="haproxy">HAProxy</h3>
<ul>
<li>–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π L4/L7-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫</li>
<li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ TCP –∏ HTTP</li>
<li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ ACL, health checks, sticky sessions</li>
<li>–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∫–∞–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±–∞–ª–∞–Ω—Å–µ—Ä</li>
</ul>
<h3 id="envoy">Envoy</h3>
<ul>
<li>–ü—Ä–æ–∫—Å–∏ –∏ —Å–µ—Ä–≤–∏—Å-–º–µ—à –æ—Ç Lyft</li>
<li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTTP/2, gRPC, TLS termination</li>
<li>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Istio</li>
<li>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</li>
</ul>
<h3 id="google-cloud-load-balancer">Google Cloud Load Balancer</h3>
<ul>
<li>–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ L4 –∏ L7</li>
<li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ Anycast IP</li>
<li>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Cloud CDN, Cloud Armor</li>
<li>–£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ GCP Console –∏–ª–∏ <code>gcloud</code></li>
</ul>
<h3 id="aws-load-balancers">AWS Load Balancers</h3>
<h4 id="classic-load-balancer-clb">Classic Load Balancer (CLB)</h4>
<ul>
<li>–£—Å—Ç–∞—Ä–µ–≤—à–∏–π, L4/L7</li>
</ul>
<h4 id="application-load-balancer-alb">Application Load Balancer (ALB)</h4>
<ul>
<li>L7 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (HTTP/HTTPS)</li>
<li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ path-based, host-based routing</li>
</ul>
<h4 id="network-load-balancer-nlb">Network Load Balancer (NLB)</h4>
<ul>
<li>L4 –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (TCP/UDP)</li>
<li>–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏ –Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞</li>
</ul>
<p>–û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å Auto Scaling –∏ ECS/EKS</p>
<h2 id="vs-">–ü—Ä–æ–∫—Å–∏ vs –†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏</h2>
<h3 id="forward-proxy">–ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–∫—Å–∏ (forward proxy)?</h3>
<p>–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–µ–π—Å—Ç–≤—É–µ—Ç –æ—Ç –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞:
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–µ –Ω–∞–ø—Ä—è–º—É—é –∫ —Ü–µ–ª–µ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É, –∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏.
- –ü—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –∫–ª–∏–µ–Ω—Ç—É.
- –ü—Ä–∏–º–µ—Ä: —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ñ–∏—Å–∞ –≤—ã—Ö–æ–¥–∏—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —á–µ—Ä–µ–∑ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä.</p>
<p><strong>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:</strong>
- –ö–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ê–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–∏
- –û–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫</p>
<h3 id="-reverse-proxy">–ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ (reverse proxy)?</h3>
<p>–†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ –¥–µ–π—Å—Ç–≤—É–µ—Ç –æ—Ç –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–µ—Ä–∞:
- –ö–ª–∏–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–¥–∏–Ω –ø—É–±–ª–∏—á–Ω—ã–π –∞–¥—Ä–µ—Å.
- –†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –æ–¥–Ω–æ–º—É –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.
- –û—Ç–≤–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É –æ—Ç –∏–º–µ–Ω–∏ –ø—Ä–æ–∫—Å–∏.</p>
<p><strong>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:</strong>
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
- SSL termination
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ó–∞—â–∏—Ç—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤</p>
<h3 id="_47">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ</h3>
<table>
<thead>
<tr>
<th>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞</th>
<th>–ü—Ä–æ–∫—Å–∏</th>
<th>–†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏</th>
</tr>
</thead>
<tbody>
<tr>
<td>–†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∫–æ–≥–æ?</td>
<td>–û—Ç –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞</td>
<td>–û—Ç –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–µ—Ä–∞</td>
</tr>
<tr>
<td>–ö—Ç–æ –∑–Ω–∞–µ—Ç –æ –Ω—ë–º?</td>
<td>–ö–ª–∏–µ–Ω—Ç</td>
<td>–°–µ—Ä–≤–µ—Ä (–∞ –∫–ª–∏–µ–Ω—Ç ‚Äî –Ω–µ—Ç)</td>
</tr>
<tr>
<td>–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞</td>
<td>–î–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–∏–º —Ä–µ—Å—É—Ä—Å–∞–º</td>
<td>–ó–∞—â–∏—Ç–∞ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Ä–µ—Å—É—Ä—Å–∞–º</td>
</tr>
<tr>
<td>–ü—Ä–∏–º–µ—Ä</td>
<td>Squid</td>
<td>Nginx, HAProxy, Envoy</td>
</tr>
<tr>
<td>## Kubernetes</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="architecture"><strong>Architecture</strong></h3>
<p>Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: <strong>Control Plane</strong> (–ø–ª–æ—Å–∫–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è) –∏ <strong>Worker Nodes</strong> (—Ä–∞–±–æ—á–∏–µ —É–∑–ª—ã). –≠—Ç–∏ —á–∞—Å—Ç–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤.</p>
<ul>
<li>
<p><strong>Control Plane</strong> ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–º. –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ Pod‚Äô–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî –∂–µ–ª–∞–µ–º–æ–º—É. –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:</p>
<ul>
<li><strong>kube-apiserver</strong> ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ REST-–∑–∞–ø—Ä–æ—Å—ã (kubectl, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ —Ç.–¥.), –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏—Ö –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ API.</li>
<li><strong>etcd</strong> ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ key-value —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –≥–¥–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞: –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–µ–∫—Ä–µ—Ç—ã –∏ –¥—Ä.</li>
<li><strong>kube-scheduler</strong> ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω–∞ –∫–∞–∫–∏–µ –Ω–æ–¥—ã —Ä–∞–∑–º–µ—â–∞—Ç—å –Ω–æ–≤—ã–µ Pod‚Äô—ã, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö –∏ –∑–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö.</li>
<li><strong>kube-controller-manager</strong> ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ (Deployment, ReplicaSet, Node –∏ –¥—Ä.), —Å–ª–µ–¥—è –∑–∞ —Ç–µ–º, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∂–µ–ª–∞–µ–º–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é.</li>
<li><em>(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</em> <strong>cloud-controller-manager</strong> ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å API –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, AWS –∏–ª–∏ GCP), —É–ø—Ä–∞–≤–ª—è—è —Ç–∞–∫–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏, –∫–∞–∫ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏, –º–∞—Ä—à—Ä—É—Ç—ã –∏ –¥–∏—Å–∫–∏.</li>
</ul>
</li>
<li>
<p><strong>Worker Nodes</strong> ‚Äî —ç—Ç–æ —É–∑–ª—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. –ö–∞–∂–¥—ã–π node –≤–∫–ª—é—á–∞–µ—Ç:</p>
<ul>
<li><strong>kubelet</strong> ‚Äî –∞–≥–µ–Ω—Ç, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–∏–π —Å API Server –∏ –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –∑–∞–ø—É—Å–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Pod‚Äô–æ–≤ –Ω–∞ —É–∑–ª–µ.</li>
<li><strong>container runtime</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, containerd, cri-o) ‚Äî –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.</li>
<li><strong>kube-proxy</strong> ‚Äî –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–µ—Ç–µ–≤—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É Pod‚Äô–∞–º–∏ –∏ –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—è –ø—Ä–∞–≤–∏–ª–∞ iptables/ipvs.</li>
</ul>
</li>
</ul>
<p>–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, <strong>Control Plane</strong> —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–æ–º –∫–∞–∫ —Å–∏—Å—Ç–µ–º–æ–π, –∞ <strong>Worker Nodes</strong> –∏—Å–ø–æ–ª–Ω—è—é—Ç —Ä–∞–±–æ—á–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã), –ø–æ–¥—á–∏–Ω—è—è—Å—å —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º –∏ —Ä–µ—à–µ–Ω–∏—è–º.</p>
<hr />
<h4 id="kubectl-apply">–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ <code>kubectl apply</code></h4>
<ol>
<li>üí¨ –ö–ª–∏–µ–Ω—Ç <code>kubectl</code> —Å—á–∏—Ç—ã–≤–∞–µ—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç:</li>
</ol>
<p><code>bash
   kubectl apply -f my-deployment.yaml</code></p>
<p>–°—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è YAML-—Ñ–∞–π–ª, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Deployment, Service –∏ —Ç.–¥.)</p>
<ol>
<li>üì§ <code>kubectl</code> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ API Server:</li>
</ol>
<p>–ú–∞–Ω–∏—Ñ–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ HTTP-–∑–∞–ø—Ä–æ—Å –∫ <strong>API Server</strong> ‚Äî —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ Kubernetes.</p>
<ol>
<li>
<p>üîç API Server —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∏ –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:</p>
</li>
<li>
<p>API Server –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –æ–±—ä–µ–∫—Ç —É–∂–µ –≤ <code>etcd</code> (—á–µ—Ä–µ–∑ —Å–≤–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–ª–æ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è).</p>
</li>
<li>–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç <strong>—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</strong> ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è <strong>\"patch\"</strong> (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ), —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è.</li>
<li>–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç–∞ <strong>–µ—â—ë –Ω–µ—Ç</strong> ‚Äî –æ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –Ω—É–ª—è.</li>
</ol>
<blockquote>
<p><code>kubectl apply</code> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç <strong>\"server-side apply\"</strong> –∏–ª–∏ <strong>\"client-side apply\"</strong> (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Ä—Å–∏–∏ –∏ —Ñ–ª–∞–≥–æ–≤) ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –≤—ã—á–∏—Å–ª–∏—Ç—å, –∫–∞–∫–∏–µ –ø–æ–ª—è –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å.</p>
</blockquote>
<ol>
<li>üì¶ <code>etcd</code> –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:</li>
</ol>
<p>API Server —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ <strong>etcd</strong> ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π key-value –±–∞–∑–µ.</p>
<ol>
<li>‚öôÔ∏è –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –ø—Ä–∏–≤–æ–¥—è—Ç –∫–ª–∞—Å—Ç–µ—Ä –∫ –Ω—É–∂–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é:</li>
</ol>
<p>–ï—Å–ª–∏ –ø—Ä–∏–º–µ–Ω—ë–Ω –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ <code>Deployment</code>:
   - <strong>Deployment Controller</strong> –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.
   - –°–æ–∑–¥–∞—ë—Ç –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç <strong>ReplicaSet</strong>.
   - ReplicaSet —Å–æ–∑–¥–∞—ë—Ç –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç <strong>Pod'—ã</strong>.</p>
<ol>
<li>üîÅ Scheduler —Ä–∞–∑–º–µ—â–∞–µ—Ç –Ω–æ–≤—ã–µ Pod'—ã:</li>
</ol>
<p>–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ Pod'—ã:
   - <strong>Scheduler</strong> –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π <strong>Worker Node</strong>.
   - –ù–∞–∑–Ω–∞—á–∞–µ—Ç Pod –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —É–∑–µ–ª.</p>
<ol>
<li>üß© Kubelet –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:</li>
</ol>
<p>–ù–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–æ–¥–µ:
   - <strong>Kubelet</strong> –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ—Ç API Server.
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —á–µ—Ä–µ–∑ <strong>Container Runtime</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, containerd, cri-o, Docker).</p>
<ol>
<li>üåê Kube Proxy –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–µ—Ç—å:</li>
</ol>
<p>–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–µ—Ä–≤–∏—Å –∏–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ —Å–µ—Ç–∏:
   - <strong>Kube Proxy</strong> –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (iptables/ipvs).
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ Pod'–∞–º –ø–æ —Å–µ—Ä–≤–∏—Å—É.</p>
<h3 id="qos-pod-quality-of-service-classes">QOS (Pod Quality of Service Classes)</h3>
<p>QoS-–∫–ª–∞—Å—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç Pod‚Äô–∞ –ø—Ä–∏ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–∏ (eviction), –∞ —Ç–∞–∫–∂–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Å–ª—É—á–∞–µ –¥–∞–≤–ª–µ–Ω–∏—è –ø–æ CPU/–ø–∞–º—è—Ç–∏.
(QoS) –≤ Kubernetes ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, –∫–∞–∫ kubelet —É–ø—Ä–∞–≤–ª—è–µ—Ç Pod-–∞–º–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤.</p>
<p>–í Kubernetes –µ—Å—Ç—å <strong>—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ QoS</strong>:</p>
<h4 id="1-guaranteed">1. Guaranteed</h4>
<p>‚úÖ <strong>–ù–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –≤—ã—Ç–µ—Å–Ω—è–µ—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å.</strong></p>
<p><strong>–£—Å–ª–æ–≤–∏—è:</strong></p>
<p>‚Ä¢ <strong>–î–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ Pod-–µ –∑–∞–¥–∞–Ω—ã requests –∏ limits, –∏ –æ–Ω–∏ —Ä–∞–≤–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥—É.</strong></p>
<pre><code>resources:
  requests:
    memory: &quot;512Mi&quot;
    cpu: &quot;500m&quot;
  limits:
    memory: &quot;512Mi&quot;
    cpu: &quot;500m&quot;
</code></pre>
<blockquote>
<p>–¢–∞–∫–æ–π Pod –ø–æ–ª—É—á–∞–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—É—Å–æ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –∑–∞—â–∏—â—ë–Ω –æ—Ç –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è –ø—Ä–∏ OOM (Out of Memory) –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ.</p>
</blockquote>
<h4 id="2-burstable">2. Burstable</h4>
<p>‚ö†Ô∏è <strong>–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.</strong></p>
<p><strong>–£—Å–ª–æ–≤–∏—è:</strong></p>
<p>‚Ä¢ –£ <strong>–Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤</strong> –∑–∞–¥–∞–Ω—ã requests, –∏:</p>
<p>‚Ä¢ –ª–∏–±–æ –æ–Ω–∏ <strong>–Ω–µ —Ä–∞–≤–Ω—ã limits</strong>,</p>
<p>‚Ä¢ –ª–∏–±–æ limits –Ω–µ –∑–∞–¥–∞–Ω—ã –≤–æ–≤—Å–µ.</p>
<pre><code>resources:
  requests:
    memory: &quot;256Mi&quot;
    cpu: &quot;250m&quot;
  limits:
    memory: &quot;512Mi&quot;
    cpu: &quot;1&quot;
</code></pre>
<blockquote>
<p>–¢–∞–∫–æ–π Pod –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º (requests), –Ω–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ —É–∑–ª–µ.</p>
</blockquote>
<hr />
<h4 id="3-besteffort">3. BestEffort</h4>
<p>‚ùå <strong>–ù–∞–∏–º–µ–Ω—å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –≤—ã—Ç–µ—Å–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º.</strong></p>
<p><strong>–£—Å–ª–æ–≤–∏—è:</strong></p>
<p>‚Ä¢ –£ <strong>–Ω–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ—Ç requests –∏ limits</strong>.</p>
<pre><code>resources: {}
</code></pre>
<blockquote>
<p>–≠—Ç–æ—Ç Pod —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–Ω–∞ —É–¥–∞—á—É¬ª ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∞ —É–∑–ª–µ. –û–Ω –ø–µ—Ä–≤—ã–º –ø–æ–ø–∞–¥–∞–µ—Ç –ø–æ–¥ OOM killer.</p>
</blockquote>
<hr />
<p><strong>–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å QoS –∫–ª–∞—Å—Å —É —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ Pod?</strong></p>
<pre><code>kubectl get pod &lt;pod-name&gt; -o jsonpath='{.status.qosClass}'
</code></pre>
<h3 id="kubernetes-tolerations-affinity-labels-pod">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–µ–¥—É–ª–∏–Ω–≥–æ–º –≤ Kubernetes: Tolerations, Affinity, Labels –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ Pod'–æ–≤ –Ω–∞ –Ω–æ–¥—ã</h3>
<p>–í Kubernetes –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ Pod'–æ–≤ –Ω–∞ –Ω–æ–¥—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ <strong>scheduler</strong>. –ß—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ç–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <strong>labels</strong>, <strong>tolerations</strong>, <strong>taints</strong>, <strong>node affinity</strong>, <strong>pod affinity/anti-affinity</strong>.</p>
<h4 id="1-labels">1. Labels (–ª–µ–π–±–ª—ã)</h4>
<p><strong>–õ–µ–π–±–ª—ã</strong> ‚Äî —ç—Ç–æ –ø–∞—Ä—ã –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∫–∞–∫ Pod'–∞–º, —Ç–∞–∫ –∏ –Ω–æ–¥–∞–º. –û–Ω–∏ —Å–ª—É–∂–∞—Ç –æ—Å–Ω–æ–≤–æ–π –¥–ª—è:
- –≤—ã–±–æ—Ä–∞ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –Ω–æ–¥ (—á–µ—Ä–µ–∑ <code>nodeAffinity</code>);
- –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ <code>kubectl get pods -l app=frontend</code>);
- –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å–µ–¥—Å—Ç–≤–∞ –º–µ–∂–¥—É Pod'–∞–º–∏ (<code>podAffinity</code>, <code>antiAffinity</code>);
- –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ (<code>selector</code>).</p>
<pre><code class="language-yaml">metadata:
  labels:
    app: \&quot;frontend\&quot;
    disktype: \&quot;ssd\&quot;
</code></pre>
<h4 id="2-taints-tolerations">2. Taints –∏ Tolerations</h4>
<ul>
<li><strong>Taint</strong> ‚Äî —ç—Ç–æ –º–µ—Ç–∫–∞ –Ω–∞ –Ω–æ–¥–µ, –∫–æ—Ç–æ—Ä–∞—è <strong>–Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç</strong> —Ä–∞–∑–º–µ—â–∞—Ç—å –Ω–∞ –Ω–µ–π Pod'—ã, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ —É Pod'–∞ –Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π <strong>toleration</strong>.</li>
<li>–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –Ω–æ–¥, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, GPU-–Ω–æ–¥—ã –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ).</li>
</ul>
<pre><code class="language-bash">kubectl taint nodes my-node key=value:NoSchedule
</code></pre>
<ul>
<li>–≠—Ç–æ –∑–Ω–∞—á–∏—Ç: –Ω–µ —Ä–∞–∑–º–µ—â–∞–π Pod'—ã –Ω–∞ <code>my-node</code>, –µ—Å–ª–∏ —É –Ω–∏—Ö –Ω–µ—Ç <code>toleration</code> –¥–ª—è <code>key=value</code>.</li>
</ul>
<p><strong>–ü—Ä–∏–º–µ—Ä Toleration –≤ Pod-–º–∞–Ω–∏—Ñ–µ—Å—Ç–µ:</strong></p>
<pre><code class="language-yaml">tolerations:
  - key: \&quot;key\&quot;
    operator: \&quot;Equal\&quot;
    value: \&quot;value\&quot;
    effect: \&quot;NoSchedule\&quot;
</code></pre>
<h4 id="3-node-affinity">3. Node Affinity</h4>
<p>–ü–æ–∑–≤–æ–ª—è–µ—Ç <strong>–ø—Ä–µ–¥–ø–æ—á–µ—Å—Ç—å</strong> –∏–ª–∏ <strong>—Ç—Ä–µ–±–æ–≤–∞—Ç—å</strong> —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ Pod'–∞ –Ω–∞ –Ω–æ–¥–µ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –ª–µ–π–±–ª–∞–º–∏.</p>
<p><strong>–¢–∏–ø—ã Node Affinity:</strong>
- <code>requiredDuringSchedulingIgnoredDuringExecution</code> ‚Äî <strong>–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</strong> —É—Å–ª–æ–≤–∏–µ.
- <code>preferredDuringSchedulingIgnoredDuringExecution</code> ‚Äî <strong>–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–µ</strong>, –Ω–æ –Ω–µ —Å—Ç—Ä–æ–≥–æ–µ.</p>
<p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
<pre><code class="language-yaml">affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: \&quot;disktype\&quot;
              operator: \&quot;In\&quot;
              values:
                - \&quot;ssd\&quot;
</code></pre>
<blockquote>
<p>–≠—Ç–æ—Ç Pod –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–º–µ—â—ë–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–æ–¥–∞—Ö —Å –º–µ—Ç–∫–æ–π <code>disktype=ssd</code>.</p>
</blockquote>
<h4 id="4-pod-affinity-anti-affinity">4. Pod Affinity / Anti-Affinity</h4>
<p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º, <strong>—Ä—è–¥–æ–º —Å –∫–∞–∫–∏–º–∏ Pod'–∞–º–∏</strong> –º–æ–∂–µ—Ç (–∏–ª–∏ –Ω–µ –º–æ–∂–µ—Ç) –±—ã—Ç—å —Ä–∞–∑–º–µ—â—ë–Ω –Ω–æ–≤—ã–π Pod. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–µ–π–±–ª—ã –¥—Ä—É–≥–∏—Ö Pod'–æ–≤.</p>
<h5 id="pod-affinity">Pod Affinity (—Å–æ—Å–µ–¥—Å—Ç–≤–æ):</h5>
<pre><code class="language-yaml">affinity:
  podAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: \&quot;app\&quot;
              operator: \&quot;In\&quot;
              values:
                - \&quot;frontend\&quot;
        topologyKey: \&quot;kubernetes.io/hostname\&quot;
</code></pre>
<blockquote>
<p>–ü–æ–¥ –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â—ë–Ω –Ω–∞ —Ç–æ–π –∂–µ –Ω–æ–¥–µ, –≥–¥–µ —É–∂–µ –µ—Å—Ç—å Pod —Å –º–µ—Ç–∫–æ–π <code>app=frontend</code>.</p>
</blockquote>
<h5 id="pod-anti-affinity">Pod Anti-Affinity (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ):</h5>
<pre><code class="language-yaml">affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: \&quot;app\&quot;
              operator: \&quot;In\&quot;
              values:
                - \&quot;frontend\&quot;
        topologyKey: \&quot;kubernetes.io/hostname\&quot;
</code></pre>
<blockquote>
<p>–ü–æ–¥ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â—ë–Ω –Ω–∞ —Ç–æ–π –∂–µ –Ω–æ–¥–µ, –≥–¥–µ —É–∂–µ –µ—Å—Ç—å –¥—Ä—É–≥–æ–π <code>frontend</code> Pod.</p>
</blockquote>
<p>Kubernetes –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º Pod'–æ–≤:
- <strong>Labels</strong> ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤.
- <strong>Taints/Tolerations</strong> ‚Äî –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–∫–ª—é—á–∞—Ç—å –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ –Ω–æ–¥—ã.
- <strong>Affinity/Anti-Affinity</strong> ‚Äî –¥–∞—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –ø–æ –Ω–æ–¥–∞–º –∏ –¥—Ä—É–≥–∏–º Pod'–∞–º.</p>
<p>–ì—Ä–∞–º–æ—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —ç—Ç–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∏—Ç—å—Å—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ –∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞.</p>
<h3 id="pod-lifecycle">Pod Lifecycle</h3>
<p>–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Pod-–∞. –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∫–∞–∫ Pod-—ã —Å–æ–∑–¥–∞—é—Ç—Å—è, –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏, –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –∏ —É–¥–∞–ª—è—é—Ç—Å—è.</p>
<h4 id="pod-"><strong>üö¶ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Pod-–∞</strong></h4>
<h5 id="podphase"><strong>üìå –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (PodPhase):</strong></h5>
<p>–≠—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Å—Ç–∞–¥–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —á–µ—Ä–µ–∑ kubectl get pod.</p>
<ol>
<li><strong>Pending</strong> ‚Äî Pod –±—ã–ª –ø—Ä–∏–Ω—è—Ç API —Å–µ—Ä–≤–µ—Ä–æ–º, –Ω–æ <strong>–µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∂–¥—ë—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ –∏–ª–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–∞ –Ω–æ–¥–µ).</li>
<li><strong>Running</strong> ‚Äî —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω, –∏ Pod —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–º–µ—â—ë–Ω.</li>
<li><strong>Succeeded</strong> ‚Äî –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ (—Å –∫–æ–¥–æ–º 0), –∏ Pod –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è.</li>
<li><strong>Failed</strong> ‚Äî —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–µ—Ä—à–∏–ª—Å—è <strong>–Ω–µ—É—Å–ø–µ—à–Ω–æ</strong>, –∏ Pod –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω.</li>
<li><strong>Unknown</strong> ‚Äî kubelet <strong>–Ω–µ –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å</strong> —Å—Ç–∞—Ç—É—Å (–æ–±—ã—á–Ω–æ –∏–∑-–∑–∞ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º).</li>
</ol>
<hr />
<h5 id="containerstate"><strong>üìå –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (ContainerState)</strong></h5>
<p>–ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–Ω—É—Ç—Ä–∏ Pod-–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤:</p>
<p>‚Ä¢ <strong>Waiting</strong> ‚Äî –æ–∂–∏–¥–∞–µ—Ç –∑–∞–ø—É—Å–∫–∞. –ü—Ä–∏—á–∏–Ω—ã –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ .state.waiting.reason (–Ω–∞–ø—Ä–∏–º–µ—Ä, CrashLoopBackOff, ImagePullBackOff).</p>
<p>‚Ä¢ <strong>Running</strong> ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω.</p>
<p>‚Ä¢ <strong>Terminated</strong> ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–µ—Ä—à–∏–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–ø–æ exit code –∏–ª–∏ —Å–∏–≥–Ω–∞–ª—É).</p>
<p>–ü—Ä–∏–º–µ—Ä:</p>
<pre><code>kubectl get pod mypod -o jsonpath='{.status.containerStatuses[*].state}'
</code></pre>
<hr />
<h4 id="restart-policy">üîÅ Restart Policy</h4>
<p>–£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ Pod-–∞. –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:</p>
<p>‚Ä¢ Always (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Deployment)</p>
<p>‚Ä¢ OnFailure (–¥–ª—è Job)</p>
<p>‚Ä¢ Never</p>
<blockquote>
<p>–≠—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, –±—É–¥–µ—Ç –ª–∏ kubelet –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ —Å–±–æ–µ.</p>
</blockquote>
<hr />
<p><strong>üîÑ Container Lifecycle Hooks</strong></p>
<p>–ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π:</p>
<pre><code>lifecycle:
  postStart:
    exec:
      command: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo Hello from postStart&quot;]
  preStop:
    exec:
      command: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo Goodbye from preStop&quot;]
</code></pre>
<p>‚Ä¢ <strong>postStart</strong> ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è <strong>–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</strong>, –Ω–æ –¥–æ –µ–≥–æ marked as Running.
‚Ä¢ <strong>preStop</strong> ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è <strong>–¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ kubectl delete pod –∏–ª–∏ Scale down).</p>
<hr />
<h4 id="termination-grace-period">‚è± Termination Grace Period</h4>
<p>‚Ä¢ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: <strong>30 —Å–µ–∫—É–Ω–¥</strong>.</p>
<p>‚Ä¢ Kubernetes –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SIGTERM, –∂–¥—ë—Ç terminationGracePeriodSeconds, –∑–∞—Ç–µ–º ‚Äî SIGKILL.</p>
<pre><code>terminationGracePeriodSeconds: 10
</code></pre>
<hr />
<p><strong>üìâ Final Pod Termination Flow</strong></p>
<ol>
<li>kubelet –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SIGTERM –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º.</li>
<li>–ñ–¥—ë—Ç terminationGracePeriodSeconds.</li>
<li>–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è preStop hook (–µ—Å–ª–∏ –µ—Å—Ç—å).</li>
<li>–ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî SIGKILL.</li>
<li>Pod —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ etcd (–µ—Å–ª–∏ –±–µ–∑ finalizer).</li>
</ol>
<h3 id="prestop-finalizer">preStop &amp;&amp; finalizer</h3>
<p>–ò–Ω–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç –ø–æ—Ö–æ–∂–∏–µ –∑–∞–¥–∞—á–∏ (—á—Ç–æ-—Ç–æ ‚Äú–ø–æ—á–∏—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º‚Äù), –Ω–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è –ø–æ-—á–µ—Å—Ç–Ω–æ–º—É, –±–µ–∑ –≤–æ–¥—ã:</p>
<hr />
<p><strong>üîÅ –ö—Ä–∞—Ç–∫–æ: —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É preStop –∏ finalizer</strong></p>
<table>
<thead>
<tr>
<th></th>
<th><strong>preStop hook</strong></th>
<th><strong>finalizer</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>–£—Ä–æ–≤–µ–Ω—å</strong></td>
<td>–£—Ä–æ–≤–µ–Ω—å <strong>–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</strong> –≤–Ω—É—Ç—Ä–∏ Pod-–∞</td>
<td>–£—Ä–æ–≤–µ–Ω—å <strong>Kubernetes-–æ–±—ä–µ–∫—Ç–∞</strong> (Pod, PVC, CRD –∏ —Ç.–ø.)</td>
</tr>
<tr>
<td><strong>–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è</strong></td>
<td>–ü–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, SIGTERM)</td>
<td>–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞, <strong>–Ω–æ –¥–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è</strong></td>
</tr>
<tr>
<td><strong>–ö—Ç–æ –∏—Å–ø–æ–ª–Ω—è–µ—Ç</strong></td>
<td><strong>kubelet</strong> –Ω–∞ –Ω–æ–¥–µ</td>
<td>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–≤–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä/–≤–Ω–µ—à–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å)</td>
</tr>
<tr>
<td><strong>–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω</strong></td>
<td>–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ (–Ω–∞–ø—Ä., –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)</td>
<td>–í—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É: —É–¥–∞–ª–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã, –ø–æ—á–∏—Å—Ç–∏—Ç—å —Å–≤—è–∑–∏</td>
</tr>
<tr>
<td><strong>–ú–æ–∂–Ω–æ –ª–∏ ‚Äú–∑–∞–≤–∏—Å–Ω—É—Ç—å‚Äù</strong></td>
<td>–ù–µ—Ç ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω terminationGracePeriod</td>
<td>–î–∞ ‚Äî –ø–æ–∫–∞ –Ω–µ —É–¥–∞–ª–∏—à—å finalizer, –æ–±—ä–µ–∫—Ç –Ω–µ —É–¥–∞–ª–∏—Ç—Å—è</td>
</tr>
<tr>
<td><strong>–†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ kill -9?</strong></td>
<td>‚ùå –ù–µ—Ç ‚Äî SIGKILL –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç preStop</td>
<td>‚úÖ –î–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ finalizer –≤—ã—à–µ –ø–æ —É—Ä–æ–≤–Ω—é</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="_48">üîç –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤</h4>
<p><strong>preStop:</strong></p>
<p>‚Ä¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ 100 –∫–ª–∏–µ–Ω—Ç–æ–≤ –∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É. preStop –º–æ–∂–µ—Ç:</p>
<p>‚Ä¢ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é: ¬´–∑–∞–≤–µ—Ä—à–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è¬ª;</p>
<p>‚Ä¢ –¥–æ–∂–¥–∞—Ç—å—Å—è 10 —Å–µ–∫—É–Ω–¥;</p>
<p>‚Ä¢ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å–∞–º.</p>
<pre><code>lifecycle:
  preStop:
    exec:
      command: [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo 'shutting down' &gt;&gt; /log&quot;]
</code></pre>
<blockquote>
<p>–≠—Ç–æ <strong>–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ</strong>, –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞.</p>
</blockquote>
<hr />
<p><strong>finalizer:</strong></p>
<p>‚Ä¢ –£ —Ç–µ–±—è Pod, –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω—É–∂–Ω–æ <strong>—É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å –∏–∑ –≤–Ω–µ—à–Ω–µ–π –ë–î</strong>, <strong>–æ—Å–≤–æ–±–æ–¥–∏—Ç—å IP-–∞–¥—Ä–µ—Å</strong>, <strong>—É–≤–µ–¥–æ–º–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è</strong>.</p>
<p>‚Ä¢ –≠—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å –∏–∑–Ω—É—Ç—Ä–∏ Pod-–∞, —Ç—ã —Ö–æ—á–µ—à—å –¥–µ–ª–∞—Ç—å —ç—Ç–æ <strong>–≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ</strong>.</p>
<pre><code>metadata:
  finalizers:
    - cleanup.mycompany.com
</code></pre>
<blockquote>
<p>–ü–æ–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ —É–±–µ—Ä—ë—Ç —ç—Ç–æ—Ç finalizer ‚Äî Pod –Ω–µ —É–¥–∞–ª–∏—Ç—Å—è.</p>
</blockquote>
<hr />
<p><strong>üéØ –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏</strong></p>
<table>
<thead>
<tr>
<th><strong>–í–æ–ø—Ä–æ—Å</strong></th>
<th><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>–ù—É–∂–Ω–æ <strong>—á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–µ–¥ –µ–≥–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π</strong>?</td>
<td>‚úÖ preStop</td>
</tr>
<tr>
<td>–ù—É–∂–Ω–æ <strong>—É–¥–∞–ª–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π —Ä–µ—Å—É—Ä—Å –∏–ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ ‚Äú–ø–æ–ø—Ä–æ—â–∞—Ç—å—Å—è‚Äù —Å –æ–±—ä–µ–∫—Ç–æ–º –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞</strong>?</td>
<td>‚úÖ finalizer</td>
</tr>
</tbody>
</table>
<h3 id="probes">ü©∫ Probes</h3>
<p><strong>Probes</strong> ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ Kubernetes –≤—ã–ø–æ–ª–Ω—è–µ—Ç, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å:</p>
<p>‚Ä¢ <strong>–∂–∏–≤ –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (livenessProbe)</strong></p>
<p>‚Ä¢ <strong>–≥–æ—Ç–æ–≤ –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ (readinessProbe)</strong></p>
<p>‚Ä¢ <strong>–∑–∞–ø—É—Å—Ç–∏–ª—Å—è –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (startupProbe)</strong></p>
<p>–û–Ω–∏ –ø–æ–º–æ–≥–∞—é—Ç kubelet –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è:</p>
<p>‚Ä¢ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä?</p>
<p>‚Ä¢ –ù–∞—á–∞—Ç—å –ª–∏ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ –Ω–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫?</p>
<p>‚Ä¢ –ü–æ–¥–æ–∂–¥–∞—Ç—å –ª–∏ –ø–æ–¥–æ–ª—å—à–µ, –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å —Å—Ç–∞—Ä—Ç—É–µ—Ç –¥–æ–ª–≥–æ?</p>
<hr />
<h4 id="1-livenessprobe">üîç 1. livenessProbe</h4>
<blockquote>
<p><strong>‚Äú–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å? –ù–∞–¥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å.‚Äù</strong></p>
</blockquote>
<p>–ï—Å–ª–∏ livenessProbe –Ω–µ—É–¥–∞—á–Ω–∞ ‚Äî <strong>kubelet –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</strong>.</p>
<p>–ü—Ä–∏–º–µ—Ä:</p>
<pre><code>livenessProbe:
  httpGet:
    path: /healthz
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 10
</code></pre>
<hr />
<h4 id="2-readinessprobe">üïí 2. readinessProbe</h4>
<blockquote>
<p><strong>‚Äú–ì–æ—Ç–æ–≤ –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã?‚Äù</strong></p>
</blockquote>
<p>–ï—Å–ª–∏ readinessProbe –Ω–µ—É–¥–∞—á–Ω–∞ ‚Äî Pod <strong>–≤—ã–≤–æ–¥–∏—Ç—Å—è –∏–∑ service endpoints</strong> (–Ω–∞ –Ω–µ–≥–æ –Ω–µ –±—É–¥–µ—Ç –∏–¥—Ç–∏ —Ç—Ä–∞—Ñ–∏–∫).</p>
<p>–ü—Ä–∏–º–µ—Ä:</p>
<pre><code>readinessProbe:
  exec:
    command: [&quot;cat&quot;, &quot;/tmp/ready&quot;]
  initialDelaySeconds: 2
  periodSeconds: 5
</code></pre>
<hr />
<h4 id="3-startupprobe">üê¢ 3. startupProbe</h4>
<blockquote>
<p><strong>‚Äú–î–∞–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∑–∞–ø—É—Å–∫ ‚Äî –Ω–µ —É–±–∏–≤–∞–π –µ–≥–æ —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏.‚Äù</strong></p>
</blockquote>
<p>–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è <strong>–º–µ–¥–ª–µ–Ω–Ω–æ —Å—Ç–∞—Ä—Ç—É—é—â–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</strong>. –î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ startupProbe <strong>–Ω–µ –ø—Ä–æ—à–ª–∞</strong>, Kubernetes <strong>–Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç livenessProbe</strong>. –¢–æ –µ—Å—Ç—å –æ–Ω–∞ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π.</p>
<pre><code>startupProbe:
  httpGet:
    path: /startup
    port: 8080
  failureThreshold: 30
  periodSeconds: 10
</code></pre>
<blockquote>
<p>–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –¥–∞—ë—Ç—Å—è ~5 –º–∏–Ω—É—Ç –Ω–∞ –∑–∞–ø—É—Å–∫ (30 √ó 10 —Å–µ–∫—É–Ω–¥).</p>
</blockquote>
<hr />
<p><strong>üîß –¢–∏–ø—ã probe‚Äô–æ–≤:</strong></p>
<p>‚Ä¢ httpGet ‚Äî –¥–µ–ª–∞–µ—Ç HTTP GET-–∑–∞–ø—Ä–æ—Å –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ (200-399 ‚Äî —É—Å–ø–µ—Ö).</p>
<p>‚Ä¢ exec ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.</p>
<p>‚Ä¢ tcpSocket ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç TCP-–ø–æ—Ä—Ç –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å.</p>
<hr />
<p><strong>üß† –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ:</strong></p>
<table>
<thead>
<tr>
<th><strong>–ó–∞–¥–∞—á–∞</strong></th>
<th><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–≤–∏—Å—à–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</td>
<td>livenessProbe</td>
</tr>
<tr>
<td>–£–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞—Ñ–∏–∫–æ–º –∫ Pod‚Äô—É</td>
<td>readinessProbe</td>
</tr>
<tr>
<td>–î–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤—Ä–µ–º—è –Ω–∞ –∑–∞–ø—É—Å–∫</td>
<td>startupProbe</td>
</tr>
<tr>
<td>#### –í –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–æ–±—ã (startupProbe, readinessProbe, livenessProbe)</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>‚úÖ –û—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å –∏ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã</strong></p>
<ol>
<li><strong>startupProbe ‚Äî –ø–µ—Ä–≤–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è</strong></li>
</ol>
<p>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤—Ä–µ–º—è ‚Äú–ø—Ä–æ—Å–Ω—É—Ç—å—Å—è‚Äù (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–æ–ª–≥–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç).</p>
<p>‚Ä¢ –ü–æ–∫–∞ startupProbe –Ω–µ <strong>—É—Å–ø–µ—à–Ω–∞</strong>, <strong>–Ω–∏ liveness, –Ω–∏ readiness –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è</strong>.</p>
<p>‚Ä¢ –ï—Å–ª–∏ startupProbe <strong>–ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è</strong>, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è ‚Äú–Ω–µ–∂–∏–≤—ã–º‚Äù –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.</p>
<ol>
<li><strong>readinessProbe ‚Äî –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ startupProbe</strong></li>
</ol>
<p>‚Ä¢ <strong>–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –≥–æ—Ç–æ–≤ –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ –ë–î, –ø—Ä–æ–≥—Ä–µ–ª –∫—ç—à –∏ —Ç.–¥.).</p>
<p>‚Ä¢ –ü–æ–∫–∞ readinessProbe –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç, <strong>Pod –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤</strong>.</p>
<p>‚Ä¢ –î–∞–∂–µ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä <strong>–∂–∏–≤</strong>, –Ω–æ –Ω–µ –≥–æ—Ç–æ–≤ ‚Äî —Å–µ—Ä–≤–∏—Å –Ω–µ –±—É–¥–µ—Ç –∫ –Ω–µ–º—É –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã.</p>
<ol>
<li><strong>livenessProbe ‚Äî —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ startupProbe</strong></li>
</ol>
<p>‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, <strong>–∂–∏–≤ –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –∑–∞–≤–∏—Å –ª–∏, –Ω–µ —É—Ç—ë–∫ –ª–∏ –≤ –≤–µ—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É).</p>
<p>‚Ä¢ –ï—Å–ª–∏ livenessProbe –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è, <strong>–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è</strong>.</p>
<hr />
<p><strong>üìå –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏</strong></p>
<p>‚Ä¢ –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ startupProbe <strong>–ø—Ä–æ—à–ª–∞</strong>, –æ–Ω–∞ <strong>–±–æ–ª—å—à–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è</strong>.</p>
<p>‚Ä¢ readinessProbe –∏ livenessProbe <strong>–ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏</strong> –≤—Å—ë –≤—Ä–µ–º—è, –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∂–∏–≤.</p>
<p>‚Ä¢ readinessProbe –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å ‚Äú–Ω–µ –≥–æ—Ç–æ–≤‚Äù, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Äî –∏ –≤ —ç—Ç–æ –≤—Ä–µ–º—è —Å–µ—Ä–≤–∏—Å <strong>–ø–µ—Ä–µ—Å—Ç–∞—ë—Ç —Å–ª–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫</strong> –Ω–∞ —ç—Ç–æ—Ç pod.</p>
<p>‚Ä¢ livenessProbe –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å ‚Üí kubelet <strong>—Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</strong>.</p>
<hr />
<p><strong>üîÅ –¢–∞–π–º–∏–Ω–≥–∏</strong></p>
<p>–¢—ã –º–æ–∂–µ—à—å –∑–∞–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–±:</p>
<p>‚Ä¢ initialDelaySeconds ‚Äî —Å–∫–æ–ª—å–∫–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π.</p>
<p>‚Ä¢ periodSeconds ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏.</p>
<p>‚Ä¢ timeoutSeconds ‚Äî —Å–∫–æ–ª—å–∫–æ –∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç–∞.</p>
<p>‚Ä¢ failureThreshold ‚Äî —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ –¥–æ–ª–∂–Ω–æ –Ω–µ –ø—Ä–æ–π—Ç–∏, —á—Ç–æ–±—ã —Å—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º.</p>
<hr />
<p><strong>üß† –ù–∞ —Å–æ–±–µ—Å–µ –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å:</strong></p>
<blockquote>
<p>Kubernetes –∑–∞–ø—É—Å–∫–∞–µ—Ç startupProbe, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É—Å–ø–µ–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è. –ü–æ–∫–∞ –æ–Ω–∞ –Ω–µ –ø—Ä–æ—à–ª–∞, readiness –∏ liveness –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ readinessProbe —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–æ–º, –∞ livenessProbe —Å–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –ø–æ–≤–∏—Å. –≠—Ç–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å –ª–∏—à–Ω–∏—Ö —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤ –ø—Ä–∏ –¥–æ–ª–≥–æ–º —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
</blockquote>
<h3 id="initcontainers">InitContainers</h3>
<p>initContainer ‚Äî —ç—Ç–æ <strong>—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</strong>, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è <strong>–¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</strong> –≤ Pod-–µ. –û–Ω –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–±—ã—á–Ω—ã–µ containers.</p>
<hr />
<p><strong>üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</strong></p>
<p>‚Ä¢ –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è <strong>–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ</strong>, –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è.
‚Ä¢ –ö–∞–∂–¥—ã–π –¥–æ–ª–∂–µ–Ω <strong>—É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è (exit 0)</strong> ‚Äî –∏–Ω–∞—á–µ Pod –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Init.
‚Ä¢ –ò–º–µ—é—Ç <strong>–æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã –∏ –∫–æ–º–∞–Ω–¥—ã</strong> –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
‚Ä¢ –ú–æ–≥—É—Ç <strong>–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ –∂–µ —Ç–æ–º–∞</strong>, —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.</p>
<hr />
<p><strong>üß™ –ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å initContainers?</strong></p>
<p>‚Ä¢ –ó–∞–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—Ç–∞, –ø–æ–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å (–ë–î, Redis).</p>
<p>‚Ä¢ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ volume –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
<p>‚Ä¢ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, –∫–ª—é—á–µ–π, —Å–µ–∫—Ä–µ—Ç–æ–≤.</p>
<p>‚Ä¢ –ü—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞ –∏–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π.</p>
<hr />
<p><strong>üîß –ü—Ä–∏–º–µ—Ä: –û–∂–∏–¥–∞–Ω–∏–µ –ë–î –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</strong></p>
<pre><code>apiVersion: v1
kind: Pod
metadata:
  name: app-with-init
spec:
  initContainers:
  - name: wait-for-db
    image: busybox
    command: ['sh', '-c', 'until nc -z db 5432; do echo waiting for db; sleep 2; done']
  containers:
  - name: main-app
    image: myapp:latest
    ports:
    - containerPort: 80
</code></pre>
<blockquote>
<p>–≠—Ç–æ—Ç initContainer –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–æ—Ä—Ç—É 5432. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç.</p>
</blockquote>
<hr />
<p><strong>üìÅ –ü—Ä–∏–º–µ—Ä: –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ —Ç–æ–º</strong></p>
<pre><code>spec:
  volumes:
  - name: config-volume
    emptyDir: {}

  initContainers:
  - name: copy-config
    image: busybox
    command: ['sh', '-c', 'cp /etc/config/* /config/']
    volumeMounts:
    - name: config-volume
      mountPath: /config
    - name: config-source
      mountPath: /etc/config

  containers:
  - name: app
    image: myapp
    volumeMounts:
    - name: config-volume
      mountPath: /app/config
</code></pre>
<hr />
<p><strong>üß† –°–æ–≤–µ—Ç—ã:</strong>
‚Ä¢ –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å initContainers, —á–µ–º –≥–æ—Ä–æ–¥–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–∂–∏–¥–∞–Ω–∏—è –∏–ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
‚Ä¢ –û–Ω–∏ —Ö–æ—Ä–æ—à–æ —Å–æ—á–µ—Ç–∞—é—Ç—Å—è —Å emptyDir –∏ –¥—Ä—É–≥–∏–º–∏ volume-—Ç–∏–ø–∞–º–∏.
‚Ä¢ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –æ–±—Ä–∞–∑—ã, –≤ —Ç.—á. alpine, busybox, curlimages/curl –¥–ª—è —É—Ç–∏–ª–∏—Ç.</p>
<h3 id="service-mesh">Service Mesh</h3>
<p>–≠—Ç–æ <strong>—Å–ª–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</strong>, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ç–µ–≤—ã–º–∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.</p>
<p><strong>–û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:</strong></p>
<p>‚Ä¢ üì¶ <strong>Service-to-Service communication</strong> (–æ–±–º–µ–Ω —Ç—Ä–∞—Ñ–∏–∫–æ–º)
‚Ä¢ üîí <strong>–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞</strong> (MTLS)
‚Ä¢ üéØ <strong>Routing &amp; Canary</strong> (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, A/B, Canary)
‚Ä¢ üìä <strong>–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å</strong> (–º–µ—Ç—Ä–∏–∫–∏, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏, –ª–æ–≥–∏)
‚Ä¢ üîÅ <strong>Retry, timeout, circuit breaker</strong> (–º–µ—Ö–∞–Ω–∏–∫–∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏)
‚Ä¢ üö¶ <strong>Policy control</strong> (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, ACL)</p>
<hr />
<h4 id="_49">üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h4>
<p>–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è ‚Äî <strong>Sidecar Proxy</strong>.</p>
<p>–ö–∞–∂–¥–æ–º—É Pod-—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è <strong>–ø—Ä–æ–∫—Å–∏-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä</strong> (–æ–±—ã—á–Ω–æ Envoy), —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π <strong>–≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏</strong> –∏–¥—ë—Ç:</p>
<pre><code>[service A] &lt;=&gt; [Envoy A] &lt;===&gt; [Envoy B] &lt;=&gt; [service B]
</code></pre>
<blockquote>
<p>–£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —á–µ—Ä–µ–∑ control-plane (–Ω–∞–ø—Ä–∏–º–µ—Ä, Istiod –≤ Istio).</p>
</blockquote>
<hr />
<p><strong>üéØ –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?</strong></p>
<table>
<thead>
<tr>
<th><strong>–ë–µ–∑ Service Mesh</strong></th>
<th><strong>–° Service Mesh</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>–°–∞–º –ø–∏—à–µ—à—å retry, timeout</td>
<td>–ó–∞–¥–∞—ë—à—å –≤ YAML, —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏</td>
</tr>
<tr>
<td>TLS –Ω–∞–¥–æ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤ –∫–æ–¥</td>
<td>MTLS –∞–≤—Ç–æ–º–∞—Ç–æ–º –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏</td>
</tr>
<tr>
<td>–õ–æ–≥–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ</td>
<td>Traffic shifting —á–µ—Ä–µ–∑ CRD</td>
</tr>
<tr>
<td>–ú–µ—Ç—Ä–∏–∫–∏ –≤ app</td>
<td>–ê–≤—Ç–æ-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus/Grafana/Jaeger</td>
</tr>
<tr>
<td>Manual discovery</td>
<td>–í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Å–µ—Ä–≤–∏—Å-–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="service-mesh_1">üõ† –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö Service Mesh</h4>
<h5 id="istio-">Istio (–¥–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç, –º–æ—â–Ω—ã–π, –Ω–æ —Ç—è–∂–µ–ª–æ–≤–∞—Ç)</h5>
<p>‚Ä¢ Control-plane: istiod</p>
<p>‚Ä¢ Data-plane: Envoy</p>
<p>‚Ä¢ CRD‚Äô—ã: VirtualService, DestinationRule, Gateway, AuthorizationPolicy, –∏ –¥—Ä.</p>
<p>‚Ä¢ –°–∏–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MTLS, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏, observability.</p>
<hr />
<p><strong>üß™ –ü—Ä–∏–º–µ—Ä: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–º –≤ Istio</strong></p>
<pre><code>apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: reviews-route
spec:
  hosts:
    - reviews
  http:
    - route:
        - destination:
            host: reviews
            subset: v1
          weight: 90
        - destination:
            host: reviews
            subset: v2
          weight: 10
</code></pre>
<blockquote>
<p>90% —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ–π–¥—ë—Ç –≤ v1, 10% ‚Äî –≤ v2. –≠—Ç–æ –ø—Ä–∏–º–µ—Ä <strong>canary deployment</strong> –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞.</p>
</blockquote>
<hr />
<h4 id="mtls">üîê MTLS ‚Äî –≤—Å—ë —à–∏—Ñ—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</h4>
<p>–¢—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É Pod-–∞–º–∏ <strong>–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω</strong>, –∏ –º–æ–∂–Ω–æ <strong>–≤–∫–ª—é—á–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É Zero Trust</strong> ‚Äî —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è.</p>
<pre><code>apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
spec:
  mtls:
    mode: STRICT
</code></pre>
<hr />
<h4 id="observability">üìä Observability –∏–∑ –∫–æ—Ä–æ–±–∫–∏</h4>
<p>–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫, –ª–æ–≥–æ–≤, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–æ–∫:</p>
<p>‚Ä¢ üìà Prometheus / Grafana</p>
<p>‚Ä¢ üîé Kiali (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è mesh-–∞)</p>
<p>‚Ä¢ üßµ Jaeger / Zipkin (—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏)</p>
<h3 id="service">üîß Service</h3>
<table>
<thead>
<tr>
<th><strong>–¢–∏–ø</strong></th>
<th><strong>–í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø</strong></th>
<th><strong>–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</strong></th>
<th><strong>–ü—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ClusterIP</strong></td>
<td>‚ùå –ù–µ—Ç</td>
<td>–í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞</td>
<td>curl my-svc.default.svc.cluster.local</td>
</tr>
<tr>
<td><strong>NodePort</strong></td>
<td>‚úÖ –î–∞</td>
<td>Bare-metal, Minikube</td>
<td>curl http://&lt;\NodeIP&gt;:30080</td>
</tr>
<tr>
<td><strong>LoadBalancer</strong></td>
<td>‚úÖ –î–∞ (–æ–±–ª–∞–∫–æ)</td>
<td>GKE, EKS, AKS, MetalLB</td>
<td>curl http://\&lt;\EXTERNAL-IP&gt;</td>
</tr>
<tr>
<td><strong>ExternalName</strong></td>
<td>‚ö†Ô∏è –ß–µ—Ä–µ–∑ DNS</td>
<td>–î–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º</td>
<td>curl http://external-service.local (CNAME)</td>
</tr>
<tr>
<td><strong>Headless</strong></td>
<td>‚ùå –ù–µ—Ç (IP –Ω–µ—Ç)</td>
<td>StatefulSet, Service Discovery</td>
<td>dig my-svc.default.svc.cluster.local ‚Üí IP –ø–æ–¥–æ–≤</td>
</tr>
</tbody>
</table>
<p>–≠—Ç–æ <strong>–±–∞–∑–æ–≤—ã–π —Ä–µ—Å—É—Ä—Å Kubernetes</strong>, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:</p>
<p>‚Ä¢ —Å–µ—Ä–≤–∏—Å-–¥–∏—Å–∫–∞–≤–µ—Ä–∏ –ø–æ –∏–º–µ–Ω–∏ (DNS),
‚Ä¢ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π IP,
‚Ä¢ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ Pod-—ã –ø–æ label‚Äô–∞–º.</p>
<pre><code>apiVersion: v1
kind: Service
metadata:
  name: reviews
spec:
  selector:
    app: reviews
  ports:
    - port: 80
      targetPort: 8080
</code></pre>
<blockquote>
<p>–í—Å–µ Pod-—ã —Å app=reviews –ø–æ–ª—É—á–∞—Ç —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ —ç—Ç–æ—Ç Service.</p>
</blockquote>
<hr />
<h4 id="clusterip">üß± ClusterIP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</h4>
<pre><code>apiVersion: v1
kind: Service
metadata:
  name: my-svc
spec:
  selector:
    app: my-app
  ports:
    - port: 80        # –í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
      targetPort: 8080
</code></pre>
<ul>
<li><strong>–û–ø–∏—Å–∞–Ω–∏–µ</strong>: –î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.</li>
<li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –î–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.</li>
<li><strong>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</strong>: –ë—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ–±—Ä–∞—â–∞–µ—Ç—Å—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.</li>
</ul>
<pre><code>spec:
¬† type: ClusterIP
</code></pre>
<h4 id="nodeport">üåê NodePort</h4>
<pre><code>apiVersion: v1
kind: Service
metadata:
  name: my-nodeport-svc
spec:
  type: NodePort
  selector:
    app: my-app
  ports:
    - port: 80
      targetPort: 8080
      nodePort: 30080
</code></pre>
<blockquote>
<p>–î–æ—Å—Ç—É–ø: http://&lt;NodeIP&gt;:30080</p>
</blockquote>
<ul>
<li><strong>–û–ø–∏—Å–∞–Ω–∏–µ</strong>: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –≤—Å–µ—Ö –Ω–æ–¥–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞.</li>
<li><strong>–î–æ—Å—Ç—É–ø –∏–∑–≤–Ω–µ</strong>: –î–∞, –ø–æ IP-–∞–¥—Ä–µ—Å—É –Ω–æ–¥—ã –∏ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø–æ—Ä—Ç—É.</li>
<li><strong>–î–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤</strong>: 30000‚Äì32767 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).</li>
<li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—Ä—É–∂—É –±–µ–∑ Ingress.</li>
</ul>
<h4 id="loadbalancer">üåé LoadBalancer</h4>
<pre><code>apiVersion: v1
kind: Service
metadata:
  name: my-lb-svc
spec:
  type: LoadBalancer
  selector:
    app: my-app
  ports:
    - port: 80
      targetPort: 8080
</code></pre>
<blockquote>
<p>–í –æ–±–ª–∞–∫–∞—Ö ‚Äî –≤—ã–¥–∞—Å—Ç EXTERNAL-IP —á–µ—Ä–µ–∑ kubectl get svc</p>
</blockquote>
<ul>
<li><strong>–û–ø–∏—Å–∞–Ω–∏–µ</strong>: –°–æ–∑–¥–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ (–æ–±—ã—á–Ω–æ –≤ –æ–±–ª–∞–∫–µ).</li>
<li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å—É –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, production-ready –ø–æ–¥—Ö–æ–¥.</li>
<li><strong>–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</strong>: –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –æ–±–ª–∞—á–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º (GKE, EKS, AKS –∏ –¥—Ä).</li>
</ul>
<h4 id="externalname">üîó¬†ExternalName</h4>
<pre><code>spec:
  type: ExternalName
  externalName: my.external.service.com
</code></pre>
<ul>
<li><strong>–û–ø–∏—Å–∞–Ω–∏–µ</strong>: –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–µ–º—É DNS-–∏–º–µ–Ω–∏.</li>
<li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º —á–µ—Ä–µ–∑ DNS, –∫–∞–∫ –±—É–¥—Ç–æ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.</li>
<li><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å</strong>: –ù–µ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π IP, —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ CNAME.</li>
</ul>
<h4 id="headless-service">üß™ Headless Service</h4>
<pre><code>spec:
¬† clusterIP: None
</code></pre>
<ul>
<li><strong>–û–ø–∏—Å–∞–Ω–∏–µ</strong>: –ù–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç IP-–∞–¥—Ä–µ—Å; –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ IP –ø–æ–¥–æ–≤.</li>
<li><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</strong>: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, –≥–¥–µ –≤–∞–∂–µ–Ω –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–¥–∞–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, StatefulSet, —Å–µ—Ä–≤–∏—Å discovery.</li>
<li><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å</strong>: –í–º–µ—Å—Ç–æ –±–∞–ª–∞–Ω—Å–∞ ‚Äî –ø–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã.</li>
</ul>
<h4 id="_50">üîß <strong>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏</strong></h4>
<p>–ù–µ —è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏, –Ω–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è</p>
<ul>
<li><strong>Ingress</strong> ‚Äî <em>–Ω–µ —Å–µ—Ä–≤–∏—Å, –∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏</em>. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è HTTP/HTTPS –≤—Ö–æ–¥–∞ –∏ –±–æ–ª–µ–µ –≥–∏–±–∫–æ–≥–æ —Ä–æ—É—Ç–∏–Ω–≥–∞.</li>
<li><strong>Service Mesh (–Ω–∞–ø—Ä–∏–º–µ—Ä, Istio, Linkerd)</strong> ‚Äî –¥–æ–±–∞–≤–ª—è—é—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –Ω–∞–¥ —Å–µ—Ä–≤–∏—Å–∞–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã, –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ L7.</li>
<li><strong>MetalLB / Kube-vip</strong> ‚Äî —Ä–∞—Å—à–∏—Ä—è—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ LoadBalancer –≤ on-premise –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö, –≥–¥–µ –Ω–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞.</li>
</ul>
<h3 id="istio-virtualservice">üïπ Istio VirtualService</h3>
<p>–≠—Ç–æ <strong>—Ä–µ—Å—É—Ä—Å —É—Ä–æ–≤–Ω—è Istio</strong>, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:</p>
<p>‚Ä¢ <strong>–ö–∞–∫ –∏–º–µ–Ω–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫</strong> –≤–Ω—É—Ç—Ä–∏ Service
‚Ä¢ –î–µ–ª–∞—Ç—å canary, A/B, header-based routing –∏ —Ç.–¥.
‚Ä¢ –£–ø—Ä–∞–≤–ª—è—Ç—å retry, timeout, fault injection –∏ —Ç.–ø.</p>
<pre><code>apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: reviews-routing
spec:
  hosts:
    - reviews
  http:
    - match:
        - headers:
            end-user:
              exact: test-user
      route:
        - destination:
            host: reviews
            subset: v2
    - route:
        - destination:
            host: reviews
            subset: v1
</code></pre>
<blockquote>
<p>–≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ: –µ—Å–ª–∏ —é–∑–µ—Ä ‚Äî test-user, –æ—Ç–¥–∞—Ç—å reviews:v2, –∏–Ω–∞—á–µ ‚Äî v1.</p>
</blockquote>
<hr />
<p><strong>üîÑ –ö–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ</strong></p>
<p>‚Ä¢ Service ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ <strong>‚Äú–∫—É–¥–∞‚Äù</strong>: –Ω–∞–±–æ—Ä Pod-–æ–≤ (endpoints)</p>
<p>‚Ä¢ VirtualService ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ <strong>‚Äú–∫–∞–∫‚Äù</strong>: –ø—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –≤–µ—Ä—Å–∏–∏, —É—Å–ª–æ–≤–∏—è</p>
<p><strong>–¢—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç —Ç–∞–∫:</strong></p>
<pre><code>Client ‚Üí Kubernetes Service ‚Üí Istio Proxy (Envoy) ‚Üí VirtualService ‚Üí Target Pod
</code></pre>
<hr />
<p><strong>üì¶ –ê —á—Ç–æ —Ç–∞–∫–æ–µ subset?</strong></p>
<p>–ß—Ç–æ–±—ã VirtualService –º–æ–≥ –≤—ã–±—Ä–∞—Ç—å v1, v2, —Ç—ã –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å DestinationRule:</p>
<pre><code>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: reviews-dest
spec:
  host: reviews
  subsets:
    - name: v1
      labels:
        version: v1
    - name: v2
      labels:
        version: v2
</code></pre>
<blockquote>
<p>–¢–µ–ø–µ—Ä—å Istio —Å–º–æ–∂–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ Pod-—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö version: v1 –∏–ª–∏ v2.</p>
</blockquote>
<hr />
<h3 id="ingress">Ingress</h3>
<p>Kubernetes —Ä–µ—Å—É—Ä—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç <strong>–ø—Ä–∞–≤–∏–ª–∞ –≤—Ö–æ–¥–∞ HTTP/HTTPS-—Ç—Ä–∞—Ñ–∏–∫–∞</strong> –≤ –∫–ª–∞—Å—Ç–µ—Ä –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∫ —Å–µ—Ä–≤–∏—Å–∞–º.</p>
<p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
<pre><code>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-ingress
spec:
  rules:
    - host: mysite.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: my-service
                port:
                  number: 80
</code></pre>
<p>üìå –ù–æ —Å–∞–º Ingress –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞!</p>
<h4 id="ingress-controller">üéÆ Ingress Controller ‚Äî —á—Ç–æ —ç—Ç–æ?</h4>
<blockquote>
<p><strong>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ–¥/–¥–µ–ø–ª–æ–π–º–µ–Ω—Ç)</strong>, –∫–æ—Ç–æ—Ä–æ–µ <strong>—á–∏—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã Ingress</strong> –∏ <strong>–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, NGINX) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–Ω–µ—à–Ω–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞.</p>
</blockquote>
<p><strong>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:</strong></p>
<p>‚Ä¢ nginx-ingress ‚úÖ (–¥–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç)</p>
<p>‚Ä¢ traefik</p>
<p>‚Ä¢ HAProxy</p>
<p>‚Ä¢ Istio Gateway (–≤ —Ä–∞–º–∫–∞—Ö Istio)</p>
<p>‚Ä¢ AWS ALB Controller (–≤ AWS)</p>
<hr />
<p><strong>üîÅ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong></p>
<pre><code>[–ë—Ä–∞—É–∑–µ—Ä] 
  ‚Üì HTTP/HTTPS
[Ingress Controller Pod (–Ω–∞–ø—Ä–∏–º–µ—Ä, NGINX)]
  ‚Üì
[Ingress rules ‚Üí Service ‚Üí Pod]
</code></pre>
<hr />
<h4 id="ingress_1">üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Ingress:</h4>
<p>‚Ä¢ –ü—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (host + path)</p>
<p>‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS (—á–µ—Ä–µ–∑ TLS-—Å–µ–∫—Ä–µ—Ç—ã)</p>
<p>‚Ä¢ –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ (timeouts, redirects –∏ —Ç.–¥.)</p>
<h4 id="ingress-controller_1">üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Ingress Controller:</h4>
<p>‚Ä¢ –°–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç (80/443)</p>
<p>‚Ä¢ –°—á–∏—Ç—ã–≤–∞–µ—Ç Ingress-–æ–±—ä–µ–∫—Ç—ã</p>
<p>‚Ä¢ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ–∫—Å–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, nginx.conf)</p>
<p>‚Ä¢ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</p>
<hr />
<h4 id="_51">üß† –ö—Ä–∞—Ç–∫–æ:</h4>
<table>
<thead>
<tr>
<th><strong>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</strong></th>
<th><strong>–†–æ–ª—å</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Ingress</td>
<td>–ü—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏</td>
</tr>
<tr>
<td>Ingress Controller</td>
<td>–ü—Ä–æ–∫—Å–∏, –∫–æ—Ç–æ—Ä—ã–π —ç—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç</td>
</tr>
</tbody>
</table>
<h3 id="replicaset">ReplicaSet (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π)</h3>
<blockquote>
<p>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç <strong>–∑–∞–¥–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Pod-–æ–≤</strong>. –°–∞–º –ø–æ —Å–µ–±–µ —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é.</p>
</blockquote>
<pre><code>apiVersion: apps/v1
kind: ReplicaSet
spec:
  replicas: 3
</code></pre>
<p>‚Ä¢ –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç: <em>N —Ä–µ–ø–ª–∏–∫</em>
‚Ä¢ –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, rollback
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <strong>–≤–Ω—É—Ç—Ä–∏ Deployment</strong></p>
<p>üìå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –Ω–∞–ø—Ä—è–º—É—é ‚Äî –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Deployment.</p>
<hr />
<h3 id="deployment-stateless">Deployment (—Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è stateless –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)</h3>
<blockquote>
<p>–°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç <strong>–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å</strong>, <strong>–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</strong>, <strong>–æ—Ç–∫–∞—Ç</strong>.</p>
</blockquote>
<pre><code>apiVersion: apps/v1
kind: Deployment
spec:
  replicas: 3
  strategy:
    type: RollingUpdate
</code></pre>
<p>‚Ä¢ –ü–æ–∑–≤–æ–ª—è–µ—Ç <strong>–æ–±–Ω–æ–≤–ª—è—Ç—å –≤–µ—Ä—Å–∏–∏ –±–µ–∑ –¥–∞—É–Ω—Ç–∞–π–º–∞</strong></p>
<p>‚Ä¢ –ï—Å—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (RollingUpdate, Recreate)</p>
<p>‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç rollback, pause, resume</p>
<p>üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, API, —Å–µ—Ä–≤–∏—Å–æ–≤.</p>
<hr />
<h3 id="daemonset">DaemonSet</h3>
<blockquote>
<p>–ó–∞–ø—É—Å–∫–∞–µ—Ç <strong>–ø–æ –æ–¥–Ω–æ–º—É Pod-—É –Ω–∞ –∫–∞–∂–¥–æ–π Node</strong>.</p>
</blockquote>
<pre><code>apiVersion: apps/v1
kind: DaemonSet
</code></pre>
<p>‚Ä¢ –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è: –ª–æ–≥–≥–µ—Ä–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∞–≥–µ–Ω—Ç–∞ (Prometheus, Fluentd)</p>
<p>‚Ä¢ –ù–æ–≤—ã–µ –Ω–æ–¥—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç Pod</p>
<p>‚Ä¢ –ë–µ–∑ replicas ‚Äî –æ–Ω —Å–∞–º –∑–Ω–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –Ω–æ–¥</p>
<p>üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.</p>
<hr />
<h3 id="statefulset">StatefulSet</h3>
<blockquote>
<p>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è <strong>stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</strong> (–ë–î, –∫—ç—à, –æ—á–µ—Ä–µ–¥–∏), –≥–¥–µ <strong>–≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∏ –∏–º–µ–Ω–∞ Pod-–æ–≤</strong>.</p>
</blockquote>
<pre><code>apiVersion: apps/v1
kind: StatefulSet
spec:
  serviceName: my-headless
</code></pre>
<p>‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ Pod-–æ–≤: mongo-0, mongo-1</p>
<p>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç <strong>PersistentVolumeClaim templates</strong></p>
<p>‚Ä¢ –ó–∞–ø—É—Å–∫–∞–µ—Ç/—É–¥–∞–ª—è–µ—Ç Pod‚Äô—ã –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ</p>
<p>üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: PostgreSQL, Cassandra, Kafka, Redis Cluster</p>
<hr />
<h3 id="job">Job</h3>
<blockquote>
<p>–í—ã–ø–æ–ª–Ω—è–µ—Ç <strong>–æ–¥–∏–Ω–æ—á–Ω—É—é –∑–∞–¥–∞—á—É</strong>, –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.</p>
</blockquote>
<pre><code>apiVersion: batch/v1
kind: Job
spec:
  completions: 1
</code></pre>
<p>‚Ä¢ –°–æ–∑–¥–∞—ë—Ç Pod –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏</p>
<p>‚Ä¢ –ü–æ–≤—Ç–æ—Ä—è–µ—Ç, –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–µ—É—Å–ø–µ—à–Ω–∞</p>
<p>‚Ä¢ –°–∞–º —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ (–∏–ª–∏ –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏)</p>
<p>üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: –º–∏–≥—Ä–∞—Ü–∏–π, –∏–º–ø–æ—Ä—Ç–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á</p>
<hr />
<h3 id="cronjob">CronJob</h3>
<blockquote>
<p>–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç Job –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (cron-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ)</p>
</blockquote>
<pre><code>apiVersion: batch/v1
kind: CronJob
spec:
  schedule: &quot;*/5 * * * *&quot;
</code></pre>
<p>üìå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: –±—ç–∫–∞–ø–æ–≤, –ø—Ä–æ–≤–µ—Ä–æ–∫, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á—ë—Ç–æ–≤</p>
<hr />
<h3 id="pod-controllers-comparation">Pod controllers comparation</h3>
<table>
<thead>
<tr>
<th><strong>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä</strong></th>
<th><strong>–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å</strong></th>
<th><strong>–•—Ä–∞–Ω–∏—Ç —Å—Ç–µ–π—Ç</strong></th>
<th><strong>–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å</strong></th>
<th><strong>–û–¥–Ω–∞ –∑–∞–¥–∞—á–∞</strong></th>
<th><strong>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Deployment</td>
<td>‚úÖ –î–∞</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚ùå –ù–µ—Ç</td>
<td>web-app, API, worker</td>
</tr>
<tr>
<td>ReplicaSet</td>
<td>‚úÖ –î–∞</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚ùå –ù–µ—Ç</td>
<td>(–≤–Ω—É—Ç—Ä–∏ Deployment)</td>
</tr>
<tr>
<td>DaemonSet</td>
<td>‚ùå 1 –Ω–∞ Node</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚ùå –ù–µ—Ç</td>
<td>node exporter, log-–∞–≥–µ–Ω—Ç—ã</td>
</tr>
<tr>
<td>StatefulSet</td>
<td>‚úÖ –î–∞</td>
<td>‚úÖ –î–∞</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚ùå –ù–µ—Ç</td>
<td>PostgreSQL, Redis cluster</td>
</tr>
<tr>
<td>Job</td>
<td>‚ùå (–æ–¥–∏–Ω –∑–∞–ø—É—Å–∫)</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚úÖ –î–∞</td>
<td>–º–∏–≥—Ä–∞—Ü–∏—è, ETL, init-task</td>
</tr>
<tr>
<td>CronJob</td>
<td>‚ùå</td>
<td>‚ùå –ù–µ—Ç</td>
<td>‚úÖ –î–∞</td>
<td>‚úÖ –î–∞</td>
<td>–±—ç–∫–∞–ø –∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç</td>
</tr>
</tbody>
</table>
<h3 id="pvc">PVC</h3>
<p><strong>PVC (PersistentVolumeClaim)</strong> ‚Äî —ç—Ç–æ <strong>–∑–∞—è–≤–∫–∞ –æ—Ç Pod-–∞ –Ω–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ</strong>. –≠—Ç–æ –∫–∞–∫ ‚Äú–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞‚Äù: —Ç—ã –≥–æ–≤–æ—Ä–∏—à—å, –∫–∞–∫–æ–π –æ–±—ä—ë–º –∏ –¥–æ—Å—Ç—É–ø —Ç–µ–±–µ –Ω—É–∂–µ–Ω ‚Äî –∞ Kubernetes —Å–∞–º –≤—ã–¥–µ–ª—è–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (PersistentVolume) –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –µ–≥–æ (–≤ —Å–ª—É—á–∞–µ dynamic provisioning).</p>
<hr />
<p><strong>üß± –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ Kubernetes</strong></p>
<ol>
<li><strong>PersistentVolume (PV)</strong> ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∏–ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫ (–¥–æ–ª–≥–æ–≤–µ—á–Ω—ã–π —Ç–æ–º).</li>
<li><strong>PersistentVolumeClaim (PVC)</strong> ‚Äî –∑–∞–ø—Ä–æ—Å –æ—Ç Pod-–∞: ‚Äú–¥–∞–π –º–Ω–µ –¥–∏—Å–∫ –Ω–∞ 1Gi, —Å RW –¥–æ—Å—Ç—É–ø–æ–º‚Äù.</li>
<li><strong>StorageClass</strong> ‚Äî —à–∞–±–ª–æ–Ω, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π, <strong>–∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å PV</strong> (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∏–ø –¥–∏—Å–∫–∞ –≤ –æ–±–ª–∞–∫–µ: SSD, HDD, reclaim policy –∏ —Ç.–ø.).</li>
</ol>
<hr />
<p><strong>üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª: –∫–∞–∫ –≤—Å—ë —Å–≤—è–∑–∞–Ω–æ</strong></p>
<pre><code>Pod ‚Üí PersistentVolumeClaim (PVC) ‚Üí PersistentVolume (PV) ‚Üí Physical disk (GCE, EBS, NFS, Ceph, etc)
</code></pre>
<hr />
<p><strong>üîß –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π PVC + Pod</strong>  </p>
<p><strong>üìÑ PVC:</strong></p>
<pre><code>apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
</code></pre>
<p><strong>üìÑ –ü–æ–¥, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —ç—Ç–æ—Ç PVC:</strong></p>
<pre><code>apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
    - name: app
      image: nginx
      volumeMounts:
        - name: my-storage
          mountPath: /usr/share/nginx/html
  volumes:
    - name: my-storage
      persistentVolumeClaim:
        claimName: my-pvc
</code></pre>
<blockquote>
<p>üì¶ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç <strong>–ø—É—Ç—å /usr/share/nginx/html</strong>, –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–∑ PVC.</p>
</blockquote>
<hr />
<p><strong>üìö –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã PVC</strong></p>
<table>
<thead>
<tr>
<th><strong>–ü–∞—Ä–∞–º–µ—Ç—Ä</strong></th>
<th><strong>–ó–Ω–∞—á–µ–Ω–∏–µ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>storage</td>
<td>–°–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1Gi)</td>
</tr>
<tr>
<td>accessModes</td>
<td>ReadWriteOnce, ReadOnlyMany, ReadWriteMany</td>
</tr>
<tr>
<td>volumeMode</td>
<td>Filesystem (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ Block</td>
</tr>
<tr>
<td>storageClassName</td>
<td>–ö–∞–∫–æ–π StorageClass –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>üîÅ Static vs Dynamic provisioning</strong></p>
<table>
<thead>
<tr>
<th><strong>–¢–∏–ø</strong></th>
<th><strong>–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Static</strong></td>
<td>–ê–¥–º–∏–Ω –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞—ë—Ç PV, —Ç—ã –¥–µ–ª–∞–µ—à—å PVC –∏ –∂–¥—ë—à—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º</td>
</tr>
<tr>
<td><strong>Dynamic</strong> ‚úÖ</td>
<td>PVC –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç StorageClass, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç PV –Ω–∞ –ª–µ—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, EBS –≤ AWS, Persistent Disk –≤ GCP)</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>üìÑ –ü—Ä–∏–º–µ—Ä: PVC —Å StorageClass</strong></p>
<pre><code>apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: fast-storage
spec:
  storageClassName: &quot;fast-ssd&quot;
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
</code></pre>
<hr />
<p><strong>üß† –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å:</strong></p>
<pre><code>kubectl get pvc
kubectl describe pvc my-pvc
kubectl get pv
</code></pre>
<blockquote>
<p>–°—Ç–∞—Ç—É—Å PVC –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å Bound, –µ—Å–ª–∏ –≤—Å—ë –æ–∫.</p>
</blockquote>
<hr />
<p><strong>üóë Reclaim Policy (—á—Ç–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è PVC)</strong></p>
<p>‚Ä¢ Delete ‚Äî PV –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –≤–º–µ—Å—Ç–µ —Å PVC (—á–∞—Å—Ç–æ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏)</p>
<p>‚Ä¢ Retain ‚Äî –¥–∏—Å–∫ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è, –Ω—É–∂–Ω–æ –æ—á–∏—â–∞—Ç—å –≤—Ä—É—á–Ω—É—é</p>
<p>‚Ä¢ Recycle (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)</p>
<hr />
<p><strong>üì¶ –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è PVC?</strong></p>
<p>‚Ä¢ –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MongoDB)</p>
<p>‚Ä¢ CMS (WordPress)</p>
<p>‚Ä¢ –ö—ç—à (Redis —Å persistence)</p>
<p>‚Ä¢ –•–æ—Å—Ç–∏–Ω–≥ —Å—Ç–∞—Ç–∏–∫–∏ –≤ Nginx</p>
<p>‚Ä¢ Kafka, MinIO, Ceph, –∏ —Ç.–¥.</p>
<hr />
<h3 id="gitops-vs-helm">GitOps vs Helm</h3>
<p><strong>üéØ –°—É—Ç—å –æ–±–æ–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:</strong></p>
<table>
<thead>
<tr>
<th><strong>–ü–æ–¥—Ö–æ–¥</strong></th>
<th><strong>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Helm CLI</strong></td>
<td>–¢—ã <strong>–≤—Ä—É—á–Ω—É—é –ø—Ä–∏–º–µ–Ω—è–µ—à—å Helm —á–∞—Ä—Ç—ã</strong> —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –∏–ª–∏ CI/CD</td>
</tr>
<tr>
<td><strong>GitOps</strong></td>
<td>–¢—ã <strong>—Ö—Ä–∞–Ω–∏—à—å –≤—Å—ë –≤ Git</strong>, –∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ <strong>—Å–∞–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ</strong></td>
</tr>
</tbody>
</table>
<hr />
<p><strong>‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–π –ø–æ–¥—Ö–æ–¥</strong></p>
<p><strong>üì¶ 1. Helm deployment (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π)</strong></p>
<p>‚Ä¢ –¢—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –∫–æ–º–∞–Ω–¥—É:</p>
<pre><code>helm upgrade --install my-app ./chart --values values.yaml
</code></pre>
<p>‚Ä¢ –ò–ª–∏ —á–µ—Ä–µ–∑ CI (–Ω–∞–ø—Ä–∏–º–µ—Ä, GitLab CI).</p>
<p>‚Ä¢ Helm —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å—ë –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–ª–∞—Å—Ç–µ—Ä.</p>
<p>‚Ä¢ <strong>–°–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî –≤ Helm –∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ</strong>, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ Git.</p>
<p>üîª –ü—Ä–æ–±–ª–µ–º—ã:</p>
<p>‚Ä¢ –ù–µ—Ç 100% –≥–∞—Ä–∞–Ω—Ç–∏–π, —á—Ç–æ Git = –∫–ª–∞—Å—Ç–µ—Ä.</p>
<p>‚Ä¢ –ù—É–∂–Ω–æ —Å–∞–º–æ–º—É —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ø–æ—Ä—è–¥–∫–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.</p>
<p>‚Ä¢ –ú–æ–∂–Ω–æ ‚Äú–≤–º–µ—à–∞—Ç—å—Å—è –≤—Ä—É—á–Ω—É—é‚Äù –∏ –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ Git.</p>
<hr />
<p><strong>üîÅ 2. GitOps (ArgoCD, FluxCD)</strong></p>
<p>‚Ä¢ –¢—ã <strong>–∫–ª–∞–¥—ë—à—å –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏–ª–∏ Helm values –≤ Git</strong>.</p>
<p>‚Ä¢ Git = –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã.</p>
<p>‚Ä¢ –í –∫–ª–∞—Å—Ç–µ—Ä–µ —Ä–∞–±–æ—Ç–∞–µ—Ç <strong>–æ–ø–µ—Ä–∞—Ç–æ—Ä (ArgoCD/Flux)</strong>, –∫–æ—Ç–æ—Ä—ã–π:</p>
<p>‚Ä¢ –°–º–æ—Ç—Ä–∏—Ç –≤ Git</p>
<p>‚Ä¢ –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã/Helm —á–∞—Ä—Ç—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä</p>
<p>‚Ä¢ –°–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã –∫–ª–∞—Å—Ç–µ—Ä –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª Git</p>
<blockquote>
<p>Git ‚Üí –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚Üí –∫–ª–∞—Å—Ç–µ—Ä</p>
</blockquote>
<hr />
<p><strong>üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∫–ª—é—á–µ–≤—ã–º –∞—Å–ø–µ–∫—Ç–∞–º:</strong></p>
<table>
<thead>
<tr>
<th><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</strong></th>
<th><strong>GitOps</strong></th>
<th><strong>Helm (—Ä—É—á–Ω–æ–π)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>üß† –ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã</td>
<td>Git</td>
<td>Helm state / CI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è / –ø–∞–º—è—Ç—å</td>
</tr>
<tr>
<td>üîÅ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å</td>
<td>–î–∞ (pull model)</td>
<td>–ù–µ—Ç (push model)</td>
</tr>
<tr>
<td>üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞</td>
<td>–ù–µ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –∫–ª–∞—Å—Ç–µ—Ä—É ‚Äî —Ç–æ–ª—å–∫–æ Git</td>
<td>–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –∫–ª–∞—Å—Ç–µ—Ä—É</td>
</tr>
<tr>
<td>üõ† –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π</td>
<td>Git revert ‚Üí –∞–≤—Ç–æ–æ—Ç–∫–∞—Ç</td>
<td>–ù–∞–¥–æ –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å–∫–∞—Ç—å helm rollback</td>
</tr>
<tr>
<td>üëÄ Observability</td>
<td>UI (ArgoCD/Flux) —Å –¥–∏—Ñ–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏</td>
<td>helm status, logs</td>
</tr>
<tr>
<td>‚úçÔ∏è –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ Git</td>
<td><strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫ Git-—Å–æ—Å—Ç–æ—è–Ω–∏—é</strong></td>
<td>–°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (drift!)</td>
</tr>
<tr>
<td>üîÅ –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</td>
<td>–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</td>
<td>–¢–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—É—Å–∫—É –∫–æ–º–∞–Ω–¥—ã</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>ü§ñ ArgoCD + Helm = ‚ù§Ô∏è</strong></p>
<p>–¢—ã –º–æ–∂–µ—à—å <strong>–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Helm –≤–Ω—É—Ç—Ä–∏ GitOps</strong>, –ø—Ä–æ—Å—Ç–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–≤ —á–∞—Ä—Ç—ã –∏ values –≤ Git:</p>
<pre><code>apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: my-app
spec:
  source:
    repoURL: https://github.com/my-org/my-repo
    targetRevision: main
    path: charts/my-app
    helm:
      valueFiles:
        - values-prod.yaml
</code></pre>
<blockquote>
<p>–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ç—ã <strong>–Ω–µ —Ç–µ—Ä—è–µ—à—å –≥–∏–±–∫–æ—Å—Ç—å Helm</strong>, –Ω–æ –ø–æ–ª—É—á–∞–µ—à—å <strong>–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é GitOps</strong>.</p>
</blockquote>
<hr />
<p><strong>üí° –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ?</strong></p>
<table>
<thead>
<tr>
<th><strong>–°—Ü–µ–Ω–∞—Ä–∏–π</strong></th>
<th><strong>–ü–æ–¥—Ö–æ–¥</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>–ú–∞–ª–µ–Ω—å–∫–∏–π pet-–ø—Ä–æ–µ–∫—Ç</td>
<td>Helm CLI</td>
</tr>
<tr>
<td>–ö–æ–º–∞–Ω–¥–∞/–ø—Ä–æ–¥/–º–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏–π</td>
<td>GitOps</td>
</tr>
<tr>
<td>–¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É–¥–∏—Ç, –æ—Ç–∫–∞—Ç, –≤–∏–¥–∏–º–æ—Å—Ç—å</td>
<td>GitOps</td>
</tr>
<tr>
<td>–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–∑ CI (—Ä—É—á–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å)</td>
<td>Helm CLI</td>
</tr>
<tr>
<td>–ú–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –∫–æ–¥</td>
<td>GitOps</td>
</tr>
</tbody>
</table>
<h3 id="rbac">RBAC</h3>
<p><strong>RBAC (Role-Based Access Control)</strong> ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤ Kubernetes, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ä–æ–ª—è—Ö. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç <strong>—Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∏—Ç—å, –∫—Ç–æ —á—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ</strong>.</p>
<p>RBAC —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ <strong>—á–µ—Ç—ã—Ä–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–∞</strong>:</p>
<p>‚Ä¢ Role
‚Ä¢ ClusterRole
‚Ä¢ RoleBinding
‚Ä¢ ClusterRoleBinding</p>
<p>!!!
rolebinding –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ clusterrole binding –∏ –¥–∞—Ç—å –ø—Ä–∞–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —é–∑–µ—Ä—É –≤ —Ä–∞–º–∫–∞—Ö –Ω–µ–π–º—Å–ø–µ–π—Å–∞
!!!</p>
<h4 id="_52">üß± –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏</h4>
<table>
<thead>
<tr>
<th><strong>–û–±—ä–µ–∫—Ç</strong></th>
<th><strong>–ì–¥–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç</strong></th>
<th><strong>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Role</td>
<td>–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö <strong>namespace</strong></td>
<td>–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è</td>
</tr>
<tr>
<td>ClusterRole</td>
<td>–¥–µ–π—Å—Ç–≤—É–µ—Ç <strong>–∫–ª–∞—Å—Ç–µ—Ä–Ω–æ</strong></td>
<td>–ú–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ –∏–ª–∏ –∫ namespace</td>
</tr>
<tr>
<td>RoleBinding</td>
<td><strong>–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö namespace</strong></td>
<td>–ù–∞–∑–Ω–∞—á–∞–µ—Ç Role –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/–≥—Ä—É–ø–ø–µ</td>
</tr>
<tr>
<td>ClusterRoleBinding</td>
<td><strong>–≥–ª–æ–±–∞–ª—å–Ω–æ</strong></td>
<td>–ù–∞–∑–Ω–∞—á–∞–µ—Ç ClusterRole –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/–≥—Ä—É–ø–ø–µ –Ω–∞ –≤–µ—Å—å –∫–ª–∞—Å—Ç–µ—Ä –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ NS</td>
</tr>
</tbody>
</table>
<hr />
<h5 id="1-role-rolebinding">üìå –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π Role –∏ RoleBinding</h5>
<pre><code># role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: dev
  name: pod-reader
rules:
- apiGroups: [&quot;&quot;]
  resources: [&quot;pods&quot;]
  verbs: [&quot;get&quot;, &quot;watch&quot;, &quot;list&quot;]
</code></pre>
<pre><code># rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: read-pods
  namespace: dev
subjects:
- kind: User
  name: alice
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io
</code></pre>
<p>üìå –≠—Ç–æ –¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é alice –¥–æ—Å—Ç—É–ø –Ω–∞ <strong>—á—Ç–µ–Ω–∏–µ –ø–æ–¥–æ–≤ –≤ namespace dev</strong>.</p>
<hr />
<h5 id="2-clusterrole-clusterrolebinding">üìå –ü—Ä–∏–º–µ—Ä 2: ClusterRole + ClusterRoleBinding</h5>
<pre><code>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: node-reader
rules:
- apiGroups: [&quot;&quot;]
  resources: [&quot;nodes&quot;]
  verbs: [&quot;get&quot;, &quot;watch&quot;, &quot;list&quot;]
</code></pre>
<pre><code>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: read-nodes
subjects:
- kind: User
  name: bob
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: node-reader
  apiGroup: rbac.authorization.k8s.io
</code></pre>
<p>üìå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å bob –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –Ω–∞ —á—Ç–µ–Ω–∏–µ –Ω–æ–¥ <strong>–≤–æ –≤—Å—ë–º –∫–ª–∞—Å—Ç–µ—Ä–µ</strong>.</p>
<hr />
<h5 id="rules">üß† –ß—Ç–æ –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤ rules?</h5>
<pre><code>rules:
- apiGroups: [&quot;&quot;, &quot;apps&quot;, &quot;batch&quot;]
  resources: [&quot;pods&quot;, &quot;deployments&quot;, &quot;jobs&quot;]
  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;delete&quot;]
</code></pre>
<p>‚Ä¢ apiGroups: –Ω–∞–ø—Ä–∏–º–µ—Ä, "" ‚Äî core, "apps" ‚Äî –¥–ª—è deployments –∏ —Ç.–¥.</p>
<p>‚Ä¢ resources: "pods", "services", "configmaps" –∏ —Ç.–¥.</p>
<p>‚Ä¢ verbs: "get", "list", "create", "delete", "update", "patch"‚Ä¶</p>
<hr />
<p><strong>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞</strong></p>
<p>–•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –∏–º–µ–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/—Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç –¥–æ—Å—Ç—É–ø?</p>
<pre><code>kubectl auth can-i get pods --as alice --namespace=dev
</code></pre>
<p>–∏–ª–∏ –¥–ª—è —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç–∞:</p>
<pre><code>kubectl auth can-i create deployments --as=system:serviceaccount:dev:sa-name
</code></pre>
<hr />
<h5 id="rbac-">‚ö†Ô∏è RBAC –∏ —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç—ã</h5>
<p>–î–ª—è pod‚Äô–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å Kubernetes API, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç (SA).</p>
<p>üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ ClusterRole –Ω–∞ SA:</p>
<pre><code>subjects:
- kind: ServiceAccount
  name: my-sa
  namespace: dev
</code></pre>
<p>üîê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Prometheus, ArgoCD, Jenkins, etc.</p>
<hr />
<h4 id="_53"><strong>üéØ –ß–∞—Å—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:</strong></h4>
<p>‚Ä¢ view, edit, admin ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ ClusterRole
‚Ä¢ Least Privilege ‚Äî –¥–∞—ë–º <strong>—Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ</strong>
‚Ä¢ aggregated ClusterRole ‚Äî —Å–±–æ—Ä–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–∞–≤ –≤ –æ–¥–Ω—É —Ä–æ–ª—å
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π <strong>kubectl auth reconcile</strong> –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è RBAC</p>
<h5 id="1-view-edit-admin">üîê 1. –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏: view, edit, admin</h5>
<p>Kubernetes –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ <strong>–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö ClusterRole</strong>, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –º–æ–∂–µ—à—å —Å—Ä–∞–∑—É –ø—Ä–∏–≤—è–∑–∞—Ç—å:</p>
<table>
<thead>
<tr>
<th><strong>–†–æ–ª—å</strong></th>
<th><strong>–ß—Ç–æ —É–º–µ–µ—Ç?</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>view</td>
<td>–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ (get, list, watch)</td>
</tr>
<tr>
<td>edit</td>
<td>–ß—Ç–µ–Ω–∏–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (–∫—Ä–æ–º–µ RBAC, NS, finalizers)</td>
</tr>
<tr>
<td>admin</td>
<td>–í—Å—ë –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö namespace, –≤–∫–ª—é—á–∞—è RBAC (–Ω–æ <strong>–Ω–µ ClusterRole</strong>)</td>
</tr>
</tbody>
</table>
<p><strong>–ü—Ä–∏–º–µ—Ä:</strong></p>
<pre><code>kind: RoleBinding
metadata:
  name: give-access
  namespace: dev
subjects:
- kind: User
  name: alice
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: view
  apiGroup: rbac.authorization.k8s.io
</code></pre>
<p>üìå –û—á–µ–Ω—å —É–¥–æ–±–Ω–æ –¥–∞–≤–∞—Ç—å –ª—é–¥—è–º –∏–ª–∏ –±—ç–∫—É –¥–æ—Å—Ç—É–ø ‚Äú–Ω–∞ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å‚Äù.</p>
<hr />
<h5 id="2-least-privilege">üßÉ 2. Least Privilege (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞)</h5>
<p>‚ö†Ô∏è <strong>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</strong>: –¥–∞–≤–∞–π –º–∏–Ω–∏–º—É–º, —á—Ç–æ –Ω—É–∂–Ω–æ.</p>
<p>–ù–∏–∫–∞–∫–∏—Ö * –≤ verbs, resources, apiGroups –±–µ–∑ –æ—Å—Ç—Ä–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏!</p>
<p><strong>–ü–ª–æ—Ö–æ–π –ø—Ä–∏–º–µ—Ä:</strong></p>
<pre><code>verbs: [&quot;*&quot;]
resources: [&quot;*&quot;]
apiGroups: [&quot;*&quot;]
</code></pre>
<p><strong>–•–æ—Ä–æ—à–∏–π –ø—Ä–∏–º–µ—Ä:</strong></p>
<pre><code>verbs: [&quot;get&quot;, &quot;list&quot;]
resources: [&quot;pods&quot;]
apiGroups: [&quot;&quot;]
</code></pre>
<p>üìå –ü—Ä–∏–Ω—Ü–∏–ø ‚Äú—á–µ–º –º–µ–Ω—å—à–µ ‚Äî —Ç–µ–º –ª—É—á—à–µ‚Äù –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–µ–Ω –¥–ª—è —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç–æ–≤ CI/CD, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.</p>
<hr />
<h5 id="3-serviceaccount-rolebinding-pod">üß¨ 3. ServiceAccount + RoleBinding: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ Pod‚Äô–∞–º</h5>
<p>–ß–∞—Å—Ç–æ —Å–µ—Ä–≤–∏—Å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Prometheus, Argo, Karpenter) –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –¥–æ—Å—Ç—É–ø–µ –∫ API. –í–º–µ—Å—Ç–æ –ø—Ä–∏–≤—è–∑–∫–∏ –ø—Ä–∞–≤ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ‚Äî —Å–æ–∑–¥–∞—ë–º <strong>ServiceAccount + RoleBinding</strong>.</p>
<pre><code>apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-agent
  namespace: monitoring
</code></pre>
<pre><code>kind: RoleBinding
metadata:
  name: my-agent-binding
  namespace: monitoring
subjects:
- kind: ServiceAccount
  name: my-agent
  namespace: monitoring
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io
</code></pre>
<p>üìå –ó–∞—Ç–µ–º —É pod‚Äô–∞ –≤ spec.serviceAccountName: my-agent.</p>
<hr />
<h5 id="4-aggregated-clusterroles">üß© 4. Aggregated ClusterRoles ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö</h5>
<p>–ú–æ–∂–Ω–æ <strong>–æ–±—ä–µ–¥–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ ClusterRole —á–µ—Ä–µ–∑ –º–µ—Ç–∫–∏</strong>, –∞ –Ω–µ –ø–∏—Å–∞—Ç—å –æ–¥–Ω—É –±–æ–ª—å—à—É—é.</p>
<pre><code>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: my-viewer
  labels:
    rbac.authorization.k8s.io/aggregate-to-view: &quot;true&quot;
rules:
- apiGroups: [&quot;batch&quot;]
  resources: [&quot;jobs&quot;]
  verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]
</code></pre>
<p>–ï—Å–ª–∏ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ —É–∂–µ –µ—Å—Ç—å ClusterRole —Å –º–µ—Ç–∫–æ–π aggregate-to-view=true, —Ç–æ —Ç–≤–æ—è —Ä–æ–ª—å <strong>–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç—Å—è</strong>.</p>
<p>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö admin / edit / view.</p>
<hr />
<h5 id="5-dynamic-access-gitops">üß™ 5. Dynamic access (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ GitOps)</h5>
<p>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å ArgoCD, Flux –∏–ª–∏ Helm ‚Äî –º–æ–∂–Ω–æ <strong>–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å RBAC —á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω—ã</strong> –∏–ª–∏ Git-–ø–∞–ø–∫–∏:</p>
<p>‚Ä¢ –°–µ—Ä–≤–∏—Å argo-server –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SA —Å ClusterRole admin</p>
<p>‚Ä¢ Helm chart —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω—É–∂–Ω—ã–µ Role/RoleBinding —á–µ—Ä–µ–∑ values.yaml</p>
<hr />
<h5 id="6-namespace-rbac">üìÅ 6. –ú—É–ª—å—Ç–∏-Namespace RBAC</h5>
<p>Role —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ NS. –ß—Ç–æ–±—ã –¥–∞—Ç—å –¥–æ—Å—Ç—É–ø –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ NS ‚Äî <strong>–∏—Å–ø–æ–ª—å–∑—É–π ClusterRole + –Ω–µ—Å–∫–æ–ª—å–∫–æ RoleBinding</strong>:</p>
<pre><code># reusable ClusterRole
kind: ClusterRole
metadata:
  name: read-pods
rules:
- apiGroups: [&quot;&quot;]
  resources: [&quot;pods&quot;]
  verbs: [&quot;get&quot;, &quot;list&quot;]

# –≤ dev
kind: RoleBinding
metadata:
  name: bind-in-dev
  namespace: dev
subjects:
- kind: User
  name: alice
roleRef:
  kind: ClusterRole
  name: read-pods

# –≤ staging
kind: RoleBinding
metadata:
  name: bind-in-staging
  namespace: staging
subjects:
- kind: User
  name: alice
roleRef:
  kind: ClusterRole
  name: read-pods
</code></pre>
<hr />
<h5 id="_54">üß† –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:</h5>
<p>‚Ä¢ kubectl auth can-i ‚Äî —Ç–≤–æ–π –¥—Ä—É–≥.</p>
<p>‚Ä¢ –°–º–æ—Ç—Ä–∏ kubectl describe rolebinding –∏ clusterrolebinding ‚Äî –≤–∏–¥–Ω–æ, –∫—Ç–æ –∫ —á–µ–º—É –ø—Ä–∏–≤—è–∑–∞–Ω.</p>
<p>‚Ä¢ –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ dry-run –∏–ª–∏ –≤ dev-NS.</p>
<p>‚Ä¢ GitOps-friendly –ø–æ–¥—Ö–æ–¥: –≤—Å–µ —Ä–æ–ª–∏ –∏ –±–∏–Ω–¥–∏–Ω–≥–∏ ‚Äî –≤ yaml –∏ –ø–æ–¥ –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º.</p>
<hr />
<h2 id="terraform">Terraform</h2>
<h3 id="ansible-terraform">–û—Ç–ª–∏—á–∏–µ ansible –∏ terraform</h3>
<p><strong>Terraform</strong>¬†- –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞–∫ –∫–æ–¥ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –µ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.</p>
<p><strong>Ansible</strong>¬†- –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.</p>
<p>–¢–æ –µ—Å—Ç—å Terraform –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á—Ç–æ –±—ã —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã, —Å–µ—Ç–∏, –¥–∏—Å–∫–∏, –∏ —Ç–ø.). Ansible –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã) –Ω–∞ —ç—Ç–∏—Ö –≤–∏—Ä—Ç—É–∞–ª–∫–∞—Ö.</p>
<p>–ù—é–∞–Ω—Å—ã: Terraform –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–µ–ª–∞–µ—Ç –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π. Ansible –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –∏ –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π.</p>
<p>–ù—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã. –ò –≤ —Ä—è–¥–µ —Å–ª—É—á–∞–µ–≤ —Å –ø–æ–º–æ—â—å—é Ansible —Ä–∞–≤–∑–≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—Å—ë —Ç–∞–∫–∏ –º–æ–∂–Ω–æ. –ö–∞–∫ –∏ –¥–ª—è —Ç–µ—Ä—Ä–∞—Ñ–æ—Ä–º–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ —Å–≤–æ–µ. –í–æ–ø—Ä–æ—Å –ª–∏—à—å –≤ –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.</p>
<h4 id="terraform-state">–ß—Ç–æ —Ç–∞–∫–æ–µ Terraform state?</h4>
<p>‚Ä¢ State-—Ñ–∞–π–ª (terraform.tfstate) —Ö—Ä–∞–Ω–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ HCL —Ä–µ—Å—É—Ä—Å—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ –æ–±–ª–∞–∫–µ.</p>
<p>‚Ä¢ –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Terraform –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, –∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ –≤–Ω–µ—Å—Ç–∏ –ø—Ä–∏ terraform apply.</p>
<ol>
<li><strong>–ì–¥–µ –µ–≥–æ —Ö—Ä–∞–Ω—è—Ç?</strong></li>
</ol>
<p>‚Ä¢ <strong>–õ–æ–∫–∞–ª—å–Ω–æ</strong> (terraform.tfstate –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) ‚Üí –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã.</p>
<p>‚Ä¢ <strong>–£–¥–∞–ª–µ–Ω–Ω–æ</strong> (S3, GCS, Azure Blob, Terraform Cloud) ‚Üí –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π.</p>
<ol>
<li><strong>–ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å?</strong></li>
</ol>
<p>‚Ä¢ <strong>–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ</strong> ‚Üí —Ä–µ—à–∞–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ (dynamodb –¥–ª—è S3 backend).</p>
<p>‚Ä¢ <strong>–ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</strong> ‚Üí —Ä–µ—à–∞–µ—Ç—Å—è —Å terraform state encrypt, terraform_remote_state, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ vault.</p>
<p>‚Ä¢ <strong>–ü–æ—Ç–µ—Ä—è state-—Ñ–∞–π–ª–∞</strong> ‚Üí –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω –±–µ–∑ –±—ç–∫–∞–ø–∞, —Ç–µ—Ä—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ—Å—É—Ä—Å–∞–º–∏ Terraform.
    ‚Ä¢ –ï—Å–ª–∏ state <strong>—É–¥–∞–ª–µ–Ω</strong>, –Ω–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –µ—â–µ –µ—Å—Ç—å ‚Üí <strong>terraform import</strong> –ø–æ–º–æ–∂–µ—Ç.
    ‚Ä¢ –ï—Å–ª–∏ state —É–¥–∞–ª–µ–Ω <strong>–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–µ—Ç</strong> ‚Üí <strong>–ø–æ—Ç–µ—Ä—è–Ω–æ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ</strong>.
    ‚Ä¢ <strong>–í—ã–≤–æ–¥:</strong> <strong>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π –±—ç–∫–∞–ø—ã state-—Ñ–∞–π–ª–æ–≤!</strong> (S3 + DynamoDB, GCS, Azure Blob).</p>
<h4 id="terraform_1">–ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ terraform</h4>
<p>–≠—Ç–æ —É—Ç–∏–ª–∏—Ç–∞, –ø—Ä–æ—Å–ª–æ–π–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç Terraform –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º API –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–¥–π–µ—Ä–∞.</p>
<p>–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ —ç—Ç–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.</p>
<h3 id="terraform_2">–ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ—Å—É—Ä—Å –≤ terraform</h3>
<p>–≠—Ç–æ –∫–∞–∫–æ–π —Ç–æ –±–ª–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ. –ö–∞–∂–¥—ã–π —Ä–µ—Å—É—Ä—Å –∏–º–µ–µ—Ç —Å–≤–æ–∏ –∫–∞–∫–∏–µ —Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, —Å–≤–æ–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Å–≤–æ—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –†–µ—Å—É—Ä—Å –∏–º–µ–µ—Ç —Å–≤–æ–π –∫–∞–∫–æ–π —Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (ID, ARN –∏ —Ç–¥).</p>
<p>–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞, —Å–µ—Ç—å, –¥–∏—Å–∫, –ø–æ—Ä—Ç, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –∏ —Ç–¥.</p>
<h2 id="ansible">Ansible</h2>
<h3 id="ansible_1">–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã Ansible</h3>
<h4 id="inventory">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (Inventory)</h4>
<ul>
<li>c–ø–∏—Å–æ–∫ —Ö–æ—Å—Ç–æ–≤, –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–º –≤ –≤–∏–¥–µ —Ç–µ–∫c—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ¬†<code>.ini</code>¬†–∏–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –≤ –≤–∏–¥–µ —Å–∫—Ä–∏–ø—Ç–∞ –∏–ª–∏ –ø–ª–∞–≥–∏–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, Openstack API –∏–ª–∏ –±–∞–∑–∞ LDAP.</li>
</ul>
<pre><code>$ cat hosts
[web]
nginx01
nginx02
nginx03

[mysql]
mysql01
mysql02
mysql03

[prod:children]
web
mysql

[devel]
dev-nginx01
dev-mysql01
</code></pre>
<p>–î–∞–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø—ã —Ö–æ—Å—Ç–æ–≤ web, mysql, prod –∏ devel, –≥—Ä—É–ø–ø–∞ prod –Ω–∞—Å–ª–µ–¥—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≥—Ä—É–ø–ø web –∏ mysql.</p>
<h4 id="task">–ó–∞–¥–∞–Ω–∏–µ (Task)</h4>
<ul>
<li>–∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ–º–∞—è –Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–º —Ö–æ—Å—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:</li>
</ul>
<pre><code class="language-yaml">apt:
package: nginx
state: present
</code></pre>
<p>–î–∞–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω –∫–æ–º–∞–Ω–¥–µ¬†<code>apt install nginx</code></p>
<h4 id="play-playbook">–°—Ü–µ–Ω–∞—Ä–∏–π (Play¬†–∏–ª–∏¬†–ü–ª–µ–π–±—É–∫ (Playbook)</h4>
<ul>
<li>—Å—Ü–µ–Ω–∞—Ä–∏–π –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –æ–¥–Ω–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞–Ω–∏–π –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:</li>
</ul>
<pre><code class="language-yaml">$ cat prod-playbook.yml
---
- hosts: nginx
tasks:
- apt:
    package: nginx
    state: present
- shell: whoami
</code></pre>
<h4 id="role">–†–æ–ª—å (Role)</h4>
<ul>
<li>–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç –Ω–∞–±–æ—Ä –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π, –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–π–ª—ã –∏ —Ç–µ–º–ø–ª–µ–π—Ç—ã, —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–¥–∞–Ω–∏—è(Tasks).</li>
</ul>
<h4 id="facts">–§–∞–∫—Ç—ã (Facts)</h4>
<ul>
<li>—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö–æ—Å—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ—Ä—Å–∏—é –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞, IP –∞–¥—Ä–µ—Å–∞ –∏ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã. Ansible –∑–∞–±–∏—Ä–∞–µ—Ç —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å —Ö–æ—Å—Ç–∞, –∏ –Ω–∞ –Ω–µ–µ –º–æ–∂–Ω–æ —Å—Å—ã–ª–∞—Ç—å—Å—è –≤ –∫–æ–¥–µ –ø–ª–µ–π–±—É–∫–æ–≤ –∏ —Ä–æ–ª–µ–π.</li>
</ul>
<p>–°–±–æ—Ä —Ñ–∞–∫—Ç–æ–≤ —Ö–æ—Å—Ç–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, –ø–æ—ç—Ç–æ–º—É –∏—Ö –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏—Ö —Å–±–æ—Ä –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–ª–µ–π–±—É–∫–∞.</p>
<h3 id="ansible_2">–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Ansible</h3>
<p>–í Ansible –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö: –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ, –≤ —Ä–æ–ª—è—Ö, —á–µ—Ä–µ–∑ <code>set_fact</code>, –≤ playbook, —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏ —Ç.–¥. –ï—Å–ª–∏ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö ‚Äî Ansible –∏—Å–ø–æ–ª—å–∑—É–µ—Ç <strong>–∑–Ω–∞—á–µ–Ω–∏–µ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º</strong>.</p>
<h4 id="_55">üìä –ü–æ—Ä—è–¥–æ–∫ –æ—Ç –Ω–∏–∑—à–µ–≥–æ –∫ –≤—ã—Å—à–µ–º—É:</h4>
<ol>
<li><strong><code>defaults</code> –≤ —Ä–æ–ª—è—Ö</strong> ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (<code>roles/myrole/defaults/main.yml</code>)</li>
<li><strong>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</strong>:</li>
<li>–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ <code>inventory.ini</code> (<code>host var</code>, <code>group:vars</code>)</li>
<li><strong><code>group_vars/</code></strong> ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≥—Ä—É–ø–ø</li>
<li><strong><code>host_vars/</code></strong> ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤</li>
<li><strong><code>ansible_facts</code></strong> ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –∏–ª–∏ –∑–∞–¥–∞–Ω—ã —á–µ—Ä–µ–∑ <code>set_fact</code></li>
<li><strong><code>vars</code> –≤ playbook</strong> ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ <code>vars:</code> –±–ª–æ–∫–∞</li>
<li><strong><code>vars</code> –≤ task</strong> ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∑–∞–¥–∞—á–µ</li>
<li><strong><code>register</code></strong> ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á</li>
<li><strong><code>--extra-vars</code></strong> ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ CLI (—Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)</li>
</ol>
<h4 id="_56">üß© –ü—Ä–∏–º–µ—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—è–º</h4>
<h5 id="1-defaults">1. <code>defaults</code> –≤ —Ä–æ–ª—è—Ö (—Å–∞–º—ã–π –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)</h5>
<pre><code class="language-yaml"># roles/myrole/defaults/main.yml
app_port: 5000
env: \&quot;dev\&quot;
</code></pre>
<h5 id="2_1">2. –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h5>
<pre><code class="language-ini">[web]
web01 ansible_host=192.168.0.10 app_port=8081

[web:vars]
region=eu
</code></pre>
<h5 id="3-group_vars-host_vars">3. <code>group_vars/</code> –∏ <code>host_vars/</code></h5>
<p>–§–∞–π–ª—ã:</p>
<ul>
<li><code>group_vars/web.yml</code></li>
<li><code>host_vars/web01.yml</code></li>
</ul>
<p>–ü—Ä–∏–º–µ—Ä:</p>
<pre><code class="language-yaml"># group_vars/web.yml
app_port: 8080
env: \&quot;staging\&quot;
</code></pre>
<pre><code class="language-yaml"># host_vars/web01.yml
app_port: 9090
</code></pre>
<p>‚Üí –ó–Ω–∞—á–µ–Ω–∏–µ –∏–∑ <code>host_vars</code> –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç <code>group_vars</code>.</p>
<h5 id="4-ansible_facts-set_fact">4. <code>ansible_facts</code> (–≤ —Ç–æ–º —á–∏—Å–ª–µ <code>set_fact</code>)</h5>
<pre><code class="language-yaml">- name: Set fact
  set_fact:
    app_port: 7070
</code></pre>
<h5 id="5-vars-playbook">5. <code>vars</code> –≤ playbook</h5>
<pre><code class="language-yaml">- hosts: all
  vars:
    app_port: 6060
</code></pre>
<h5 id="6-vars-task">6. <code>vars</code> –≤ task</h5>
<pre><code class="language-yaml">- name: Show port
  debug:
    msg: \&quot;Port is {{ app_port }}\&quot;
  vars:
    app_port: 5050
</code></pre>
<h5 id="7-register">7. <code>register</code></h5>
<pre><code class="language-yaml">- name: Get hostname
  command: hostname
  register: hostname_output
</code></pre>
<p>‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ <code>{{ hostname_output.stdout }}</code>.</p>
<h5 id="8-extra-vars">8. <code>--extra-vars</code> (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)</h5>
<pre><code class="language-bash">ansible-playbook site.yml --extra-vars \&quot;app_port=4040 env=prod\&quot;
</code></pre>
<h3 id="_57">üß† –ó–∞–∫–ª—é—á–µ–Ω–∏–µ</h3>
<p>Ansible –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–ª–µ–π–±—É–∫–æ–≤.</p>
<p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</strong></p>
<ul>
<li>–ò—Å–ø–æ–ª—å–∑—É–π <code>defaults</code> –≤ —Ä–æ–ª—è—Ö –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.</li>
<li>–ó–∞–¥–∞–≤–∞–π —Ö–æ—Å—Ç-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ <code>host_vars/</code> –∏ <code>group_vars/</code>.</li>
<li>–î–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π <code>--extra-vars</code>.</li>
</ul>
<hr />
<h3 id="handlers">–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã —Ö–µ–Ω–¥–ª–µ—Ä—ã, handlers?</h3>
<p>–ó–∞–¥–∞—á—É –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.</p>
<p>–ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ nginx –∏ —Ö–æ—Ç–∏–º –µ–≥–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å</p>
<pre><code class="language-yaml">---
- hosts: testbox
  sudo: yes
  tasks:
   - name: Install Nginx
     yum: pkg=nginx state=latest
     notify:
         - NGINX start

  handlers:
    - name: NGINX start
      service: name=nginx state=started
</code></pre>
<h3 id="iac-and">IAC and –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</h3>
<p><strong>–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</strong>¬†- —ç—Ç–æ —Ç–∞–∫–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è, —Å–æ–≥–ª–∞—Å–Ω–æ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –±—É–¥–µ—Ç –¥–∞–≤–∞—Ç—å —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ –∏ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫.</p>
<p>–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–∏—Å—Ç–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞, –Ω–µ –∏–∑–º–µ–Ω—è—Ç, –Ω–µ —Å–ª–æ–º–∞—é—Ç –∏ –Ω–µ –≤—ã–¥–∞–¥—É—Ç –æ—à–∏–±–æ–∫ –Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–º —Ö–æ—Å—Ç–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ.</p>
<p>–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ö–æ—Å—Ç, –¥–ª—è bash —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:</p>
<pre><code class="language-yaml">useradd newuser -ms /bin/bash
</code></pre>
<p>–ù–æ –µ—Å–ª–∏ –º—ã –∑–∞–ø—É—Å—Ç–∏–º –∫–æ–º–∞–Ω–¥—É –≤—Ç–æ—Ä–æ–π —Ä–∞–∑, —Ç–æ –ø–æ–ª—É—á–∏–º –æ—à–∏–±–∫—É</p>
<pre><code class="language-yaml">useradd newuser -ms /bin/bash
useradd: user 'newuser' already exists
</code></pre>
<p>–ü–æ—ç—Ç–æ–º—É –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫:</p>
<pre><code class="language-yaml">id newuser || useradd newuser -ms /bin/bash
</code></pre>
<p>–í —Å–ª—É—á–∞–µ Ansible –º—ã —Ç–æ–ª—å–∫–æ –¥–µ–∫–ª–∞—Ä–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:</p>
<pre><code class="language-yaml">- hosts: localhost
  gather_facts: no
  tasks:
    - user:
        name: newuser
        shell: /bin/bash
        state: present
</code></pre>
<p>–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–ª–µ–π–±—É–∫ Ansible –æ—Ç–≤–µ—Ç–∏—Ç:</p>
<pre><code class="language-yaml">TASK [user] ***
changed: [localhost] =&gt; {
  &quot;ansible_facts&quot;: {
    &quot;discovered_interpreter_python&quot;: &quot;/usr/bin/python3&quot;
  },
  &quot;changed&quot;: true,
  &quot;comment&quot;: &quot;&quot;,
  &quot;create_home&quot;: true,
  &quot;group&quot;: 1001,
  &quot;home&quot;: &quot;/home/newuser&quot;,
  &quot;name&quot;: &quot;newuser&quot;,
  &quot;shell&quot;: &quot;/bin/bash&quot;,
  &quot;state&quot;: &quot;present&quot;,
  &quot;system&quot;: false,
  &quot;uid&quot;: 1001
}
</code></pre>
<p>–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º:</p>
<pre><code class="language-yaml">TASK [user] ***
ok: [localhost] =&gt; {
  &quot;ansible_facts&quot;: {
    &quot;discovered_interpreter_python&quot;: &quot;/usr/bin/python3&quot;
  },
  &quot;append&quot;: false,
  &quot;changed&quot;: false,
  &quot;comment&quot;: &quot;&quot;,
  &quot;group&quot;: 1001,
  &quot;home&quot;: &quot;/home/newuser&quot;,
  &quot;move_home&quot;: false,
  &quot;name&quot;: &quot;newuser&quot;,
  &quot;shell&quot;: &quot;/bin/bash&quot;,
  &quot;state&quot;:
  &quot;present&quot;,
  &quot;uid&quot;: 1001
}
</code></pre>
<p>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞–Ω–∏—è —Å–º–µ–Ω–∏–ª—Å—è —Å¬†<code>changed</code>¬†–Ω–∞¬†<code>ok</code>¬†–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤–µ—Ä–Ω—É–ª –∑–Ω–∞—á–µ–Ω–∏–µ¬†<code>"changed": false</code></p>
<p>–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å—Ü–µ–Ω–∞—Ä–∏–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å —É—á–µ—Ç–æ–º –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏, —Ä–µ–∞–ª–∏–∑—É—é—Ç —Ç—É —Å–∞–º—É—é –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–Ω–æ–º—É –≤ –∫–æ–¥–µ –Ω–∞—à–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞.</p>
<p>–≠—Ç–æ –∏ –µ—Å—Ç—å¬†<strong>Ia–° - Infrastructure as Code - –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –∫–æ–¥</strong></p>
<h3 id="ad-hoc-ansible">–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω ad hoc –≤ ansible?</h3>
<p>–≠—Ç–æ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –∞–Ω—Å–∏–±–ª –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>